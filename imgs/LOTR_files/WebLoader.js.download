var WebPlayerLoader=function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var o=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===e&&(e=12e4),void 0===t&&(t=2),void 0===r&&(r=document);var n=this;this.scriptErrorCount=0,this.scriptLoaded=!1,this.onScriptError=function(e,t,r){e&&(e.onload=e.onerror=e.onreadystatechange=null),clearTimeout(n.scriptTimerId),n.objectExists(n.scriptInfo.name)||(++n.scriptErrorCount<n.maxAttempts?(n.onNonFatal(t),n.setScript(r)):n.onFatal(t))},this.scriptTimeoutMs=e,this.maxAttempts=t,this.documentInstance=r}return e.prototype.get=function(e,t,r,n,o){void 0===o&&(o=!1),this.scriptInfo=e,this.onLoad=t,this.onNonFatal=r,this.onFatal=n,this.scriptErrorCount=0,this.scriptLoaded=!1,this.bustCache=o,clearTimeout(this.scriptTimerId),this.setScript(this.scriptInfo.url)},e.prototype.setScript=function(t){var r=this,n=this.documentInstance.createElement("script");this.scriptTimerId=setTimeout(function(){r.onScriptError(n,new Error("Script load timed out. "+r.scriptInfo.name+" for "+t),t)},this.scriptTimeoutMs);var o=(new Date).getTime();n.setAttribute("crossorigin","anonymous"),n.onload=n.onreadystatechange=function(){if(!r.scriptLoaded&&(void 0===n.readyState||"loaded"===n.readyState||"complete"===n.readyState))if(r.objectExists(r.scriptInfo.name)){clearTimeout(r.scriptTimerId),r.scriptLoaded=!0;var e=(new Date).getTime()-o;n.onload=n.onerror=n.onreadystatechange=null,r.onLoad({cached:!1,downloadMs:e,totalMs:e})}else r.onScriptError(n,new Error("Script loaded but missing result object. Expected "+r.scriptInfo.name+" for "+t),t)},n.onerror=function(){r.onScriptError(n,new Error("Script onerror fired: "+r.scriptInfo.name+" for "+t),t)};var e=this.bustCache?"?t="+(new Date).getTime():"";n.src=t+e,this.documentInstance.getElementsByTagName("head")[0].appendChild(n)},e.prototype.objectExists=function(e){return void 0!==window[e]},e}();t.JavaScriptLoader=r});e(o);o.JavaScriptLoader;var n=t(function(l){!function(e){var r,s={};s.VERSION="1.4.1";var n={},t=function(e,t){return function(){return t.apply(e,arguments)}},o=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},i=function(e,t){return{value:e,name:t}};s.DEBUG=i(1,"DEBUG"),s.INFO=i(2,"INFO"),s.TIME=i(3,"TIME"),s.WARN=i(4,"WARN"),s.ERROR=i(8,"ERROR"),s.OFF=i(99,"OFF");var a=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};a.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&0<e.length&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&0<e.length&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){r&&this.enabledFor(e)&&r(t,o({level:e},this.context))}};var c,p=new a({filterLevel:s.OFF});(c=s).enabledFor=t(p,p.enabledFor),c.debug=t(p,p.debug),c.time=t(p,p.time),c.timeEnd=t(p,p.timeEnd),c.info=t(p,p.info),c.warn=t(p,p.warn),c.error=t(p,p.error),c.log=c.info,s.setHandler=function(e){r=e},s.setLevel=function(e){for(var t in p.setLevel(e),n)n.hasOwnProperty(t)&&n[t].setLevel(e)},s.getLevel=function(){return p.getLevel()},s.get=function(e){return n[e]||(n[e]=new a(o({name:e},p.context)))},s.createDefaultHandler=function(o){(o=o||{}).formatter=o.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var i={},a=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(e,t){e=Array.prototype.slice.call(e);var r,n=console.log;t.level===s.TIME?(r=(t.name?"["+t.name+"] ":"")+e[0],"start"===e[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):a(n,[r+": "+((new Date).getTime()-i[r])+"ms"])):(t.level===s.WARN&&console.warn?n=console.warn:t.level===s.ERROR&&console.error?n=console.error:t.level===s.INFO&&console.info?n=console.info:t.level===s.DEBUG&&console.debug&&(n=console.debug),o.formatter(e,t),a(n,e))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},l.exports?l.exports=s:(s._prevLogger=e.Logger,s.noConflict=function(){return e.Logger=s._prevLogger,s},e.Logger=s)}(i)}),r=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=n.get("IndexedDBStorage"),r=function(){function e(e,t){void 0===t&&(t=window);var n=this;this.VERSION=1,this.dbOpenRequest=null,this.pendingDbOperations=[],this.database=null,this.onGetCallbackMap={},this.tryInitialize=function(e){n.database||!n.isSupported()?e():(n.pendingDbOperations.push(e),null==n.dbOpenRequest&&n.initialize(function(){for(var e=0,t=n.pendingDbOperations;e<t.length;e++){(0,t[e])()}n.dbOpenRequest=null,n.pendingDbOperations=[]}))},this.initialize=function(t){try{var r=n.windowRef.indexedDB.open(n.dbName,n.VERSION);(n.dbOpenRequest=r).onsuccess=function(e){try{n.database=e.target.result,n.attachDatabaseErrorListener()}catch(e){}t()},r.onupgradeneeded=function(e){e.oldVersion<1&&(n.database=e.target.result,n.attachDatabaseErrorListener(),n.database.createObjectStore(n.dbName))},r.onerror=function(e){a.error("IndexedDB open request error.",r.error),e.stopPropagation(),e.preventDefault(),t()}}catch(e){t()}},this.dbName=e,this.windowRef=t}return e.prototype.get=function(o,r){var i=this;this.onGetCallbackMap[o]=r,this.tryInitialize(function(){try{if(!i.database)return void i.tryInvokeCallback(o);var n=(new Date).getTime(),e=i.database.transaction([i.dbName],"readonly");i.attachTransactionErrorListener(e,"IndexedDB 'get' transaction error.",o);var t=e.objectStore(i.dbName).get(o);t.onsuccess=function(e){try{var t=e.target.result,r=i.onGetCallbackMap[o];null!=r&&(r(t,(new Date).getTime()-n),delete i.onGetCallbackMap[o])}catch(e){i.tryInvokeCallback(o)}},t.onerror=function(e){a.error("IndexedDB 'get' request error.",t.error),e.preventDefault(),e.stopPropagation(),i.tryInvokeCallback(o)}}catch(e){r()}})},e.prototype.set=function(t,r){var n=this;this.tryInitialize(function(){try{if(n.database){var e=n.database.transaction([n.dbName],"readwrite");n.attachTransactionErrorListener(e,"IndexedDB 'set' transaction error."),e.objectStore(n.dbName).put(r,t)}}catch(e){}})},e.prototype.clear=function(){var t=this;this.tryInitialize(function(){try{if(null!=t.database){var e=t.database.transaction([t.dbName],"readwrite");t.attachTransactionErrorListener(e,"IndexedDB 'clear' transaction error."),e.objectStore(t.dbName).clear()}}catch(e){}})},e.prototype.attachDatabaseErrorListener=function(){var r=this;null!=this.database&&(this.database.onerror=function(e){var t=e.target;a.error("IndexedDB Database error.",t.error),e.preventDefault(),e.stopPropagation(),Object.keys(r.onGetCallbackMap).forEach(function(e){return r.tryInvokeCallback(e)})})},e.prototype.attachTransactionErrorListener=function(t,r,n){var o=this;t.onerror=function(e){a.error(r,t.error),e.preventDefault(),e.stopPropagation(),null!=n&&o.tryInvokeCallback(n)}},e.prototype.tryInvokeCallback=function(e){var t=this.onGetCallbackMap[e];null!=t&&(t(),delete this.onGetCallbackMap[e])},e.prototype.isSupported=function(){return null!=this.windowRef.indexedDB},e}();t.IndexedDBStorage=r});e(r);r.IndexedDBStorage;var a=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBStorage=r.IndexedDBStorage});e(a);a.IndexedDBStorage;var s=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.JavaScript=0]="JavaScript",n[n.JSON=1]="JSON",t.ScriptType=r});e(s);s.ScriptType;var c=t(function(e,t){var r;r=function(e){e.version="0.4.0";var a=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),o="undefined"!=typeof Buffer;function i(e){for(var t=-1,r=0,n=e.length-7;r<n;)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+7;)t=t>>>8^a[255&(t^e[r++])];return-1^t}e.table=a,e.bstr=function(e){if(32768<e.length&&o)return i(new Buffer(e));for(var t=-1,r=e.length-1,n=0;n<r;)t=a[255&(t^e.charCodeAt(n++))]^t>>>8,t=a[255&(t^e.charCodeAt(n++))]^t>>>8;return n===r&&(t=t>>>8^a[255&(t^e.charCodeAt(n))]),-1^t},e.buf=function(e){if(1e4<e.length)return i(e);for(var t=-1,r=0,n=e.length-3;r<n;)t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+3;)t=t>>>8^a[255&(t^e[r++])];return-1^t},e.str=function(e){for(var t,r,n=-1,o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))<128?n=n>>>8^a[255&(n^t)]:t<2048?n=(n=n>>>8^a[255&(n^(192|t>>6&31))])>>>8^a[255&(n^(128|63&t))]:55296<=t&&t<57344?(t=64+(1023&t),r=1023&e.charCodeAt(o++),n=(n=(n=(n=n>>>8^a[255&(n^(240|t>>8&7))])>>>8^a[255&(n^(128|t>>2&63))])>>>8^a[255&(n^(128|r>>6&15|(3&t)<<4))])>>>8^a[255&(n^(128|63&r))]):n=(n=(n=n>>>8^a[255&(n^(224|t>>12&15))])>>>8^a[255&(n^(128|t>>6&63))])>>>8^a[255&(n^(128|63&t))];return-1^n}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(t):r({})}),p=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var g="X-Server-IP",r=function(){function e(e,t){void 0===e&&(e=XMLHttpRequest),void 0===t&&(t=c.str);var y=this;this.makeXHRRequest=function(n,c,o,i,p,a,s,l,e){void 0===l&&(l=0);var u=new y.XHR;null!=e&&(u.responseType=e);var d="",f=function(e){e||(e={type:"unknown error"});var t=new Error("XHR "+e.type+" for "+n+". Status: "+u.status+", readyState: "+u.readyState),r={attempt:l,cloudfrontRequestID:u.getResponseHeader("x-amz-cf-id"),contentHash:e.contentHash,contentLength:e.contentLength,contentLengthHeader:-1!==d.indexOf("Content-Length")?u.getResponseHeader("Content-Length"):null,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null};0<i?(a(t,r),y.makeXHRRequest(n,c,o,--i,p,a,s,l+1)):s(t,r)},h=y.now(),v=h;u.addEventListener("readystatechange",function(){2===u.readyState&&(v=y.now())}),u.addEventListener("load",function(){if(d=u.getAllResponseHeaders(),200===u.status){var e=y.now();if("arraybuffer"===u.responseType)return void p(u.response,{cached:!1,latencyMs:v-h,downloadMs:e-v,verifyMs:null,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null});var t=u.responseText,r=!0,n=null,o="(not checked)";if(c){var i=y.now();r=(o=""+y.toCRC32(t))===c,n=y.now()-i}if(r)p(t,{cached:!1,latencyMs:v-h,downloadMs:e-v,verifyMs:n,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null});else{var a=t?t.length:0,s=0<a?"["+t.substr(0,15)+"]":"(empty)";f({type:"verify failed "+s,contentLength:a,contentHash:o})}}else f({type:"bad response"})}),u.addEventListener("error",f),u.addEventListener("timeout",f);var t=0===l?"":"?t="+y.now();u.open("GET",n+t),u.timeout=o,u.send()},this.XHR=e,this.toCRC32=t}return e.prototype.isSupported=function(){return"withCredentials"in new this.XHR},e.prototype.get=function(e,t,r,n,o,i,a,s){this.makeXHRRequest(e,a,t,r,n,o,i,0,s)},e.prototype.now=function(){return(new Date).getTime()},e}();t.SimpleURLAcquirer=r});e(p);p.SimpleURLAcquirer;var l=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){void 0===e&&(e=new o.JavaScriptLoader),void 0===t&&(t=new p.SimpleURLAcquirer),void 0===r&&(r=new a.IndexedDBStorage("ScriptStore"));var i=this;this.SCRIPT_TYPES_XHR_REQUIRED=[s.ScriptType.JSON],this.XHR_TIMEOUT_MS=12e4,this.XHR_RETRIES=2,this.loadJsonFromString=function(t,e,r){try{var n=(new Date).getTime();r.payload=JSON.parse(e),r.parseMs=(new Date).getTime()-n,r.totalMs=i.calculateTotalLoadMs(r),t.onLoad(r)}catch(e){i.onError(t,e)}},this.loadJavaScriptFromString=function(t,e,r){try{var n=new Blob([e],{type:"application/javascript"}),o={url:i.createObjectURL(n),name:t.scriptInfo.name,type:t.scriptInfo.type,version:t.scriptInfo.version};i.javaScriptLoader.get(o,function(e){r.parseMs=e.downloadMs,r.totalMs=i.calculateTotalLoadMs(r),t.onLoad(r)},t.onNonFatal,function(e){return i.onError(t,e)})}catch(e){i.onError(t,e)}},this.loadJavaScriptFromOrigin=function(e){i.javaScriptLoader.get(e.scriptInfo,e.onLoad,e.onNonFatal,e.onFatal,!0)},this.loadJsonFromOrigin=function(r){i.urlAcquirer.get(r.scriptInfo.url,i.XHR_TIMEOUT_MS,i.XHR_RETRIES,function(e,t){i.loadFromString(r,e,t)},function(e){r.onNonFatal(e)},function(e){r.onFatal(e)},r.scriptInfo.crc32)},this.javaScriptLoader=e,this.urlAcquirer=t,this.offlineStorage=r,this.loadFromStringFunctions={},this.loadFromStringFunctions[s.ScriptType.JavaScript]=this.loadJavaScriptFromString,this.loadFromStringFunctions[s.ScriptType.JSON]=this.loadJsonFromString,this.loadFromOriginFunctions={},this.loadFromOriginFunctions[s.ScriptType.JavaScript]=this.loadJavaScriptFromOrigin,this.loadFromOriginFunctions[s.ScriptType.JSON]=this.loadJsonFromOrigin,!this.isDefined(n)&&this.isDefined(window.URL)?this.createObjectURL=URL.createObjectURL:this.createObjectURL=n}return e.prototype.getContent=function(e,t){var r=this.requiresUrlAcquirer(e.scriptInfo.type);r&&!this.urlAcquirer.isSupported()?e.onFatal(new Error("URLAcquirer not supported but "+s.ScriptType[e.scriptInfo.type]+" requires it.")):!r&&this.onlySupportsOrigin()?this.loadFromOrigin(e):this.offlineStorage.get(e.scriptInfo.name,t)},e.prototype.loadFromString=function(e,t,r){var n=this.loadFromStringFunctions[e.scriptInfo.type];this.isDefined(n)?n(e,t,r):e.onFatal(new Error("No loadFromString function found for "+s.ScriptType[e.scriptInfo.type]))},e.prototype.loadFromOrigin=function(e){var t=this.loadFromOriginFunctions[e.scriptInfo.type];this.isDefined(t)?t(e):e.onFatal(new Error("No loadFromOrigin function found for "+s.ScriptType[e.scriptInfo.type]))},e.prototype.acquireNewAsset=function(r,n,o){var i=this;void 0===o&&(o=!0),this.urlAcquirer.get(r.scriptInfo.url,this.XHR_TIMEOUT_MS,this.XHR_RETRIES,function(e,t){o&&i.offlineStorage.set(r.scriptInfo.name,{version:r.scriptInfo.version,data:e}),n&&i.loadFromString(r,e,t)},function(e,t){r.onNonFatal(e,t)},function(e,t){n&&i.onError(r,e,t)},r.scriptInfo.crc32)},e.prototype.onError=function(e,t,r){e.onNonFatal(t,r),this.loadFromOrigin(e)},e.prototype.requiresUrlAcquirer=function(e){return-1!==this.SCRIPT_TYPES_XHR_REQUIRED.indexOf(e)},e.prototype.onlySupportsOrigin=function(){return!(this.isDefined(window.Blob)&&this.urlAcquirer.isSupported())},e.prototype.isDefined=function(e){return void 0!==e},e.prototype.nonNumberToZero=function(e){return"number"==typeof e?e:0},e.prototype.calculateTotalLoadMs=function(e){return this.nonNumberToZero(e.cacheLoadMs)+this.nonNumberToZero(e.latencyMs)+this.nonNumberToZero(e.downloadMs)+this.nonNumberToZero(e.verifyMs)+this.nonNumberToZero(e.parseMs)},e}();t.BaseCachingScriptLoader=r});e(l);l.BaseCachingScriptLoader;var u=t(function(e,t){var n,r=i&&i.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(o){function e(e,t,r,n){return o.call(this,e,t,r,n)||this}return r(e,o),e.prototype.get=function(r,e,t,n){var o=this,i={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};this.getContent(i,function(e,t){e?(o.loadFromString(i,e.data,{cached:!0,cacheLoadMs:t}),e.version!==r.version&&o.acquireNewAsset(i,!1)):o.acquireNewAsset(i,!0)})},e}(l.BaseCachingScriptLoader);t.LazyCachingScriptLoader=o});e(u);u.LazyCachingScriptLoader;var d=t(function(e,t){var n,r=i&&i.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(o){function e(e,t,r,n){return o.call(this,e,t,r,n)||this}return r(e,o),e.prototype.get=function(r,e,t,n,o){var i=this;void 0===o&&(o=!0);var a={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};o?this.getContent(a,function(e,t){e&&e.version===r.version?i.loadFromString(a,e.data,{cached:!0,cacheLoadMs:t}):i.acquireNewAsset(a,!0)}):this.onlySupportsOrigin()?this.loadFromOrigin(a):this.acquireNewAsset(a,!0,!1)},e}(l.BaseCachingScriptLoader);t.TransparentCachingScriptLoader=o});e(d);d.TransparentCachingScriptLoader;var f=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JavaScriptLoader=o.JavaScriptLoader,t.LazyCachingScriptLoader=u.LazyCachingScriptLoader,t.ScriptType=s.ScriptType,t.SimpleURLAcquirer=p.SimpleURLAcquirer,t.TransparentCachingScriptLoader=d.TransparentCachingScriptLoader});e(f);var h,v;f.JavaScriptLoader,f.LazyCachingScriptLoader,f.ScriptType,f.SimpleURLAcquirer,f.TransparentCachingScriptLoader;(v=h||(h={}))[v.volume=0]="volume";var y=h,g=function(){function e(e){this.REGION_LIST=[{tld:"amazon.com",fls:"na",marketplace:"us",marketplaceId:"ATVPDKIKX0DER"},{tld:"amazon.de",fls:"eu",marketplace:"de",marketplaceId:"A1PA6795UKMFR9"},{tld:"amazon.co.uk",fls:"eu",marketplace:"uk",marketplaceId:"A1F83G8C2ARO7P"},{tld:"amazon.co.jp",fls:"fe",marketplace:"jp",marketplaceId:"A1VC38T7YXB528"}],this.region=this.REGION_LIST[0];for(var t=0,r=this.REGION_LIST;t<r.length;t++){var n=r[t];if(-1<(e||location.hostname).indexOf(n.tld)){this.region=n;break}}}return e.prototype.reportAppLoad=function(e){this.report("AppLoadTime",e+":u=ms")},e.prototype.reportAppLoadError=function(){this.report("AppLoadError","1")},e.prototype.reportAppLoadCacheHit=function(){this.report("AppLoadCacheHit","1")},e.prototype.reportAppLoadCacheMiss=function(){this.report("AppLoadCacheMiss","1")},e.prototype.report=function(e,t){(new Image).src="https://fls-"+this.region.fls+".amazon.com/1/action-impressions/1/OP/aiv-web-player/action/HTML5Player:."+e+"@v="+t+"?marketplace="+this.region.marketplace+"&marketplaceId="+this.region.marketplaceId+"&requestId=1&service=AIVWebPlayer&session="+(""+Math.random()).substr(2)},e}(),m={assetsRoot:"https://js-assets.aiv-cdn.net/playback/web_player",dependencies:{ATVWebPlayer:{name:"ATVWebPlayer",version:"1.0.201488.0",crc32:"336946780",forceUpdate:!1},ATVWebCascadesPlayer:{name:"ATVWebCascadesPlayer",version:"1.2.201337.0",crc32:"-970435416",forceUpdate:!0},DVWebGlobalPlayer:{name:"DVWebGlobalPlayer",version:"1.0.253.0",crc32:!1,forceUpdate:!1},ATVWebDiagnosticsRenderer:{name:"ATVWebDiagnosticsRenderer",version:"1.0.200442.0",crc32:!1,forceUpdate:!1}}},b=f.JavaScriptLoader,L=f.ScriptType,S=function(){function e(t,e,r,n){void 0===t&&(t=m),void 0===e&&(e=new b),void 0===r&&(r=new g),void 0===n&&(n=location.search);var o=this;if(this.Features=y,this.onList=[],this.onceList=[],this.getFeatureList=[],n)for(var i=n.substr(1).split("&"),a=0;a<i.length;a++){var s=i[a].split("=");if(2===s.length){var c=s[0];if(t.dependencies[c]){var p=decodeURIComponent(s[1]).split(";");if(2!==p.length)throw new Error("crc-32 not supplied for "+c);t.dependencies[c].version=p[0],t.dependencies[c].crc32=p[1]}}}var l=t.dependencies.ATVWebPlayer,u={crc32:l.crc32,url:t.assetsRoot+"/"+l.name+"/"+l.version+"/js/"+l.name+".js",name:l.name,type:L.JavaScript,version:l.version};e.get(u,function(e){e.cached?r.reportAppLoadCacheHit():r.reportAppLoadCacheMiss(),o.webPlayer=new window.ATVWebPlayer(t),o.tryWebPlayer(),r.reportAppLoad(e.totalMs)},function(e){},function(e){if(window.ueLogError)try{window.ueLogError(e,{attribution:"web_player_loader"})}catch(e){}r.reportAppLoadError()})}return e.prototype.initialize=function(e){this.tryConfig(e)},e.prototype.prepare=function(e,t){this.tryConfig(e,t)},e.prototype.play=function(e,t,r){this.tryConfig(e,t,r)},e.prototype.on=function(e,t){this.webPlayer?this.webPlayer.on(e,t):this.appendListener(this.onList,e,t)},e.prototype.once=function(e,t){this.webPlayer?this.webPlayer.once(e,t):this.appendListener(this.onceList,e,t)},e.prototype.off=function(e,t){this.webPlayer?this.webPlayer.off(e,t):(this.removeListener(this.onList,e,t),this.removeListener(this.onceList,e,t))},e.prototype.getFeature=function(e,t,r){this.webPlayer?this.webPlayer.getFeature(e,t,r):this.getFeatureList.push({feature:e,onAvailable:t,onError:r})},e.prototype.appendListener=function(e,t,r){e.push({event:t,callback:r})},e.prototype.removeListener=function(e,t,r){for(var n=0;n<e.length;n++)e[n].event===t&&e[n].callback===r&&(e[n]=null)},e.prototype.tryConfig=function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this.playerConfig=e,this.contentConfig=t,this.playbackConfig=r,this.tryWebPlayer()},e.prototype.attachEvents=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];n&&t(n.event,n.callback)}},e.prototype.attachGetFeatures=function(){for(var e=0,t=this.getFeatureList;e<t.length;e++){var r=t[e];this.webPlayer.getFeature(r.feature,r.onAvailable,r.onError)}this.getFeatureList=[]},e.prototype.tryWebPlayer=function(){this.webPlayer&&(this.attachEvents(this.onList,this.webPlayer.on),this.attachEvents(this.onceList,this.webPlayer.once),this.attachGetFeatures(),this.onList=[],this.onceList=[],this.playbackConfig?this.webPlayer.play(this.playerConfig,this.contentConfig,this.playbackConfig):this.contentConfig?this.webPlayer.prepare(this.playerConfig,this.contentConfig):this.playerConfig&&this.webPlayer.initialize(this.playerConfig))},e}();return window.WebPlayer=S}();