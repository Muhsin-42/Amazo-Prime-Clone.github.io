(()=>{var e,t,a,s,i,n={"./node_modules/@amzn/dvui/dist/Icons/Edit.js":function(e,t,a){var s;a("./node_modules/@amzn/dvui/dist/Icons/Edit.css"),"undefined"!=typeof self&&self,s=function(e){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Edit.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)&&s.length){var r=i.apply(null,s);r&&e.push(r)}else if("object"===n)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class s{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.csm_check_count<600&&this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&(this.csm_check_count>=600&&!1===this.csm_is_loaded&&(this.queue=[]),window.clearInterval(e))}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=s,t.ActiveTracker=new s},"./src/components/Icons/Edit.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Edit=void 0;const s=a("react"),i=a("./node_modules/classnames/index.js"),n=a("./src/common/Tracker.ts"),r=a("./src/components/Icons/Icons.module.scss");class o extends s.Component{constructor(e){super(e),this.displayName="IconEdit",this.tracker=n.ActiveTracker.add()}componentDidMount(){n.ActiveTracker.componentMount("Icon:Edit",this.tracker)}render(){return s.createElement("svg",{className:i(r.icon,r.Edit),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},s.createElement("title",null,this.props.title||"Edit"),s.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("title",null,this.props.title||"Edit"),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"2"},s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.87 3L3 17v4h4L22 7.09z"}),s.createElement("path",{d:"M15 7l3 3"}))),"")}}t.Edit=o,t.default=o},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},react:function(t,a){t.exports=e}})},e.exports=s(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Help.js":function(e,t,a){var s;a("./node_modules/@amzn/dvui/dist/Icons/Help.css"),"undefined"!=typeof self&&self,s=function(e){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Help.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)&&s.length){var r=i.apply(null,s);r&&e.push(r)}else if("object"===n)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class s{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.csm_check_count<600&&this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&(this.csm_check_count>=600&&!1===this.csm_is_loaded&&(this.queue=[]),window.clearInterval(e))}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=s,t.ActiveTracker=new s},"./src/components/Icons/Help.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Help=void 0;const s=a("react"),i=a("./node_modules/classnames/index.js"),n=a("./src/common/Tracker.ts"),r=a("./src/components/Icons/Icons.module.scss");class o extends s.Component{constructor(e){super(e),this.displayName="IconHelp",this.tracker=n.ActiveTracker.add()}componentDidMount(){n.ActiveTracker.componentMount("Icon:Help",this.tracker)}render(){return s.createElement("svg",{className:i(r.icon,r.Help),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},s.createElement("title",null,this.props.title||"Help"),s.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("title",null,this.props.title||"Help"),s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M11 18v-2h2v2h-2zm1-12c3.401 0 4 1.757 4 2.925 0 1.47-.627 1.88-1.4 2.38-.774.485-1.438 1.061-1.6 1.954l-.072.741H11v-.846c.108-1.32.681-1.716 1.4-2.186.703-.469 1.6-1.013 1.6-1.83 0-.925-1.046-1.454-2-1.454-1.296 0-1.982 1.03-2 2.105H8C8.054 7.623 9.372 6 12 6z",fill:"currentColor"}),s.createElement("circle",{stroke:"currentColor",strokeWidth:"2",cx:"12",cy:"12",r:"9"}))),"")}}t.Help=o,t.default=o},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},react:function(t,a){t.exports=e}})},e.exports=s(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Lightbulb.js":function(e,t,a){var s;a("./node_modules/@amzn/dvui/dist/Icons/Lightbulb.css"),"undefined"!=typeof self&&self,s=function(e){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Lightbulb.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)&&s.length){var r=i.apply(null,s);r&&e.push(r)}else if("object"===n)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class s{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.csm_check_count<600&&this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&(this.csm_check_count>=600&&!1===this.csm_is_loaded&&(this.queue=[]),window.clearInterval(e))}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=s,t.ActiveTracker=new s},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/Lightbulb.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lightbulb=void 0;const s=a("react"),i=a("./node_modules/classnames/index.js"),n=a("./src/common/Tracker.ts"),r=a("./src/components/Icons/Icons.module.scss");class o extends s.Component{constructor(e){super(e),this.displayName="IconLightbulb",this.tracker=n.ActiveTracker.add()}componentDidMount(){n.ActiveTracker.componentMount("Icon:Lightbulb",this.tracker)}render(){return s.createElement("svg",{className:i(r.icon,r.Lightbulb),viewBox:"0 0 24 27",height:"27",width:"24",role:"img",style:{height:this.props.height||"27",width:this.props.width||"24"},"aria-hidden":"true"},s.createElement("title",null,this.props.title||"Lightbulb"),s.createElement("svg",{width:"24",height:"27",xmlns:"http://www.w3.org/2000/svg"},s.createElement("title",null,this.props.title||"Lightbulb"),s.createElement("g",{strokeWidth:"2",fill:"none",fillRule:"evenodd"},s.createElement("g",{stroke:"currentColor"},s.createElement("path",{d:"M12 6c1.71 0 6 .9 6 6.3 0 5.4-3.43 8.18-3.43 8.18v3.62l-.86.9H12m0-19c-1.71 0-6 .9-6 6.3 0 5.4 3.43 8.18 3.43 8.18v3.62l.86.9H12",strokeLinecap:"round"}),s.createElement("path",{d:"M7 18h9M9 21h6"})),s.createElement("g",{strokeLinecap:"round"},s.createElement("path",{stroke:"currentColor",d:"M2 12h1M21 12h1"})),s.createElement("g",{stroke:"currentColor",strokeLinecap:"round"},s.createElement("path",{d:"M3 5l.63.64M20.37 18.37L21 19"})),s.createElement("g",{stroke:"currentColor",strokeLinecap:"round"},s.createElement("path",{d:"M3 19l.63-.63M20.37 5.64L21 5"})))),"")}}t.Lightbulb=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=s(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Share.js":function(e,t,a){var s;a("./node_modules/@amzn/dvui/dist/Icons/Share.css"),"undefined"!=typeof self&&self,s=function(e){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Share.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)&&s.length){var r=i.apply(null,s);r&&e.push(r)}else if("object"===n)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class s{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.csm_check_count<600&&this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&(this.csm_check_count>=600&&!1===this.csm_is_loaded&&(this.queue=[]),window.clearInterval(e))}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=s,t.ActiveTracker=new s},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/Share.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Share=void 0;const s=a("react"),i=a("./node_modules/classnames/index.js"),n=a("./src/common/Tracker.ts"),r=a("./src/components/Icons/Icons.module.scss");class o extends s.Component{constructor(e){super(e),this.displayName="IconShare",this.tracker=n.ActiveTracker.add()}componentDidMount(){n.ActiveTracker.componentMount("Icon:Share",this.tracker)}render(){return s.createElement("svg",{className:i(r.icon,r.Share),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},s.createElement("title",null,this.props.title||"Share"),s.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("title",null,this.props.title||"Share"),s.createElement("path",{d:"M6 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm12-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm0 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-3-4l-7-3m7-7l-7 3",stroke:"currentColor",strokeWidth:"2",fill:"none"})),"")}}t.Share=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=s(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/StarRating.js":function(e,t,a){var s;a("./node_modules/@amzn/dvui/dist/StarRating.css"),"undefined"!=typeof self&&self,s=function(e){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/StarRating/StarRating.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)&&s.length){var r=i.apply(null,s);r&&e.push(r)}else if("object"===n)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class s{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.csm_check_count<600&&this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&(this.csm_check_count>=600&&!1===this.csm_is_loaded&&(this.queue=[]),window.clearInterval(e))}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=s,t.ActiveTracker=new s},"./src/common/baseProps.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseProps=void 0,t.baseProps=function(e){const t={};return e.testID&&(t["data-automation-id"]=e.testID,t["data-testid"]=e.testID),t}},"./src/components/StarRating/StarRating.module.scss":function(e,t,a){e.exports={rating:"_2P6ICV",fullStar:"_1UiYYY",halfStar:"_29ls17",emptyStar:"_2tKs5V"}},"./src/components/StarRating/StarRating.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarRating=t.sanitiseNumber=t.MIN_STARS=t.MAX_STARS=void 0;const s=a("react"),i=a("./node_modules/classnames/index.js"),n=a("./src/common/baseProps.ts"),r=a("./src/common/Tracker.ts"),o=a("./src/components/StarRating/StarRating.module.scss");t.MAX_STARS=5,t.MIN_STARS=.5,t.sanitiseNumber=e=>e>t.MAX_STARS?t.MAX_STARS:e<t.MIN_STARS?t.MIN_STARS:Math.round(2*e)/2;const l=()=>s.createElement("div",{className:i(o.fullStar)}),c=()=>s.createElement("div",{className:i(o.halfStar)}),d=()=>s.createElement("div",{className:i(o.emptyStar)});class u extends s.Component{constructor(e){super(e),this.displayName="StarRating",this.tracker=r.ActiveTracker.add()}componentDidMount(){r.ActiveTracker.componentMount(this.displayName,this.tracker)}render(){const{rating:e,className:a,link:r}=this.props,u=t.sanitiseNumber(e),m=u!==Math.round(u),p=Math.floor(u),g=t.MAX_STARS-p-(m?1:0),_=r?"a":"div";return s.createElement(_,Object.assign({},n.baseProps(this.props),{className:i(a,o.rating),href:r}),[...Array(p)].map(((e,t)=>s.createElement(l,{key:t}))),m&&s.createElement(c,null),[...Array(g)].map(((e,t)=>s.createElement(d,{key:t}))))}}t.StarRating=u},react:function(t,a){t.exports=e}})},e.exports=s(a("./node_modules/react/index.js"))},"./src/entrypoints/hydration/detail-default.tsx":(e,t,a)=>{"use strict";var s=a("./src/util/hydration/hydrateWidgets.tsx"),i=a("./src/util/csm/csm.tsx"),n=a("./node_modules/react/index.js"),r=a("./src/util/wrappers/ArgsContext.tsx"),o=a("./src/util/wrappers/LoggersContext.tsx"),l=a("./node_modules/react-redux/es/index.js");const c="_3I-nQy",d="_2C9xWo",u="VuF--y",m="_1GS1_C",p="_2caVCa",g="_1HxZWz";var _=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),h=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),b=a("./node_modules/classnames/index.js"),v=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),D=a("./src/shared/imageUtils/imageUtils.ts");function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},E.apply(this,arguments)}const f=({title:e,asin:t,cGti:a,isRetail:s,makeUrl:i,showLinkToDP:r=!1,titleLogo:o,providerLogo:l})=>{const d=y(l,o,e)||e&&n.createElement("h1",{className:b(h.Z.fullWidth,c),"data-automation-id":"title"},e);if(d){if(r){const e=s&&t||a,r=i&&e&&i((0,_.K1)(e),{refTag:"atv_hover_title"});return n.createElement("a",{href:r,className:h.Z.enablePointerEvents},d)}return d}return null},y=(e,t,a)=>{const s={alt:a,src:t,baseValue:600,srcSizes:[{"max-phablet":300},{"min-phablet":600}],format:D.GH.png};return t&&a&&n.createElement(n.Fragment,null,w(e),n.createElement("h1",{className:b(h.Z.fullWidth,d),"data-testid":"title-art"},n.createElement("div",{className:u},n.createElement(v.t,E({className:m},s)))))},w=e=>{const t={alt:"",src:e,baseValue:300,srcSizes:[{"max-phablet":200},{"min-phablet":300}],format:D.GH.png};return e?n.createElement("div",{className:b(h.Z.fullWidth,p)},n.createElement(v.t,E({className:g},t))):null};var T=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),I=a("./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts"),C=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),N=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),S=a("./src/widgets/DVWebNodeDetail/selectors/shared.ts"),P=a("./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts"),x=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),k=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),R=a("./node_modules/reselect/es/index.js");var V=a("./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts"),A=a("./src/util/utils/dvstring/index.ts"),W=a("./src/widgets/DVWebNodeDetail/selectors/reviews.ts");const L=(0,T.P)([N.vD,N.T_,C.mZ.headerDetail],((e,t,a)=>{if(a){const s=a.images&&{titleLogo:a.images.titleLogo,providerLogo:a.images.providerLogo};return{title:a.parentTitle||a.title,asin:a.asin,cGti:a.compactGti,makeUrl:e,isRetail:t,...s}}})),O=((0,T.P)([C.mZ.headerDetail],(e=>{var t,a;if(e)return{title:e.parentTitle||e.title,titleLogo:null===(t=e.images)||void 0===t?void 0:t.titleLogo,providerLogoUrl:null===(a=e.images)||void 0===a?void 0:a.providerLogo}})),(0,T.P)([S.be,C.mZ.headerDetail],((e,t)=>{if(t)return{...t,isTV:e}}))),B=(0,T.P)(I.A2,(e=>{const t=e&&(e.heroshot||e.fullBackground16x9);return Boolean(t)})),M=(0,T.P)(C.mZ.headerDetail,(e=>e&&{synopsis:e.synopsis}||void 0)),U=(0,T.P)(I.X0,(e=>e&&{text:e.text,isLive:e.isLive}||void 0)),j=(0,R.wN)((F=3,e=>{let t=null,a=null;return(...s)=>((null===t||s.some(((e,a)=>a<F&&e!==t[a])))&&(a=e(...s)),t=s,a)}))([C.bS.pageTitleId,C.mZ.seasons,N.T_,C.bS.detail,C.bS.self],((e,t,a,s,i)=>({seasons:t?t.map((e=>({titleId:e.seasonId,seasonLink:e.seasonLink,detail:s[e.seasonId],self:i[e.seasonId]}))):void 0,pageTitleId:e,isRetail:a})));var F;const H=(0,T.P)([S.Ng,C.mZ.headerDetail,P.DG],((e,t,a)=>{const s=Boolean(t&&t.title),i=Boolean(a);return e?s||i:s})),z=(0,T.P)([S.Ng,C.mZ.headerDetail,P.DG],((e,t,a)=>{const s=!Boolean(t&&t.title),i=Boolean(a);return e&&s&&i})),$=(0,T.P)([x.Hu,x.Tr,N.T_,W.M,C.bS.bottomBar,k.MZ],((e,t,a,s,i,n)=>i&&{isMobile:e,isPurchaseRestricted:t,isRetail:a,showReviews:s,bottomBar:i,watchPartyAction:n}||void 0)),q=(0,T.P)([x.Hu,V.yl],((e,t)=>t&&{isMobile:e,chartPosition:t}||void 0));(0,T.P)([k.lO],(e=>{const t=null==e?void 0:e.find((e=>"CRITICAL"===e.severity)),a=null==t?void 0:t.message.string.replace(/{lineBreak}/g," | ");return a&&{message:(0,A.bE)(a)}}));var G=a("./node_modules/@amzn/dvui/dist/Container.js"),Z=a("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx"),Q=a("./node_modules/@amzn/dvui/dist/DropList.js"),Y=a("./node_modules/@amzn/dvui/dist/Icon.js"),X=a("./node_modules/@amzn/dvui/dist/Badge.js");const K="dw87r6",J="_2yk-LG",ee="DdeNtL",te="_3w9pRe";var ae=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),se=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),ie=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const ne=({asins:e,gti:t,compactGTI:a,pageTitleId:s})=>Boolean(e.includes(s)||s===t||s===a),re=(e,t)=>(0,ie.JQ)(t&&e.detail&&e.detail.isPrime),oe=(e,t,a)=>e.reduce(((e,s)=>{if(!(s&&s.self&&s.self.link))return e;const i=s.self,{asins:r,gti:o,compactGTI:l,sequenceNumber:c}=i;return e.push({text:n.createElement(ae.H1,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:void 0!==c?c.toString():""}}),href:s.seasonLink,isHighlighted:ne({asins:r,gti:o,compactGTI:l,pageTitleId:t}),children:re(s,a)?n.createElement(Y.Icon,{className:ee,use:Y.IconType.LOGO_PRIME}):null}),e}),[]),le=({season:e})=>{const t=e.self&&e.self.sequenceNumber&&e.self.sequenceNumber.toString()||"";return n.createElement(X.Badge,{use:X.badges.TEXT,className:K},n.createElement(ae.H1,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:t}}))},ce=({seasons:e,pageTitleId:t="",isRetail:a=!1})=>!e||0===e.length||e[0]&&e[0].detail&&e[0].detail.entityType&&(0,se.Z4)(e[0].detail.entityType)?null:1===e.length&&e[0]&&e[0].self&&(0,ie.JQ)(e[0].self.isLaunched)?n.createElement(le,{season:e[0]}):n.createElement("div",{className:b("dv-node-dp-seasons",J,h.Z.enablePointerEvents,te)},n.createElement(Q.DropList,{links:oe(e,t,a),customDropListID:"av-atf-season-selector"}));var de=a("./node_modules/@amzn/dvui/dist/Spacer.js");const ue="_1Yhs0c";var me=a("./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx"),pe=a("./src/widgets/DVWebNodeDetail/components/badges/rating.tsx"),ge=a("./src/widgets/DVWebNodeDetail/components/badges/amazonRating.tsx"),_e=a("./node_modules/@amzn/dvui/dist/Icons/LogoImdbOutline.js"),he=a.n(_e),be=a("./src/widgets/DVWebNodeDetail/utils/numberUtils.ts");const ve="FDDgZI";var De=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const Ee=({imdb:e})=>{const{getString:t}=n.useContext(De.h);return e&&e.score&&n.createElement("span",{className:ve},n.createElement(he(),null),n.createElement("span",{role:"text","data-automation-id":"imdb-rating-badge","aria-label":t("DV_DP_ARIA_imdb_rating",{ratingValue:(0,be.d)(e.score,10).toString()})},e.scoreFormatted))||null};var fe=a("./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.tsx");const ye=({releaseYear:e})=>{const{getString:t}=n.useContext(De.h);return e&&n.createElement(X.Badge,{use:X.badges.TEXT},n.createElement("span",{role:"text","aria-label":t("DV_DP_ARIA_release_year",{releaseYear:String(e)}),"data-automation-id":"release-year-badge"},e))||null},we=({location:e})=>{const{getString:t}=n.useContext(De.h);return e&&n.createElement(X.Badge,{use:X.badges.TEXT},n.createElement("span",{"data-automation-id":"location-badge","aria-label":t("DV_DP_ARIA_located",{location:e}),role:"text"},e))||null},Te=({isXRay:e})=>(0,ie.JQ)(e)&&n.createElement(X.Badge,{use:X.badges.BORDERED_TEXT},n.createElement("span",{"data-automation-id":"x-ray-badge"},"X-Ray"))||null,Ie=({dateTimeBadge:e})=>{const{getString:t}=n.useContext(De.h);return e&&n.createElement(X.Badge,{use:X.badges.TEXT},n.createElement("span",{"data-automation-id":"date-time-badge","aria-label":t("DV_DP_ARIA_scheduled",{dateTime:e}),role:"text"},e))||null},Ce=({isHdr:e})=>(0,ie.JQ)(e)&&n.createElement(X.Badge,{use:X.badges.BORDERED_TEXT},n.createElement("span",{"data-automation-id":"hdr-badge"},"HDR"))||null,Ne=({isUhd:e})=>(0,ie.JQ)(e)&&n.createElement(X.Badge,{use:X.badges.BORDERED_TEXT},n.createElement("span",{"data-automation-id":"uhd-badge"},"UHD"))||null;var Se=a("./src/widgets/DVWebNodeDetail/components/badges/ad.tsx");const Pe=(0,T.P)([N.T_,C.bS.pageTitleId,x.Io,x.xu,x.nV,x.hu,C.mZ.comingSoon,C.mZ.headerDetail],((e,t,a,s,i,n,r,o)=>o&&t&&{amazonRating:o.amazonRating,isRetail:e,pageTitleId:t,isCerberusChild:a,reviewsNotAllowed:r,isFirestormReviewsEnabled:s,isReviewsSubmissionEnabled:i,checkReviewEligibility:n}||void 0)),xe=(0,T.P)(C.mZ.headerDetail,(e=>e&&{subtitles:e.subtitles,isClosedCaption:e.isClosedCaption}||void 0)),ke=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.releaseYear&&{releaseYear:e.releaseYear}||void 0)),Re=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.runtime&&{runtime:e.runtime}||void 0)),Ve=(0,T.P)([C.mZ.headerDetail,C.mZ.metadata],((e,t)=>t&&t.maturityRating&&{ratingBadge:t.maturityRating}||e&&e.ratingBadge&&{ratingBadge:e.ratingBadge}||void 0)),Ae=(0,T.P)([C.mZ.headerDetail],(e=>e&&e.pageDateTimeBadge&&{dateTimeBadge:e.pageDateTimeBadge}||void 0)),We=(0,T.P)(C.mZ.imdb,(e=>e&&{imdb:e}||void 0)),Le=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.location&&{location:e.location}||void 0)),Oe=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.isXRay&&{isXRay:e.isXRay}||void 0)),Be=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.isHdr&&{isHdr:e.isHdr}||void 0)),Me=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.isUhd&&{isUhd:e.isUhd}||void 0)),Ue=(0,T.P)(C.mZ.headerDetail,(e=>e&&e.isAd&&{isAd:e.isAd}||void 0));function je(){return je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},je.apply(this,arguments)}const Fe=(0,l.$j)((e=>({amazonRating:Pe(e),imdb:We(e),ratingBadge:Ve(e),dateTimeBadge:Ae(e),releaseYear:ke(e),runtime:Re(e),subtitles:xe(e),location:Le(e),xRay:Oe(e),hdr:Be(e),uhd:Me(e),ad:Ue(e)})))((({amazonRating:e,imdb:t,ratingBadge:a,dateTimeBadge:s,releaseYear:i,runtime:r,subtitles:o,location:l,xRay:c,hdr:d,uhd:u,ad:m})=>{var p;const{getString:g}=n.useContext(De.h);return n.createElement(de.Spacer,{className:`dv-node-dp-badges ${ue} ${h.Z.enablePointerEvents}`,space:de.spacerSpacing.s,alignItems:de.spacerAlignItems.center},e&&n.createElement(ge.gC,e),n.createElement(Ie,s),n.createElement(we,l),n.createElement(Ee,t),n.createElement(me.r,je({},r,{ariaLabel:(null==r?void 0:r.runtime)&&g("DV_DP_ARIA_runtime",{runtime:r.runtime})})),n.createElement(ye,i),n.createElement(Te,c),n.createElement(Ce,d),n.createElement(Ne,u),n.createElement(Se.Ad,m),n.createElement(pe.i,je({},a,{notRatedString:g("DV_TW_amr_nr_text"),suitableForAriaLabel:(null==a||null===(p=a.ratingBadge)||void 0===p?void 0:p.displayText)&&g("DV_DP_ARIA_suitable_for",{ageGroup:a.ratingBadge.displayText})})),n.createElement(fe.B,o))}));var He=a("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx"),ze=a("./src/widgets/DVWebNodeDetail/components/refund/refund.tsx"),$e=a("./node_modules/@amzn/dvui/dist/TextBlock.js");const qe="_2RTMpg";var Ge=a("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx");const Ze=({messages:e})=>e&&e.length?n.createElement(n.Fragment,null,e.map(((e,t)=>n.createElement(Ge.j,{key:`text-block-conf-text-${t}`,Tag:$e.TextBlock,className:qe,message:e})))):null;var Qe=a("./node_modules/@amzn/dvui/dist/Text.js"),Ye=a("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx"),Xe=a("./src/widgets/DVWebNodeDetail/selectors/player.ts"),Ke=a("./src/shared/player/integration/playbackArea.tsx");const Je="_1K5BOV",et="_2-dqbX",tt="_2_k77h";var at=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");const st=({playbackData:e,isMShop:t,containerRef:a,isPrimaryButton:s=!0})=>{if(!e)return null;const i={contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:Xe.KO,videoType:e.videoMaterialType,useFullView:!0},playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,signInUrl:e.signInURL,sequenceNumber:0,isBonus:!0};return n.createElement(Ke.ET.Consumer,null,(({onPlay:r})=>n.createElement("div",{className:s?h.Z.fullWidthPhablet:et},n.createElement(at._,{refTag:Xe.KO,className:"dv-dp-node-trailer"},n.createElement(Ye.eP,{onClick:e=>{r(i),e.preventDefault()},forceDoubleHeight:s,href:t?void 0:e.playbackURL,tooltipText:e&&e.text.replace("{conditionalLineBreak}",""),"aria-label":e&&e.text.replace("{conditionalLineBreak}",""),containerRef:a,isPrimaryButton:s},s&&n.createElement(Qe.Text,{tag:"span",string:e.text}))),!s&&n.createElement(Qe.Text,{tag:"span",string:e.text,className:tt}))))};var it=a("./node_modules/@amzn/dvui/dist/Button.js"),nt=a("./src/widgets/DVWebNodeDetail/utils/actionForm.tsx"),rt=a("./src/widgets/DVWebNodeDetail/actions/constants.ts"),ot=a("./src/widgets/DVWebNodeDetail/data/normalize.ts"),lt=a("./src/widgets/DVWebNodeDetail/utils/wps.ts");const ct=(0,T.P)([C.mZ.watchlist],(e=>{if(!e)return;const t=e.endpoint.query,{tag:a,titleID:s,token:i,titleType:n,returnUrl:r}=t,o={tag:a,titleID:s,token:i,titleType:n,returnUrl:r},l="season"===n,c=((e,t)=>{const a=((e,t)=>`atv_dp_wtls_${"Remove"===e?"rmv":"add"}_${t?"seas":"mov"}`)(e.tag,t);return(e.endpoint.partialURL||"").replace("atv_unknown",a)})(e,l);return{partialURL:c,query:o,isSeason:l,tag:e.tag,formatCode:e.formatCode,text:e.text,ajaxEnabled:e.ajaxEnabled,failed:Boolean(e.failed)}}));var dt=a("./node_modules/@amzn/dvui/dist/Spinner.js");const ut="_2umowe",mt="nPT-xD",pt="_1gVrns",gt="_2adLl2";function _t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ht extends n.Component{constructor(...e){super(...e),_t(this,"timer",null),_t(this,"state",{showSpinner:!1})}componentDidMount(){this.ensureTimer(this.props)}componentWillUnmount(){this.destroyTimer()}componentDidUpdate(e){e.isLoading!==this.props.isLoading&&this.ensureTimer(this.props)}ensureTimer({isLoading:e,delay:t=350}){e?this.timer||(this.timer=setTimeout((()=>{this.timer=null,this.setState({showSpinner:!0})}),t)):this.destroyTimer()}destroyTimer(){clearTimeout(this.timer),this.timer=null,this.setState({showSpinner:!1})}render(){const{spinner:e=n.createElement(bt,null),children:t}=this.props;return n.createElement(n.Fragment,null,this.state.showSpinner&&e,t&&n.createElement("span",{className:b(pt,{[gt]:this.state.showSpinner})},t))}}const bt=()=>n.createElement("div",{className:ut},n.createElement("div",{className:mt},n.createElement(dt.Spinner,{fillHeight:!0})));var vt=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx");const Dt="voFxU5",Et="y1nGLG",ft="_2rjFFc",yt="_2GxJOn",wt="_2WWNPa";var Tt=a("./src/shared/utils/events/index.ts"),It=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),Ct=a("./node_modules/@amzn/dvui/dist/Icons/Add.js"),Nt=a.n(Ct),St=a("./node_modules/@amzn/dvui/dist/Icons/WatchlistOn.js"),Pt=a.n(St),xt=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),kt=a("./src/shared/deviceProxy/PVClickstreamClient.ts"),Rt=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),Vt=a("./src/shared/utils/analytics/recordReftag.tsx"),At=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),Wt=a("./node_modules/@amzn/dvui/dist/Icons/Tick.js"),Lt=a("./node_modules/@amzn/dvui/dist/Icons/Spinner.js"),Ot=a("./src/shared/CS/components/IconButton/IconButton.tsx");function Bt(){return Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Bt.apply(this,arguments)}let Mt;!function(e){e.Add="Add",e.Remove="Remove",e.Disabled="Disabled",e.Pending="Pending"}(Mt||(Mt={}));const Ut=({state:e,...t})=>n.createElement(Ot.h,Bt({},t,{disabled:[Mt.Pending,Mt.Disabled].includes(e),icon:e===Mt.Pending?n.createElement(Lt.Spinner,null):e===Mt.Remove?n.createElement(Wt.Tick,null):n.createElement(Ct.Add,null)}));function jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ft="Remove";class Ht extends n.Component{constructor(...e){super(...e),jt(this,"state",{disabled:!1,isLoading:!1}),jt(this,"clickHandler",(e=>{var t,a;(0,Tt.q)(e),this.setState({disabled:!0,isLoading:!0});const s=this.props.watchlist.query;var i,n;s.relatedRequestId=this.props.relatedRequestId,this.props.dispatch((i=s,n=this.props.pageTitleId,(0,lt.Hh)(i,(e=>e?{type:rt.k.WatchlistToggle,input:i,output:(0,ot.OS)(n,e),payload:{pageTitleId:n}}:{type:rt.k.WatchlistToggleFailed,input:i,payload:{pageTitleId:n}}))));const r=null===(t=this.props.watchlist)||void 0===t?void 0:t.tag,o=null===(a=this.props.watchlist)||void 0===a?void 0:a.formatCode;if(r&&o){const e=r===Ft,t=(0,xt.i)("atv_dp_{format}_wtl_{action}",{action:""+(e?"rmv":"add"),format:o}),a=e?Rt.W0.RemoveFromWatchlist:Rt.W0.AddToWatchlist;(0,Vt.XQ)(t,this.context.pageType,this.context.subPageType,this.context.refTagTitleId,a,Rt.qB.PageTouch,this.props.isDCSAnalyticsCallEnabled)}e.preventDefault()}))}componentDidUpdate(e){e!==this.props&&this.setState({disabled:!1,isLoading:!1})}render(){const{dispatch:e,watchlist:t,containerRef:a,hasDefaultTheme:s}=this.props;if(!t)return null;const{partialURL:i,query:r,tag:o,ajaxEnabled:l,isSeason:c,failed:d}=t,u=o===Ft,m=u?c?"DV_DP_WL_removeTv":"DV_DP_WL_removeMovie":c?"DV_DP_WL_addTv":"DV_DP_WL_addMovie",{returnUrl:p,titleID:g,token:_,titleType:v}=r,D={returnUrl:p,tag:o,titleID:g,token:_,titleType:v},E=this.context.getString(u?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie").replace("{conditionalLineBreak}","");return n.createElement("span",{className:b(Dt,"dv-dp-node-watchlist",h.Z.enablePointerEvents)},n.createElement(nt.y,{action:i,method:"POST",hiddenInputs:D},s?n.createElement(It.Tooltip,{position:"top",size:"s",content:n.createElement(ae.H1,{stringID:u?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie",replace:{conditionalLineBreak:""}}),className:wt,id:"dv-dp-node-watchlist-tooltip",containerRef:a},n.createElement(it.Button,{disabled:this.state.disabled,className:Et,onClick:l?this.clickHandler:void 0,"data-ux-click":!0,type:"submit","data-added":u,"aria-label":E,testID:"watchlist-button"},n.createElement("span",{className:ft},n.createElement(ht,{isLoading:this.state.isLoading},u?n.createElement(Pt(),null):n.createElement(Nt(),null))))):n.createElement(Ut,{state:this.state.isLoading?Mt.Pending:u?Mt.Remove:Mt.Add,type:"submit",label:"Watchlist",ariaLabel:E,onClick:l?this.clickHandler:void 0,"data-added":u,"data-ux-click":!0,testID:"watchlist-button"})),n.createElement(vt.i,{modalId:"dvui-close-overlay-watchlist-failed",isOpen:d,modalHeader:n.createElement(ae.H1,{stringID:m}),modalContent:n.createElement(ae.H1,{stringID:"AVOD_WL_error_msg"}),modalFooter:({closeModal:e})=>n.createElement(it.Button,{className:h.Z.alwaysInline,onClick:()=>e()},n.createElement(ae.H1,{stringID:"AVOD_DP_E_error_ok"})),onClose:()=>{return e((t=this.props.pageTitleId,e=>{e({type:rt.k.ClearWatchlistToggleFailure,payload:{pageTitleId:t}})}));var t}}),n.createElement("span",{className:yt},n.createElement(ae.H1,{stringID:u?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie"})))}}jt(Ht,"contextType",De.h);const zt=(0,l.$j)((e=>({watchlist:ct(e),pageTitleId:e.pageTitleId,relatedRequestId:e.requestContext.requestID,isDCSAnalyticsCallEnabled:(0,x.h8)(e)})))((0,At.eB)(Ht));var $t=a("./node_modules/@amzn/dvui/dist/Link.js");const qt="Lbo-R4",Gt=({message:e,returnLink:t})=>e&&t?n.createElement("div",{className:b(h.Z.fullWidthPhablet,"dv-dp-node-dma",qt),"data-automation-id":"dma-button"},n.createElement($t.Link,{href:t,ariaLabel:e,text:e})):null;var Zt=a("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx");const Qt="_19ueOW",Yt="_1ndhb4",Xt=({messages:e})=>e&&e.length?n.createElement("div",{className:Qt},e.map(((e,t)=>n.createElement("div",{key:`secondary-offer-${t}`,className:Yt},n.createElement(Qe.Text,{string:e}))))):null;var Kt=a("./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx"),Jt=a("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),ea=a("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx");const ta=(0,Jt.Y)((({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:a,toggleGiftCardModal:s})=>{const i=t&&t.metadata&&t.metadata.refMarker||(0,xt.i)("atv_dp_mpo");return e&&a?n.createElement("div",{className:`${h.Z.stretchHeight} ${h.Z.fullWidthPhablet}`},n.createElement(vt.i,{size:"m",modalId:"dvui-close-overlay-atf-mwtw",modalContent:({closeModal:e})=>n.createElement(ea.C,{closeModal:e,moreWaysToWatch:t,toggleGiftCardModal:s}),toggle:({openModalClickHandler:e})=>n.createElement(at._,{refTag:i},n.createElement(it.Button,{"data-ux-click":!0,onClick:e,name:"more-purchase-options",className:h.Z.fullWidth},n.createElement(ae.H1,{stringID:"DV_MWTW_TITLE_MAIN"})))})):null}));var aa=a("./src/util/utils/titleType.ts"),sa=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),ia=a("./src/shared/SPA/SpaContext.tsx"),na=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts");const ra=(0,Jt.Y)((({playbackData:e,duration:t,isStartOver:a,downloads:s,isOfferClarityEnabled:i,isMShop:r})=>{if(!e.playbackActionData)return null;const o=e.playbackActionData,l=o.playbackID,c=e.self&&e.self.sequenceNumber,d={contentConfig:{asin:l,trailer:!1,position:o.resumeTime,ref:o.playerRefMarker,videoType:o.videoMaterialType,useFullView:!0,playbackEnvelope:(0,na.D)(o)},signInUrl:o.signInURL,playbackUrl:o.playbackURL,fallbackUrl:o.fallbackURL,sequenceNumber:c,isBonus:(0,aa.Hv)(e.self&&e.self.titleType,c),subscriptionName:o.subscriptionName,triggerLocation:"ATF",refMarker:o.refMarker},u=i&&"IMDb TV"===o.subscriptionName;return n.createElement(Ke.ET.Consumer,null,(({onPlay:e})=>{const i=Math.max((0,sa.fZ)(s,l,t),(0,sa._y)(o.progress));return n.createElement(n.Fragment,null,n.createElement("div",{className:`${h.Z.fullWidthPhablet} ${Je} dv-dp-node-playback`},n.createElement(Ye.n7,{href:r?void 0:o.playbackURL,onClick:t=>{e(d),t.preventDefault()},progress:i,forceDoubleHeight:!0,isStartOver:a,useFreeButton:u},n.createElement(Qe.Text,{tag:"span",string:o.label}))))}))})),oa=(0,ia.cG)(ra);function la(){return la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},la.apply(this,arguments)}const ca=(0,Jt.Y)((({playbackDataList:e,isRetail:t,playerConfigData:a,duration:s,isOfferClarityEnabled:i,isMShop:r})=>e.length?n.createElement(n.Fragment,null,e.map(((e,o)=>{const l={duration:s,playbackData:e,playerConfigData:a,isRetail:t,isStartOver:1===o,isOfferClarityEnabled:i,isMShop:r};return n.createElement(oa,la({key:`action-box-playback-${o}`},l))}))):null));var da=a("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),ua=a("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),ma=a("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),pa=a("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss"),ga=a("./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx");const _a=(0,l.$j)((e=>({purchase:e.purchase})))((({purchase:e})=>{const t=Boolean(e&&e.failed);return n.createElement(vt.i,{modalId:"dvui-close-overlay-purchase-failed",isOpen:t,className:pa.Z.purchaseFailedModal,modalContent:n.createElement(ae.H1,{stringID:"AVOD_DP_E_error_text"}),modalFooter:({closeModal:e})=>n.createElement(it.Button,{className:h.Z.alwaysInline,onClick:()=>{window.location.reload(!0),e()}},n.createElement(ae.H1,{stringID:"AVOD_DP_E_error_ok"}))})}));var ha=a("./src/shared/SPA/UWPNotifier/index.ts"),ba=a("./src/shared/SPA/downloadButton/DownloadButton.tsx"),va=a("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx"),Da=a("./src/shared/deeplink/index.ts"),Ea=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),fa=a("./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx");const ya=({membershipAction:e})=>{if(!e)return null;const{endpoint:t,label:a}=e;return n.createElement("div",{className:`${h.Z.fullWidthPhablet}`},n.createElement(it.PurchaseButton,{href:t,forceDoubleHeight:!0,shape:"rectangle","data-automation-id":"membership-action-link"},n.createElement(Qe.Text,{string:a})))};function wa(){return wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},wa.apply(this,arguments)}const Ta=(0,Ea.n)((0,l.$j)((e=>({pageTitleId:e.pageTitleId,playbackMessaging:(0,P.J3)(e),notificationBox:(0,P.K)(e),playbackActions:(0,P.DG)(e),downloadAction:(0,P.bS)(e),trailerAction:(0,P.QH)(e),purchaseAction:(0,P.A$)(e),disneyAction:(0,P.bn)(e),moreWaysToWatch:(0,P.Uc)(e),secondaryOfferMessage:(0,P.V0)(e),purchaseDetails:(0,ma.G)(e),isRefunding:Boolean(e.refund.refunding),isMShop:(0,x.gK)(e),requestContext:(0,N.Iz)(e),downloadLaunchType:e.pageContext.downloadLaunchType,isMovie:(0,I.NE)(e),duration:(0,P.Q$)(e),notificationActionsComingLeavingSoonMessages:(0,k.As)(e),tapsExperimentToken:C.bS.atfTapsExperimentToken(e),watchPartyAction:(0,k.MZ)(e),membershipAction:(0,k.eP)(e),showCancellationWinback:e.winback.showCancellationWinback,viewRefMarker:(0,k.SX)(e),isComingSoon:C.mZ.comingSoon(e),metaData:O(e)})))((e=>{const{clickStreamPageType:t,clickStreamSubPageType:a,refTagTitleId:s,isDCSAnalyticsCallEnabled:i}=(0,n.useContext)(De.h),{logger:r,notificationActionsComingLeavingSoonMessages:o,viewRefMarker:l,playbackMessaging:c,notificationBox:d,playbackActions:u,downloadAction:m,trailerAction:p,purchaseAction:g,disneyAction:_,moreWaysToWatch:v,secondaryOfferMessage:D,purchaseDetails:E,pageTitleId:f,duration:y,isRefunding:w,requestContext:T,downloadLaunchType:I,isMovie:C,tapsExperimentToken:N,watchPartyAction:S,membershipAction:P,showCancellationWinback:x,isMShop:k,isComingSoon:R,metaData:V,containerRef:A}=e,[W,L]=(0,n.useState)(!1);(0,n.useEffect)((()=>{o.length>0&&r.count("DVWebNode::Detail::AtfLeavingSoonMessages",1,!1),l&&(0,Vt.XQ)(l,t,a,s,void 0,void 0,i)}),[]);const O=()=>L(!W),B=Boolean(E),M=B&&E.details&&E.details.offer.purchaseData.text||"",U=B||w,j="NONE"===I||"EMBEDDED"===I?void 0:e=>{e.preventDefault(),(0,Da.b)(i)[I]({url:m.downloadURL,fallbackUrl:m.fallbackURL})},F=(T.appName,()=>m.label.replace("{lineBreak}"," ")),H={...m,status:ha.lh.IDLE,forceDoubleHeight:!0,onClick:j,downloadURL:k?void 0:m&&m.downloadURL},z=(null==V||V.playbackTracks,null==V||V.title,N&&N.pvCinemaToken),$={messagesWithLogo:[{text:z&&z.message,logo:z&&z.logoUrl}]};return n.createElement(n.Fragment,null,n.createElement("div",{className:pa.Z.actionBox},n.createElement("div",{className:b({[pa.Z.isProcessingTransaction]:U},pa.Z.wrapper)},n.createElement(ga._,{className:"dv-node-dp-action-box"},n.createElement(He.Pd,wa({},z?$:c,{tapsExperimentToken:N,showCancellationWinback:x})),n.createElement(ze.N,{titleId:f}),n.createElement(de.Spacer,{alignItems:de.spacerAlignItems.center},n.createElement(Ze,d),n.createElement(de.Spacer,{alignItems:de.spacerAlignItems.center,className:`${h.Z.fullWidthPhablet} ${h.Z.enablePointerEvents}`},n.createElement(de.Spacer,{alignItems:de.spacerAlignItems.center,className:b(h.Z.fullWidthPhablet,pa.Z.primaryActions)},u&&n.createElement(ca,wa({},u,{duration:y,isMShop:k})),R&&!u&&p&&n.createElement(st,wa({},p,{isMShop:k})),n.createElement(Kt.k,wa({},g,{tvodButtonScope:da.b2.ACTION_BOX,forceDoubleHeight:!0,tapsExperimentToken:N})),n.createElement(ya,{membershipAction:P}),v&&n.createElement(ta,wa({},v,{toggleGiftCardModal:O}))),n.createElement("span",{className:b(h.Z.fullWidthPhablet,h.Z.enablePointerEvents,pa.Z.secondaryActions)},(!R||u)&&p&&n.createElement(st,wa({},p,{isMShop:k,containerRef:A,isPrimaryButton:!1})),n.createElement(zt,{containerRef:A}),m&&n.createElement("span",{className:b(pa.Z.simplifiedBuyBoxDownload,"dv-dp-node-download")},n.createElement(ba.C$,wa({},H,{label:F(),forceDoubleHeight:!1,containerRef:A})),n.createElement("span",{className:pa.Z.buttonLabel},n.createElement(Qe.Text,{tag:"span",string:F()}))),n.createElement(fa.vY,{watchPartyAction:S,buttonOrLinkProps:{isButton:!0},withFTUETooltip:!0,containerRef:A})))),z&&n.createElement(He.Pd,c),n.createElement("div",{className:de.spacerSpacing.s},n.createElement(Zt.h,{placement:"ActionBox",toggleGiftCardModal:O}),n.createElement(Xt,D)))),U&&n.createElement(ua.UQ,{text:M}),n.createElement(_a,null),n.createElement(va.fs,{isOpen:W,onClose:O,requestContext:T.rawContext})),n.createElement(Gt,_))}))),Ia="_3CyLqv",Ca="fVWsBr",Na="_3hF9WT",Sa="_2ZnCkI",Pa="_3Lykuc",xa="_33xhZL",ka="Coi_ha",Ra="_3Mynff",Va="-TbE6N",Aa="_3MF8IH",Wa="mqdy4z";var La=a("./src/util/utils/imageUtils/imageUtils.tsx"),Oa=a("./src/widgets/DVWebNodeDetail/components/heroVideo/draperStatus.ts");function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ba.apply(this,arguments)}const Ma=(0,l.$j)((e=>({pageTitleId:C.bS.pageTitleId(e),isRetail:(0,N.T_)(e),isMShop:(0,x.gK)(e),images:(0,I.A2)(e),heroshotShouldBeShown:B(e),playbackData:(0,k.BB)(e)})))((({images:e,heroshotShouldBeShown:t,draperStatus:a})=>{const{isRTL:s}=n.useContext(De.h);if(!e)return null;if(!t){const t=e.packshot;if(!t)return null;const a={backgroundImage:`url(${new La.e(t).scaleWidth(300).setBlur(80).getImageUrl()})`};return n.createElement("div",{className:b(Ca,Ia),"data-automation-id":"hero-background",style:a},n.createElement("div",{className:Pa}),n.createElement("div",{className:xa}))}const i={alt:"",src:e.heroshot,baseValue:1080,srcSizes:[{"max-phablet":360},{"max-tablet":720},{"min-tablet":1080}],blurUp:!0,isAtfMainImage:!0},r={alt:"",src:e.fullBackground16x9,baseValue:1700,srcSizes:[{"max-phablet":500},{"max-tablet":900},{"min-tablet":1100},{"min-tablet-landscape":1700}],blurUp:!0,isAtfMainImage:!0},o=Boolean(e.fullBackground16x9&&!s);return n.createElement(n.Fragment,null,n.createElement("div",{className:b(o?Aa:Ca,ka,"av-hero-background",{[Ra]:[Oa.e.BeforePlaying,Oa.e.Playing].includes(a)}),"data-automation-id":"hero-background"},n.createElement("div",{className:o?Wa:Na},n.createElement(v.t,Ba({className:Sa,classNameContainer:Sa},o?r:i)),n.createElement("div",{className:o?Va:Pa}),n.createElement("div",{className:xa}))))})),Ua="_1-9JAt",ja="_2OjN2t",Fa="_3rs2fp",Ha="_3et9aS",za="_18hTpx",$a="_1m_axH",qa="_2hb1y6";var Ga=a("./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx"),Za=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.tsx"),Qa=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.module.scss");function Ya(){return Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ya.apply(this,arguments)}const Xa=[Za.sr.Directors,Za.sr.Starring,Za.sr.Genres,Za.sr.Subtitles,Za.sr.AudioTracks],Ka=[Za.sr.Starring,Za.sr.Genres,Za.sr.Subtitles,Za.sr.AudioTracks],Ja=(0,Ga.O3)((e=>{const t=[...(a=e.isTV,a?Ka:Xa)];var a;return n.createElement("div",{className:`${Qa.Z.atfInfo} dv-dp-node-meta-info ${h.Z.fullWidth}`},n.createElement(Za.rB,Ya({},e,{fields:t,expandedItemsCount:40,id:"meta-info"})))})),es="_3g6euW",ts="_3NQ02f",as=({showLiveError:e})=>n.createElement(is,{stringID:e?"DV_DP_unavailable_live_page_message":"DV_DP_unavailable_page_message"}),ss=()=>n.createElement(is,{stringID:"DV_DP_only_playback_available_in_gen4_message"}),is=({stringID:e})=>n.createElement("div",{className:ts},n.createElement("p",{className:b(es,h.Z.fullWidth)},n.createElement(ae.H1,{stringID:e}))),ns="_3FGYxA",rs=({text:e,isLive:t})=>t&&e?n.createElement("div",{className:`${ns} ${h.Z.fullWidth} ${h.Z.enablePointerEvents}`},n.createElement(X.Badge,{use:X.badges.LIVE}," ",e," ")):null,os="_1MtDO7",ls="_1bxwoL",cs=({imagePath:e,imageLink:t,imageAlt:a})=>e&&t?n.createElement("div",{className:os,"data-automation-id":"top-banner-promo"},n.createElement("div",{className:ls},n.createElement("a",{href:t.href,"aria-label":t.ariaLabel},n.createElement("img",{src:e,alt:a})))):null;var ds=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const us=(0,T.P)(C.mZ.creative,(e=>e&&ps(e.atfTop)&&e.atfTop.image&&{imagePath:e.atfTop.image.path,imageLink:e.atfTop.image.link,imageAlt:e.atfTop.image.alt}||void 0)),ms=(0,T.P)(C.mZ.creative,(e=>e&&gs(e.atfBottom)&&{title:e.atfBottom.title,content:e.atfBottom.content,image:e.atfBottom.image}||void 0)),ps=e=>(0,ds.P)(e,"atv.wps#BannerPromoModel"),gs=e=>(0,ds.P)(e,"atv.wps#HeroQuickPromoModel");var _s=a("./node_modules/@amzn/dvui/dist/Panel.js");const hs="_1CDdiS",bs="_1Ag_ZD",vs="_4wfq7P",Ds=({title:e,content:t,image:a})=>e||t?n.createElement("article",{"data-automation-id":"hero-quick-promo",className:hs},n.createElement(_s.Panel,{className:bs},a&&n.createElement(Es,a),n.createElement("div",null,n.createElement("header",null,n.createElement(Qe.Text,{string:e,tag:"small"})),n.createElement("p",null,n.createElement(Qe.Text,{string:t,tag:"small"}))))):null,Es=({path:e,alt:t,link:a})=>e?a?n.createElement("a",{href:a.href,"aria-label":a.ariaLabel},n.createElement(fs,{path:e,alt:t})):n.createElement(fs,{path:e,alt:t}):null,fs=({path:e,alt:t})=>n.createElement("div",{className:vs},n.createElement("img",{src:e,alt:t}));var ys=a("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx");const ws="_2oa39y",Ts=e=>{const t={header:e.header,collectionType:e.collectionType,cardTitleIds:e.titleIds,totalEpisodeSize:e.totalCardSize,refTagPrefix:"atv_dp_bundle_",index:0};return t.cardTitleIds&&t.cardTitleIds.length>0?n.createElement("div",{className:ws,"data-automation-id":"bundle-carousel"},n.createElement(ys.J,t)):null};var Is=a("./node_modules/@amzn/dvui/dist/Block.js");const Cs="isCrowBannerDismissed",Ns="true",Ss=({title:e,body:t})=>{const[a,s]=n.useState(!1);return n.useEffect((()=>{const e=localStorage.getItem(Cs)===Ns;s(!e)}),[]),a&&n.createElement(Is.MessageBlock,{heading:e.string,type:Is.MessageTypes.warning,dismissable:!0,onDismiss:()=>{localStorage.setItem(Cs,Ns)}},n.createElement(Qe.Text,{string:t}))||null},Ps=(0,T.P)([C.mZ.crowBanner],(e=>e&&{title:e.title,body:e.body}||void 0)),xs=(0,T.P)([C.mZ.restriction],(e=>e&&e.blockedPageModel&&{model:e&&e.blockedPageModel}||void 0)),ks="_39Ikm0",Rs="_3RyQYR",Vs="_2IqXB4",As="_26i0xA",Ws="_33CQ6M",Ls=({model:e})=>e?n.createElement("div",{className:ks},n.createElement("div",{className:Rs},n.createElement("p",{className:Vs},n.createElement(Qe.Text,{string:e.message})),n.createElement("p",null,n.createElement(Qe.Text,{string:e.secondaryMessage})),n.createElement("div",{className:As},e.primaryActionText&&n.createElement(it.PrimaryButton,{href:e.primaryActionLink},n.createElement(Qe.Text,{string:e.primaryActionText})),n.createElement("span",{className:Ws},n.createElement(Qe.Text,{string:e.secondaryAction}))))):null,Os="_13WDDv",Bs="_2hXhRb",Ms=({isRetail:e,children:t})=>n.createElement("div",{className:e?Bs:Os},t);var Us=a("./src/widgets/DVWebNodeDetail/actions/banner.ts"),js=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");const Fs="_29NdO6",Hs=(0,l.$j)((e=>({banner:e.banner.ui})),(e=>({clearBanner:()=>setTimeout((()=>e((0,Us.y)())),300)})))((({banner:e,clearBanner:t})=>{const{getString:a}=n.useContext(De.h);if(!e)return null;const{stringId:s,string:i,type:r,heading:o,headingStringId:l,dvStringAttrs:c,automationId:d,bodyDVString:u}=e,m=c||{},p=u||i&&(0,js.e6)(i,m),g=l?a(l):o||"",_=d||"banner";return n.createElement(Is.MessageBlock,{className:Fs,heading:g,type:r,dismissable:!0,onDismiss:t,testID:_},s&&n.createElement(ae.H1,{stringID:s,dvStringAttrs:m}),(i||u)&&n.createElement(Qe.Text,{string:p}))}));var zs=a("./src/shared/player/index.tsx");let $s=!1;const qs=(e,t=!0)=>(!$s&&t&&(0,i.o5)(),$s=!0,{type:rt.k.PlaybackStart,payload:e}),Gs=(e,t,a=!0,s=!0)=>(i,n)=>{a&&i({type:rt.k.PlaybackClosed,payload:{content:e}});const r=n(),o=(0,Xe.IR)(r);if(s&&e&&!e.trailer&&e.asin){const a=o&&o[e.asin]||e.asin;t(a)(i,n)}null!=e&&e.trailer||!(0,W.G)(r)||i({type:rt.k.ClearReviewEligibility,payload:{pageTitleId:r.pageTitleId}})};var Zs=a("./src/widgets/DVWebNodeDetail/actions/index.ts"),Qs=a("./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts"),Ys=a("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts");const Xs=(e,t,a,s)=>{const i=(0,Qs.pV)({isElcano:t,titleID:e,atfWidgets:["BuyBox"]});return(0,lt.Qk)(i,(e=>({type:rt.k.RefreshAtfActionBox,input:i,output:e,payload:{offerAsin:a,canonicalTitleId:s}})))},Ks=e=>(t,a)=>{const s=((e,t,a)=>({context:e,titleIDs:[t],fragments:["Action","Refund"],presentationScheme:(0,Ys.V)(e.domain||"Fogg"),isElcano:a}))(a().requestContext,e,Boolean(a().features.isElcano));return(0,lt.Gy)(s,(e=>({type:rt.k.RefreshEpisode,input:s,output:e})))(t,a)},Js=e=>(t,a)=>{const s=a(),{pageTitleId:i}=s,n=[Xs(s.pageTitleId,Boolean(s.features.isElcano))(t,a)];return(0,I.NE)(s)||n.push(e?Ks(e)(t,a):(e=>(t,a)=>{const s=(0,Qs.F_)({context:a().requestContext,titleID:e,isElcano:Boolean(a().features.isElcano)});return(0,lt.Qk)(s,(e=>({type:rt.k.RefreshBtfActionBoxes,input:s,output:e})))(t,a)})(i)(t,a)),Promise.all(n)},ei=(0,l.$j)((e=>({pageContext:e.pageContext,playerConfig:(0,Xe.UH)(e),whisperCacheData:(0,Xe.KQ)(e),playbackLinkData:e.player.playbackLinkData||void 0,autoplay:(0,Xe.E5)(e),playerCapabilities:e.player.capabilities,isDCSAnalyticsCallEnabled:(0,x.h8)(e)})),(e=>({setPlayerCapabilities:t=>e((e=>({type:rt.k.SetPlayerCapabilities,payload:{capabilities:e}}))(t)),onPlayFailure:()=>{e({type:Zs.k.PlaybackFailed})},startPlayback:t=>e(qs(t,!1)),createError:(t,a)=>e((0,Us.I)({type:Is.MessageTypes.error,stringId:t,headingStringId:a,automationId:"player-error-banner"})),onClosed:t=>{e(Gs(t,Js,!0))},onAsinChanged:t=>{e(Gs(t,Js,!1))}})))((0,r.s6)((({setPlayerCapabilities:e,startPlayback:t,createError:a,onClosed:s,onAsinChanged:r,avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d,playerConfig:u,playbackLinkData:m,whisperCacheData:p,isDCSAnalyticsCallEnabled:g,..._})=>{const h=m?{...m,contentConfig:{...m.contentConfig,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}}:void 0,b=p?{...p,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}:void 0,v={..._,playerConfig:u,playbackLinkData:h,whisperCacheData:b,onAsinChanged:r,onClosed:s,liveIncompatibleCallback:()=>a("DV_WEB_LIVE_NOT_SUPPORTED_BODY"),onPlayerCapabilities:a=>{(0,i.SX)(),e(a);const{autoplay:s,pageContext:n}=_;s&&setTimeout((()=>{(0,Ke.XM)({onPlay:t,launchType:n.playbackLaunchType,trailerLaunchType:n.playbackTrailerLaunchType,configPageType:u.pageType,playerCapabilities:a,isDCSAnalyticsCallEnabled:g})(s)}))},onPlayerLoadErrorCallback:()=>a("DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING")};return n.createElement(zs.Sz,v)})));var ti=a("./node_modules/@amzn/dvui/dist/Modal.js"),ai=a("./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.js"),si=a.n(ai);const ii="_3HpRgq",ni="IuS9GC",ri="_8kDmil",oi="_1aUeVF",li="_3pUIFM",ci="_3-D7fn",di="_2x-B3P",ui="dvWebDownloadAppModalShown",mi="true",pi=n.forwardRef((({launchType:e,url:t,watchText:a,featuresText:s,proceedText:i,onUpsellAppDone:r,isDCSAnalyticsCallEnabled:o},l)=>{const c=n.useRef(null),d=()=>{(0,Da.b)(o).hasOwnProperty(e)&&(0,Da.b)(o)[e]({url:t})},u=()=>{r&&r()};n.useImperativeHandle(l,(()=>({upsellApp(){var e;localStorage.getItem(ui)!==mi&&1?(localStorage.setItem(ui,mi),null===(e=c.current)||void 0===e||e.open()):(d(),u())}})));return n.createElement(ti.Modal,{modalId:"download-app-modal",size:"xs",className:ii,onClose:u,ref:c},n.createElement("header",{className:ni},n.createElement("div",{className:ri},n.createElement(si(),null)),n.createElement("h2",{className:oi},a)),n.createElement("div",{className:li},n.createElement("p",{className:ci},s),n.createElement(Vt.Jd,{refTag:(0,xt.i)("atv_dlapp_get_app"),isDCSAnalyticsCallEnabled:o},n.createElement(it.FreeButton,{className:di,onClick:()=>{var e;null===(e=c.current)||void 0===e||e.close(),d()}},i))))}));function gi(){return gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gi.apply(this,arguments)}const _i=(0,l.$j)((e=>({playbackIntegration:e.playbackIntegration,isDCSAnalyticsCallEnabled:(0,x.h8)(e)})),(e=>({clearUpsellApp:()=>e({type:Zs.k.ClearUpsellApp})})))((({playbackIntegration:e,clearUpsellApp:t,isDCSAnalyticsCallEnabled:a})=>{const s=n.useRef(null);return n.useEffect((()=>{var t;e.downloadAppModal&&e.isUpsellingApp&&(null===(t=s.current)||void 0===t||t.upsellApp())}),[e.isUpsellingApp]),e.downloadAppModal?n.createElement(pi,gi({},e.downloadAppModal,{onUpsellAppDone:t,isDCSAnalyticsCallEnabled:a,ref:s})):null}));var hi=a("./node_modules/@amzn/dvui/dist/Icons/Edit.js"),bi=a("./node_modules/@amzn/dvui/dist/Icons/Help.js"),vi=a("./node_modules/@amzn/dvui/dist/Icons/Share.js");const Di="_2kDqJK";function Ei(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fi extends n.PureComponent{constructor(...e){super(...e),Ei(this,"state",{copied:!1,buttonString:this.props.copyLinkText}),Ei(this,"copyLink",(e=>{const t=document.createElement("textarea");t.value=e,t.readOnly=!0,t.setAttribute("display","none"),document.body.appendChild(t),t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),t.remove()})),Ei(this,"onClickHandler",(e=>{this.state.copied||(0,Vt.XQ)(this.props.reftag,void 0,void 0,void 0,void 0,void 0,this.props.isDCSAnalyticsCallEnabled),this.setState({copied:!0,buttonString:this.props.linkCopiedText}),this.copyLink(this.props.url),e.stopPropagation()}))}render(){const{buttonString:e}=this.state,t=b(Di,Boolean(this.props.className)?this.props.className:null);return n.createElement(it.Button,{className:t,onClick:this.onClickHandler,"data-automation-id":"copy-url-button","data-testid":"copy-url-button"},n.createElement(Qe.Text,{string:e}))}}const yi=fi,wi="_3r4blv",Ti="_1soPIu",Ii="q72d3c",Ci="_3o41qN",Ni="_18gh9i",Si="_2v8Cz0";var Pi=a("./src/shared/utils/utils.ts");const xi=["Email","Facebook","Twitter","Pinterest"],ki={Email:Y.IconType.EMAIL,Facebook:Y.IconType.FACEBOOK,Twitter:Y.IconType.TWITTER,Pinterest:Y.IconType.PINTEREST},Ri=(e,t,a,s,i,n)=>r=>{r.preventDefault(),(0,Vt.XQ)(e,void 0,void 0,void 0,void 0,void 0,s),window.open(t,a,(0,Pi.R4)(i,n))},Vi=e=>{const t=e.shareIcons.networkMap,a=a=>{const{network:s,url:i,reftag:r,target:o,ariaText:l,width:c,height:d}=t[a],u=ki[a],m=`share-widget-${u}`;return n.createElement($t.Link,{id:m,"data-automation-id":m,"data-testid":m,ariaLabel:l,href:i,target:o,key:u,onClick:Ri(r,i,o,e.isDCSAnalyticsCallEnabled,c,d)},n.createElement("div",{className:Ci},n.createElement(Y.Icon,{className:Ni,use:u}),n.createElement("p",{className:Si},s)))};return n.createElement("div",{className:Ii},xi.filter((e=>Object.keys(t).includes(e))).map((e=>a(e))))},Ai=({shareIcons:e,pageUrl:t,copyUrlReftag:a,copyLinkText:s,linkCopiedText:i},r)=>n.createElement("div",null,e&&n.createElement(Vi,{shareIcons:e,isDCSAnalyticsCallEnabled:r}),n.createElement(yi,{url:t,reftag:a,copyLinkText:s,linkCopiedText:i,isDCSAnalyticsCallEnabled:r})),Wi=({shareWidgetModel:e,refTag:t,pageType:a,subPageType:s,isDCSAnalyticsCallEnabled:i})=>{return e?n.createElement(vt.i,{size:"xs",modalHeader:(r=e.shareText,n.createElement("strong",null,n.createElement(Qe.Text,{string:r}))),modalContent:Ai(e,i),modalId:"share-modal",toggle:({openModalClickHandler:r})=>n.createElement(Vt.Jd,{refTag:t,pageType:a,subPageType:s,isDCSAnalyticsCallEnabled:i},n.createElement("button",{id:"shareTrigger",className:Ti,onClick:r,"data-automation-id":"share-button","data-testid":"share-button"},n.createElement(Qe.Text,{string:e.shareText}))),className:wi}):null;var r};var Li=a("./src/util/api/util.ts");const Oi=e=>{return t={widgetArgs:(0,ie.Dv)({})},a={retryable:!1,mutedStatusCodes:[Li.SU.Forbidden]},s=t=>{window&&e&&t instanceof Li.yM&&t.message.includes(`${Li.SU.Forbidden}`)&&window.location.assign(e)},(e,i)=>(0,lt._E)(t,(e=>({type:rt.k.GetDevices,input:t,output:(0,ot.hV)(e)})),a,s)(e,i);var t,a,s};var Bi=a("./src/util/utils/Optional.ts");const Mi="_3h4TEd",Ui="_1DL1hb",ji="_3Itp-s",Fi="_3RRtRN",Hi="xDczhL";var zi=a("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx");const $i=({dropListId:e,dropListLinks:t,formUrl:a,formOnSubmitFn:s})=>n.createElement(n.Fragment,null,n.createElement("h4",{className:`${ji}`},n.createElement(ae.H1,{stringID:"DV_WEB_FEEDBACK_select_related_device"})),n.createElement("div",{className:`${Fi}`,"data-automation-id":"feedback-drop-list","data-testid":"feedback-drop-list"},n.createElement(zi.x,{links:t,customDropListID:e})),n.createElement(it.PrimeButton,{useIcon:Y.IconType.EXTERNAL,onClick:()=>{s&&s(),window.open(a,"_blank",(0,Pi.R4)(500,540))},className:`${Hi}`,"data-automation-id":"feedback-submit-button","data-testid":"feedback-submit-button"},n.createElement(ae.H1,{stringID:"DV_WEB_FEEDBACK_submit_button"}))),qi=({isOpen:e=!1,link:t,linkOnClickFn:a,onCloseFn:s,header:i,children:r})=>n.createElement(vt.i,{size:"xs",isOpen:e,toggle:()=>n.createElement(at._,{refTag:"atv_dp_fb_open"},n.createElement("button",{"data-automation-id":"feedback-button","data-testid":"feedback-button",className:`${Ui}`,onClick:a},t)),onClose:s,modalHeader:n.createElement("strong",null,i),modalContent:r,className:`${Mi}`});var Gi=a("./src/util/utils/marketplace.ts"),Zi=a("./src/util/utils/feedback.ts"),Qi=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),Yi=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts");const Xi="TVOD",Ki="freewithads",Ji=(0,T.P)(k.tW,(e=>(null==e?void 0:e.map((e=>e.benefitId||e.entitlementType)))||[])),en=(0,T.P)(k.ZM,(e=>(null==e?void 0:e.map((e=>e.benefitId||e.sType)))||[])),tn=(0,T.P)(k.AI,(e=>(0,Yi.c0)(e&&e.moreWaysToWatch).map((e=>(0,Qi.ok)(e)?e.benefitId||e.sType:(0,Qi.E2)(e)?Xi:void 0)).filter(Boolean))),an=(0,T.P)([tn,en,Ji,k.cD],((e,t,a,s)=>{const i=(0,Pi.xb)(s)?[]:[Xi];return[...new Set([...t,...e,...a,...i].filter(Boolean))].toString()})),sn=(0,T.P)([an],(e=>e.includes(Ki)?Ki:"UNKNOWN"));function nn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const rn="fbModalOpen",on=n.createElement(ae.H1,{stringID:"DV_WEB_FEEDBACK_feedback"}),ln=n.createElement(ae.H1,{stringID:"DV_WEB_FEEDBACK__send_us_feedback"}),cn={deviceTypeId:"A13Q6A55DBZB7M",name:"AVOD Website",text:n.createElement(ae.H1,{stringID:"DV_WEB_FEEDBACK_no_device_website"})},dn={deviceTypeId:"",name:"Other Device",text:n.createElement(ae.H1,{stringID:"DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"})};class un extends n.Component{constructor(...e){super(...e),nn(this,"state",{isOpen:this.isModalOpenOnPageLoad(),selected:0}),nn(this,"getDevicesList",(()=>{Boolean(this.props.context.customerID)&&!this.props.devices.deviceEntries&&this.props.getDevicesListWithRedirect(this.props.feedbackSignInUrl)}))}isModalOpenOnPageLoad(){const{context:{queryParameters:e}}=this.props;return Boolean(e&&e.fbModalOpen&&e.fbModalOpen[0])}linkClickHandler(){this.getDevicesList(),this.openModal()}selectDropListLink(e){this.setState({selected:e})}openModal(){this.setState({isOpen:!0})}closeModal(){this.setState({isOpen:!1})}componentDidMount(){this.state.isOpen&&this.getDevicesList()}render(){const{selected:e,isOpen:t}=this.state,{isMobile:a,isRetail:s,context:i,pageTitleId:r,logger:o,offerTypes:l,custPlayerType:c,devices:{deviceEntries:d}}=this.props,u=((e,t=!0)=>{const a=Bi.F.from(e);if(a.isEmpty()&&t)return[cn,dn];const s=a.getOrElse([]).reduce(((e,t)=>{const a=t.childrenNames&&t.childrenNames[0]||t.name;return e[a]||(e[a]=t.deviceTypeId),e}),{}),i=Object.keys(s).sort(((e,t)=>e.localeCompare(t))).map((e=>({name:e,deviceTypeId:s[e],text:e})));return[cn,...i]})(d,Boolean(i.customerID)),m=((e,t,a)=>e.map(((e,s)=>({text:e.text,isHighlighted:t===s,href:`#${s}`,onClick:e=>{a(s),e.preventDefault()}}))))(u,e,(e=>this.selectDropListLink(e))),p=u[e],g={...s?{ASIN:r}:{GTI:r},deviceName:p.name,deviceTypeId:p.deviceTypeId,currentTerritory:i.currentTerritory,recordTerritory:i.recordTerritory,language:i.locale,marketplace:i.marketplaceID,encryptedCustomerId:i.customerID,offerTypes:l,...Boolean(c)?{custPlayerType:c}:{},sessionId:i.sessionID,sourceUrl:`${(0,Gi.cU)(i.marketplaceID)}${i.originalURI}`,returnUrl:(0,_.P_)({isRetail:s,parameters:{},originalURI:i.originalURI},r,"atv_dp_send_feedback")},h=(0,Zi.O)(i.marketplaceID,g,o,a);return n.createElement(qi,{isOpen:t,link:on,linkOnClickFn:()=>this.linkClickHandler(),onCloseFn:()=>this.closeModal(),header:ln},n.createElement($i,{dropListId:"feedback-device-list",dropListLinks:m,formUrl:h,formOnSubmitFn:()=>{o.count("DVWeb::Detail::FeedbackFormSubmit",1,!0),this.closeModal()}}))}}const mn=(0,Ea.n)((0,l.$j)((e=>({devices:C.bS.devices(e),isMobile:(0,x.Hu)(e),pageTitleId:C.bS.pageTitleId(e),context:C.bS.context(e),isRetail:(0,N.T_)(e),offerTypes:an(e),custPlayerType:sn(e)})),(e=>({getDevicesListWithRedirect:t=>{e(Oi(t))}})))(un)),pn="_2T-E4t",gn="_3sJF7y",_n="_8n5jYM",hn="_3Vj7e7",bn="_2hn8r7";var vn=a("./node_modules/@amzn/dvui/dist/Icons/Lightbulb.js"),Dn=a.n(vn),En=a("./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.tsx");const fn=({termsText:e})=>n.createElement("div",{className:`${gn}`},n.createElement(Qe.Text,{string:e})),yn=({Icon:e,children:t})=>n.createElement("div",{className:bn},n.createElement("div",{className:hn},n.createElement(e,{height:"24px",width:"24px"})),t),wn=({isPurchaseRestricted:e,isRetail:t,bottomBar:a,isChildProfile:s,showReviews:i})=>{const{clickStreamPageType:r,clickStreamSubPageType:o,isDCSAnalyticsCallEnabled:l}=n.useContext(De.h);return e?null:n.createElement("div",{className:b("dv-dp-node-bottom",pn)},n.createElement(fn,{termsText:a.termsText}),!s&&n.createElement(de.Spacer,{className:_n,space:de.spacerSpacing.m,alignItems:de.spacerAlignItems.center,testID:"bottom-bar-actions"},n.createElement(yn,{Icon:vi.Share},n.createElement(Wi,{shareWidgetModel:a.shareWidgetModel,refTag:"atv_dp_share_open",pageType:r,subPageType:o,isDCSAnalyticsCallEnabled:l})),t?n.createElement(n.Fragment,null,i&&n.createElement(yn,{Icon:hi.Edit},n.createElement("span",{"data-automation-id":"write-review-link","data-testid":"write-review-link",onClick:e=>{const t=(0,En.O1)();t&&(e.preventDefault(),t.click())}},n.createElement(Qe.Text,{string:a.writeReviewText}))),n.createElement(yn,{Icon:Dn()},n.createElement(mn,{feedbackSignInUrl:a.feedbackSignInUrl}))):n.createElement(n.Fragment,null,n.createElement(yn,{Icon:hi.Edit},n.createElement(mn,{feedbackSignInUrl:a.feedbackSignInUrl})),n.createElement(yn,{Icon:bi.Help},n.createElement("span",{"data-automation-id":"get-help-link","data-testid":"get-help-link"},n.createElement(Qe.Text,{string:a.helpText}))))))},Tn="_20_SK5",In="_3du1zj",Cn="_3x9v6G",Nn=(0,l.$j)((e=>({isRetail:(0,N.T_)(e),isTV:(0,S.be)(e),isMShop:(0,x.gK)(e),marketplaceId:(0,N.C2)(e),images:(0,I.A2)(e),heroshotShouldBeShown:B(e),playbackData:(0,k.BB)(e)})))((({images:e,isTV:t,heroshotShouldBeShown:a})=>{if(a||!e||!e.packshot)return null;const s={alt:"",src:e.packshot,baseValue:300,isAtfMainImage:!0,classNameContainer:Cn},i=b(Tn,t?In:void 0,"dv-fallback-packshot-image");return n.createElement(n.Fragment,null,n.createElement("div",{className:i},n.createElement(v.t,s)))}));var Sn=a("./src/widgets/DVWebNodeDetail/selectors/autoplayHero.ts"),Pn=a("./src/util/utils/retryComponent.ts"),xn=a("./src/util/utils/url.ts"),kn=a("./src/shared/DetailPage/queryParameters.ts");const Rn="_1DrAlF",Vn="_2tqSOt",An="_1mbktc",Wn="chart-position-badge",Ln=({isMobile:e,chartPosition:t})=>{const{getString:a}=n.useContext(De.h);return e||!t?null:n.createElement("div",{className:Rn,"data-testid":Wn,"data-automation-id":Wn},n.createElement("span",{className:Vn},a("DV_DP_CHART_TOP_TEN")),n.createElement("span",{className:An},t))},On="KFfSzi",Bn="_3BCzJL",Mn="_1YHF7d",Un="_2rY-ij",jn="_3iAkF-",Fn="_3EbWH6",Hn="_1jQ798",zn="60px",$n="download-banner-dismiss-icon",qn="DVWebNode::DetailPage::DownloadUpsell",Gn="dvWebDownloadAppUpsellBannerShown",Zn="true",Qn=(0,Ea.n)((({homePageUrl:e,downloadUrl:t,logger:a})=>{const[s,i]=n.useState(!1),[r,o]=n.useState(!1);n.useEffect((()=>{var t;window&&window.localStorage&&window.localStorage.getItem(Gn)===Zn||!1||(null===(t=window.P)||void 0===t||t.when("mash").execute((t=>{t.canLaunchIntentURL({url:e,successCallback:e=>{e?a.count(`${qn}::ShowDownloadUpsellBanner::hidden`,1,!1):(setTimeout((()=>{i(!0),o(!0)}),1500),a.count(`${qn}::ShowDownloadUpsellBanner::shown`,1,!1))},failCallback:()=>{a.count(`${qn}::ShowDownloadUpsellBanner::hidden`,1,!1)}})})))}),[]);return n.createElement(n.Fragment,null,s&&n.createElement("div",{className:On,onClick:()=>{var e;null===(e=window.P)||void 0===e||e.when("mash").execute((e=>{a.count(`${qn}::LaunchDownloadURL`,1,!1),e.launchIntentURL({url:t})}))},"data-automation-id":"pv-app-download-page-link"},n.createElement("input",{type:"checkbox",checked:r,id:$n,className:Bn,onClick:e=>{window&&window.localStorage&&window.localStorage.setItem(Gn,Zn),o(!1),setTimeout((()=>{i(!1)}),300),e.stopPropagation()}}),n.createElement("div",{className:Mn},n.createElement("label",{htmlFor:$n,onClick:e=>e.stopPropagation(),className:Un},n.createElement(Y.Icon,{use:Y.IconType.SECOND_SCREEN_CLOSE})),n.createElement(G.Container,null,n.createElement("div",{className:jn},n.createElement("div",{className:Fn},n.createElement(si(),{height:zn,width:zn})),n.createElement(ae.H1,{stringID:"DV_DP_download_upsell_banner",className:Hn}))))))}));function Yn(){return Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Yn.apply(this,arguments)}const Xn="DVWebNode-detail-btf-default-wrapper",Kn=n.lazy((()=>(0,Pn.k)((()=>Promise.all([a.e(9351),a.e(2539),a.e(6608)]).then(a.bind(a,"./src/widgets/DVWebNodeDetail/components/heroVideo/heroVideo.tsx"))),"detail-hero-video",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:HeroVideo",1)})).then((({HeroVideoConnected:e})=>({default:e}))))),Jn=new Set([rn,kn.pN,kn.n9,kn.w5,kn.cg]),er=({children:e})=>n.createElement(G.Container,{className:b(Ha,"av-dp-container",za,qa)},e),tr=({containerRef:e})=>n.createElement("div",{id:"dv-action-box-wrapper",className:h.Z.fullWidth},n.createElement("div",{id:"dv-action-box",className:h.Z.fullWidthPhablet},n.createElement(Ta,{containerRef:e}))),ar=(0,l.$j)((e=>({hasCritical:H(e),renderOnlyGen4PlaybackInAtf:z(e),title:L(e),metaData:O(e),synopsis:M(e),seasons:j(e),liveState:U(e),bannerPromo:us(e),heroQuickPromo:ms(e),bundleCarousel:C.mZ.bundleCarousel(e),crowBanner:Ps(e),blockedPage:xs(e),bottomBar:$(e),pageContext:e.pageContext,trailerAction:(0,P.QH)(e),isMShop:(0,x.gK)(e),heroshotShouldBeShown:B(e),watchPartyAction:(0,k.MZ)(e),isRetail:(0,N.T_)(e),autoplayHero:(0,Sn.v)(e),pageTitleId:e.pageTitleId,chartPosition:q(e),isDownloadUpsellEnabled:(0,x.HV)(e),downloadUpsellBannerUrls:C.bS.pageContext(e).downloadUpsellBanner})))((({hasCritical:e,renderOnlyGen4PlaybackInAtf:t,title:a,metaData:s,synopsis:i,seasons:r,liveState:o,bannerPromo:l,heroQuickPromo:c,bundleCarousel:d,crowBanner:u,blockedPage:m,pageContext:p,bottomBar:g,heroshotShouldBeShown:_,isRetail:v,autoplayHero:D,pageTitleId:E,chartPosition:y,isDownloadUpsellEnabled:w,downloadUpsellBannerUrls:T})=>{const[I,C]=n.useState(Oa.e.NotStarted),[N,S]=n.useState(!1),{subPageType:P}=p,x=n.useRef(null);return n.useEffect((()=>{(0,xn.V)(Jn),S(Boolean(D)),C(Oa.e.NotStarted)}),[E]),m?n.createElement(er,null,n.createElement("div",{className:"av-detail-section"},n.createElement(Ls,m))):e?n.createElement("div",{className:Ua,ref:x},n.createElement(Ms,{isRetail:v},u&&n.createElement(Ss,u),n.createElement(Hs,null)),w&&T&&n.createElement(Qn,T),n.createElement(er,null,l&&n.createElement(cs,l),n.createElement(Ma,{draperStatus:I}),n.createElement(Nn,{draperStatus:I}),N&&D&&D.isTrailerAutoplayEnabled&&n.createElement(n.Suspense,{fallback:null},n.createElement(Kn,{draperStatus:I,setDraperStatus:C})),n.createElement("div",{className:b("av-detail-section",{[h.Z.disablePointerEvents]:N},_?ja:Fa)},n.createElement("div",{className:$a},t&&n.createElement(ss,null),o&&n.createElement(rs,o),n.createElement(f,a),y&&n.createElement(Ln,y),r&&n.createElement(ce,r),n.createElement(Fe,null),i&&n.createElement(Z.nW,i),s&&n.createElement(Ja,s),n.createElement(tr,{containerRef:x}),c&&n.createElement(Ds,c))),d&&n.createElement(Ts,d),g&&n.createElement(wn,Yn({},g,{isChildProfile:p.isCerberusChild}))),[p.playbackLaunchType,p.playbackTrailerLaunchType].some((e=>["EMBEDDED","URL_EMBEDDED","MSHOP_ANDROID_EMBEDDED"].includes(e)))&&n.createElement(ei,null),n.createElement(_i,null)):n.createElement(er,null,n.createElement("div",{className:"av-detail-section"},n.createElement(as,{showLiveError:"Event"===P}),n.createElement("style",null,`.${Xn}.${Xn}.${Xn}{display:none;}`)))}));var sr=a("./node_modules/redux/es/redux.js"),ir=a("./node_modules/redux-thunk/es/index.js"),nr=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),rr=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),or=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts");const lr={},cr=(0,sr.UY)({fragments:(0,or.V)((e=>e.refund&&e.refund.fragments),lr,((e=lr,t)=>{switch(t.type){case Zs.k.RefreshAtfActionBox:case Zs.k.RefreshBtfActionBoxes:case Zs.k.RefreshEpisode:return t.output&&t.output.refund&&{...e,...t.output.refund.fragments}||e;default:return e}})),refunding:(e=null,t)=>{switch(t.type){case Zs.k.TriggerRefund:return e||{...t.payload};case Zs.k.RefundCancelled:case Zs.k.RefundFailed:case Zs.k.RefreshAtfActionBox:case Zs.k.RefreshBtfActionBoxes:case Zs.k.RefreshEpisode:return null;default:return e}}}),dr=(0,or.V)((e=>e.imdb),{}),ur=(0,or.V)((e=>e.notification),{}),mr=(0,or.V)((e=>e.seasons),{});var pr=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts");const gr=(0,or.V)((e=>e.carousel),{}),_r=(0,or.V)((e=>e.extras),{}),hr=(0,or.V)((e=>e.bundleCarousel),{}),br=(0,or.V)((e=>e.buyboxTitleId),{}),vr=(0,or.V)((e=>e.creative),{}),Dr=(0,or.V)((e=>e.self),{}),Er=(0,or.V)((e=>e.restriction),{}),fr=(0,or.V)((e=>e.trailer),{}),yr={},wr=(0,or.V)((e=>e.watchlist),yr,((e=yr,t)=>{switch(t.type){case Zs.k.WatchlistToggle:return t.output.watchlist[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...t.output.watchlist[t.payload.pageTitleId],failed:!1}}||e;case Zs.k.WatchlistToggleFailed:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:!0}}||e;case Zs.k.ClearWatchlistToggleFailure:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:null}}||e;default:return e}})),Tr=(0,or.V)((e=>e.hoverWatchlist),{}),Ir=(0,or.V)((e=>e.features),{}),Cr=(0,or.V)((e=>e.castAndCrew),{}),Nr=(0,or.V)((e=>e.pageLink),{}),Sr=(0,sr.UY)({crow:(0,or.V)((e=>e.banner&&e.banner.crow),{}),ui:(e=null,t)=>{switch(t.type){case Zs.k.CreateBanner:return t.payload;case Zs.k.ClearBanner:return null;default:return e}}}),Pr=(0,or.V)((e=>e.otherFormats),{}),xr={playbackLinkData:void 0,capabilities:void 0},kr={};var Rr=a("./src/widgets/DVWebNodeDetail/reducers/devices.ts");const Vr=(0,or.V)((e=>e.bottomBar),{}),Ar=(0,or.V)((e=>e.exploreTabContent),{}),Wr=(0,or.V)((e=>e.entitlementCue),{}),Lr=(0,or.V)((e=>e.tapsExperimentToken),{}),Or=(0,or.V)((e=>e.autoplayHero),{}),Br={showCancellationWinback:!0};var Mr=a("./src/widgets/DVWebNodeDetail/reducers/reviews.ts");const Ur=(0,or.V)((e=>e.comingSoon),{}),jr=(0,or.V)((e=>e.metadata),{},void 0,((e,t)=>Object.keys(e).reduce(((t,a)=>{const s=t[a]||{};return t[a]={...s,...e[a]},t}),{...t})));var Fr=a("./src/widgets/DVWebNodeDetail/reducers/translatedReviews.ts");const Hr={},zr=(e,t)=>({...e,reviewSubmissionState:t}),$r=(e,t)=>({...e,ratingState:t}),qr=(e,t)=>({...e,publicNameState:{state:t,publicName:e.publicNameState.publicName}}),Gr=(e,t,a,s)=>{if(!s||!s.isSuccessful)return a?$r(t,"unsuccessful"):zr(t,"unsuccessful");if(!e.reviewID&&Boolean(e.reviewContent))return{...t,reviewSubmissionState:"successful"};if(Boolean(e.reviewContent)&&!a){const{reviewContent:e,reviewTitle:a,isVerifiedPurchase:i}=s,n={...t.customerSubmittedReview.customerSubmittedReviewContent,reviewContent:e,reviewTitle:a},r={...t.customerSubmittedReview,isVerifiedPurchase:i,customerSubmittedReviewContent:n};return{...t,reviewSubmissionState:"successful",customerSubmittedReview:r}}{const a={...t.customerSubmittedReview,rating:e.ratingValue,isVerifiedPurchase:s.isVerifiedPurchase};return{...t,ratingState:"successful",customerSubmittedReview:a}}},Zr=e=>{const{customerSubmittedReview:t,...a}=e;return{...a}},Qr=(e,t)=>{var a,s;const i=Boolean(null==t||null===(a=t.eligibilityResponse)||void 0===a?void 0:a.publicNameResponse)?{...e.publicNameState,publicName:t.eligibilityResponse.publicNameResponse.publicName,recordVersion:t.eligibilityResponse.publicNameResponse.recordVersion}:e.publicNameState;return{...e,publicNameState:i,isEligible:null==t||null===(s=t.eligibilityResponse)||void 0===s?void 0:s.isEligible}},Yr=e=>({...e,isEligible:void 0}),Xr=(0,or.V)((e=>e.reviewSubmission),Hr,((e=Hr,t)=>{switch(t.type){case Zs.k.SetPublicName:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:(a=e[t.payload.pageTitleId],s=t.output,i=t.input.publicName,{...a,publicNameState:{...a.publicNameState,state:null!=s&&s.isSuccessful?"successful":"unsuccessful",publicName:i||a.publicNameState.publicName,isValidName:null==s?void 0:s.isValidName}})}:e;case Zs.k.UpdatePublicNameState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:qr(e[t.payload.pageTitleId],t.nextState)}:e;case Zs.k.UpdateSubmissionState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:zr(e[t.payload.pageTitleId],t.nextState)}:e;case Zs.k.UpdateRatingState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:$r(e[t.payload.pageTitleId],t.nextState)}:e;case Zs.k.SubmitCustomerReview:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Gr(t.input,e[t.payload.pageTitleId],t.isToUpdateRating,t.output)}:e;case Zs.k.ClearSubmissionStates:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],reviewSubmissionState:"idle",ratingState:"idle"}}:e;case Zs.k.DeleteCustomerReview:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Zr(e[t.payload.pageTitleId])}:e;case Zs.k.FetchReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Qr(e[t.payload.pageTitleId],t.output)}:e;case Zs.k.ClearReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Yr(e[t.payload.pageTitleId])}:e;default:return e}var a,s,i})),Kr=(0,or.V)((e=>e.widgets),{},void 0,((e,t)=>({...t,...Object.keys(e).reduce(((a,s)=>(a[s]={...t[s],...e[s]},a)),{})}))),Jr=(0,or.V)((e=>e.impressionAnalytics),{}),eo=(0,or.V)((e=>e.shop),{}),to=(0,sr.UY)({requestContext:(e=null)=>e,pageContext:(e=null)=>e,pageTitleId:(e="",t)=>{switch(t.type){case Zs.k.STORE_MERGE:return t.payload&&t.payload.pageTitleId||e;case Zs.k.CHANGE_PAGE:return t.payload.pageTitleId;default:return e}},features:Ir,player:(e=xr,t)=>{switch(t.type){case Zs.k.PlaybackStart:return{...e,playbackLinkData:t.payload};case Zs.k.PlaybackClosed:case Zs.k.PlaybackFailed:return{...e,playbackLinkData:void 0};case Zs.k.SetPlayerCapabilities:return{...e,capabilities:t.payload.capabilities};default:return e}},playbackIntegration:(e=kr,t)=>{switch(t.type){case Zs.k.TriggerUpsellApp:return{...e,isUpsellingApp:!0};case Zs.k.ClearUpsellApp:return{...e,isUpsellingApp:!1};default:return e}},widgets:Kr,action:nr.I6,bundleCarousel:hr,buyboxTitleId:br,creative:vr,detail:rr.I6,imdb:dr,notification:ur,refund:cr,restriction:Er,self:Dr,trailer:fr,watchlist:wr,hoverWatchlist:Tr,seasons:mr,collections:pr.I6,carousel:gr,extras:_r,pageLink:Nr,purchase:(e=null,t)=>{switch(t.type){case Zs.k.TriggerPurchase:return e||{...t.payload,failed:!1};case Zs.k.CHANGE_PAGE:case Zs.k.PurchaseCancelled:case Zs.k.RefreshAtfActionBox:case Zs.k.RefreshBtfActionBoxes:case Zs.k.RefreshEpisode:return null;case Zs.k.PurchaseFailed:return t.payload.reload&&e?{...e,failed:!0}:null;default:return e}},exploreTabContent:Ar,reviews:Mr.I6,castAndCrew:Cr,otherFormats:Pr,banner:Sr,bottomBar:Vr,devices:Rr.I,autoplayHero:Or,entitlementCue:Wr,winback:(e=Br,t)=>t.type===Zs.k.UpdateShowCancellationWinback?{...e,showCancellationWinback:t.payload.showCancellationWinback}:e,tapsExperimentToken:Lr,comingSoon:Ur,metadata:jr,translatedReviews:Fr.I,reviewSubmission:Xr,impressionAnalytics:Jr,shop:eo}),ao=to,so=(e,t)=>a=>s=>i=>{e.count(`${ie.EZ}_Action_${i.type.split("/").pop()}`,1,!1),t&&e.info("Action",i);const n=s(i);return t&&e.info("State",a.getState()),n};let io;const no=(e,t,a)=>{const s=(0,Li.aP)(e.requestContext.isInternal||"0");if(io)a?io.dispatch({type:rt.k.CHANGE_PAGE,payload:e}):io.dispatch({type:rt.k.STORE_MERGE,payload:e});else{const a=[ir.Z,so(t,s)];s&&t.info(" Initial State",e);const i=s&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sr.qC;io=(0,sr.MT)(ao,e,i((0,sr.md)(...a)))}return io};class ro extends n.Component{constructor(e){super(e),this.state={error:void 0,info:void 0}}componentDidCatch(e,t){const{logger:a,name:s}=this.props,i=`${ie.EZ}_ErrorBoundary_${s}`;a.fatal(i,e).count(i,1,!1),this.setState({error:e,info:t})}render(){const{error:e}=this.state,{requestContext:{isInternal:t}}=this.props;return e?t?n.createElement("div",null,n.createElement("div",null,"$",e.message),n.createElement("div",null,"$",e.stack)):null:this.props.children}}const oo=(0,l.$j)((e=>({requestContext:(0,N.Iz)(e)})))((0,Ea.n)(ro));var lo=a("./node_modules/@amzn/dvui/dist/DVUI.js");const co=(0,l.$j)((e=>({pageContext:e.pageContext,config:(0,Xe.UH)(e),playerCapabilities:e.player.capabilities,downloadAppModal:e.playbackIntegration.downloadAppModal,enableMarinTracking:Boolean(e.features.enableMarinTracking)})),(e=>({startPlayback:t=>e(qs(t)),triggerUpsellApp:()=>e({type:Zs.k.TriggerUpsellApp})})))((({startPlayback:e,pageContext:t,config:a,playerCapabilities:s,downloadAppModal:i,triggerUpsellApp:r,enableMarinTracking:o,children:l})=>n.createElement(De.h.Consumer,null,(({isDCSAnalyticsCallEnabled:c})=>n.createElement(Ke.cr,{configPageType:a.pageType,onPlay:e,launchType:t.playbackLaunchType,trailerLaunchType:t.playbackTrailerLaunchType,playerCapabilities:s,onDownloadAppRequired:i?r:void 0,enableMarinTracking:o,pageType:t.pageType,subPageType:t.subPageType||Rt.wW.Unknown,isDCSAnalyticsCallEnabled:c},l)))));var uo=a("./node_modules/react-dom/index.js"),mo=a("./src/util/utils/history.ts"),po=a("./src/util/utils/device.ts"),go=a("./src/widgets/DVWebNodeDetail/actions/purchase.ts"),_o=a("./src/widgets/DVWebNodeDetail/actions/refund.ts");const ho=(0,T.P)([C.bS.refunding,C.bS.refund],((e,t)=>{if(!e||!t[e.titleId]||0===t[e.titleId].refundableOrders.length)return null;const{titleId:a}=e,{asin:s,csrfToken:i}=t[a].refundableOrders[0],n=/^[a-zA-Z0-9]{10}$/.test(s);return{asin:n?s:void 0,gti:n?void 0:s,csrfToken:i}}));function bo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const vo=n.lazy((()=>(0,Pn.k)((()=>a.e(8355).then(a.bind(a,"./src/widgets/DVWebNodeDetail/components/purchaseFlowWrapper/dvpaWrapper.tsx"))),"detail-purchase",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:PurchaseFlowWorkflow",1)})).then((({PurchaseFlowWorkflow:e})=>({default:e}))))),Do="mfa-purchase-root",Eo=e=>{const t=(window.location.search||"").match(`${e}=([^&]+)`);return t?decodeURIComponent(t[1]):void 0};class fo extends n.Component{constructor(e){super(e),bo(this,"el",void 0),bo(this,"portalRoot",void 0),bo(this,"state",void 0),bo(this,"shouldInitialize",(()=>Object.keys(this.props.offerTokenToPurchaseAction).length>0||this.props.hasRefunds)),this.state={initialized:!1},this.portalRoot=null}componentDidMount(){const{triggerPurchase:e,offerTokenToPurchaseAction:t}=this.props;if(this.shouldInitialize()){this.initialize();const a=Eo("continueToken"),s=Eo("offerToken"),i=Eo("gti");a&&s&&(t[s]||i)&&(setTimeout((()=>e(s,a,i)),300),window.location.href&&(0,mo.lO)(null,document.title,(e=>e.replace(/continueToken=[^&]+&?/,"").replace(/offerToken=[^&]+&?/,"").replace(/gti=[^&]+&?/,""))(window.location.href)))}}componentDidUpdate(){!this.state.initialized&&this.shouldInitialize()&&this.initialize()}componentWillUnmount(){this.portalRoot&&this.el&&this.portalRoot.removeChild(this.el)}getPurchaseElement(){let e=document.getElementById(Do);return e||(e=document.createElement("div"),e.setAttribute("id",Do),document.body.appendChild(e),e)}initialize(){this.portalRoot=this.getPurchaseElement(),this.el=document.createElement("div"),this.portalRoot.appendChild(this.el),this.setState({initialized:!0})}render(){const{purchasingDetails:e,refundingDetails:t,callbackCancel:a,resetAfterCancel:s,callbackFailure:i,failed:r,refreshAfterDone:o,callbackCSRF:l,callbackCancelRefund:c,callbackFailureRefund:d,callbackRefund:u,subPageType:m,titleId:p,capabilities:g,offerTokenToPurchaseAction:_,deviceId:h}=this.props,{initialized:b}=this.state,v={supportsWebPlayback:Boolean(g)&&g.supportsWebPlayback,supportsHDMovies:Boolean(g)&&g.supportsHDMovies,supportsUHD:!1};if(!b)return null;let D={action:void 0,actionContext:{callbacks:{callbackCancel:()=>{},callbackFailure:()=>{}}}};if(e){const{details:t,continueToken:n,refTag:c,gtiRedirect:d}=e,u=t&&t.offer.offerToken||e.offerToken;let g=t&&t.offer.csrfTokenWorkflow;if(!g){const e=Object.values(_)[0];g=e&&e.offer.csrfTokenWorkflow}const b=t&&t.gti||d,{deviceTypeId:E}=(0,po.dz)();D={action:"purchase",actionContext:{isVisible:!0,playerDetails:v,extraData:{subPageType:m,titleId:p,refTag:c,globalTitleIdentifier:b,deviceTypeId:E,...h&&{deviceId:h}},callbacks:{callbackCancel:a,callbackFailure:i,resetAfterCancel:s,refreshAfterDone:o,failed:r,callbackCSRF:l},offerContext:{offerToken:u,csrfToken:g},continueToken:n}}}else t&&(D={action:"refund",actionContext:{isVisible:!0,asin:t.asin,csrfToken:t.csrfToken,globalTitleIdentifier:t.gti,callbacks:{callbackCancel:c,callbackFailure:d,callbackRefundSuccess:u("Success"),callbackRefundFailure:u("Failure")}}});return uo.createPortal(n.createElement(oo,{name:"purchaseWorkflow"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(vo,D))),this.el)}}const yo=(e,t,a)=>(s,i,n=!1)=>{const r=n?t.error:t.info,o=[ie.EZ,a,i].join("_"),{deviceTypeId:l}=(0,po.dz)();r(`${n?"TVOD failure in ":""}[${a}] - Callback ${i} triggered`).count(o,1,!1).count(`${o}_${l}`,1,!1),s({dispatch:e,logger:t})},wo=(0,Ea.n)((0,l.$j)((e=>{var t;return{purchasingDetails:(0,ma.G)(e),refundingDetails:ho(e),offerTokenToPurchaseAction:(0,ma.n)(e),hasRefunds:Object.keys(e.refund.fragments).length>0,subPageType:(0,I.S6)(e),deviceId:null===(t=e.requestContext)||void 0===t?void 0:t.deviceID,titleId:e.pageTitleId,capabilities:e.player.capabilities}}),((e,{logger:t})=>{const a=((e,t)=>yo(e,t,"Purchase"))(e,t),s=((e,t)=>yo(e,t,"Refund"))(e,t);return{callbackCancel:()=>a(go.jF,"callbackCancel"),resetAfterCancel:()=>a(go.jF,"resetAfterCancel"),callbackFailure:()=>a(go.NT,"callbackFailure",!0),failed:()=>a(go.NT,"failed",!0),refreshAfterDone:()=>a(e(go.P)(Js),"refreshAfterDone"),callbackCSRF:()=>a(e(go.MW)(Js),"callbackCSRF"),callbackCancelRefund:()=>s(_o.dz,"callbackCancel"),callbackFailureRefund:()=>s(_o.H8,"callbackFailure"),callbackRefund:t=>a=>s(e((0,_o.C0)(t,a,Js)),`callbackRefund${t}`),triggerPurchase:(a,s,i)=>(0,go.lQ)(e,t,a,s,void 0,i)}}))(fo));var To=a("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js"),Io=a("./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts");a("./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts"),a("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const Co={name:"detail-atf-default",getProps:void 0,Component:(0,r.s6)((0,o.ty)((e=>{const{logger:t,context:a,state:s,isPageChange:i,strings:r,render:o,homeRegion:c}=e,d=no({...s,requestContext:a},t,i);return n.useEffect((()=>{Boolean(s.features.enableMarinTracking)&&(0,To.sendClicksTrackingRequest)(a.recordTerritory)}),[]),n.createElement(lo.DVUI,null,n.createElement(At.kw.Provider,{value:{detailPageTheme:At.wS.Default}},n.createElement(De.h.Provider,{value:{getString:(0,js.qY)(r,t,a),...s.pageContext,clickStreamPageType:s.pageContext.pageType,clickStreamSubPageType:s.pageContext.subPageType||Rt.wW.Unknown,isDCSAnalyticsCallEnabled:(0,x.iP)(s.pageContext.features,"isDCSAnalyticsCallEnabled"),clickstream:(0,kt.U)({context:a,homeRegion:c}),isRTL:Boolean(o&&o.isRTL),requestContext:a,isMobile:(0,Io.t)(s.pageContext),refTagTitleId:(0,De.N)(s.pageContext.pageTitleId,s.self&&s.self[s.pageTitleId]),isRetail:"Retail"==a.domain}},n.createElement(l.zt,{store:d},n.createElement(oo,{name:"atf"},n.createElement(co,null,n.createElement(ar,null))),n.createElement(wo,null)))))})))};var No=a("./src/widgets/DVWebNodeDetail/components/collection/collection.tsx"),So=a("./src/widgets/DVWebNodeDetail/selectors/collections.ts");function Po(){return Po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Po.apply(this,arguments)}const xo=(0,l.$j)((e=>({collections:(0,So.ic)(e)})))((({collections:e})=>n.createElement(G.Container,null,e.map(((e,t)=>null===e?null:n.createElement(No.F,Po({},e,{key:`collection-${e.index}-${t}`})))))));var ko=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx"),Ro=a("./src/widgets/DVWebNodeDetail/components/carousel/carousel.tsx"),Vo=a("./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.tsx"),Ao=a("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx"),Wo=a("./src/widgets/Explore/DraperPlayer/videoContext.ts");const Lo=a("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx").GZ,Oo=(0,l.$j)((e=>({shouldShowTabs:!(0,S.V$)(e),showReviews:(0,W.M)(e)})))((({shouldShowTabs:e,showReviews:t})=>{const[a,s]=n.useState({videoContext:{...Wo.E,updateContext:e=>{s({videoContext:e})}}});return n.createElement(Wo.l.Provider,{value:a.videoContext},e?n.createElement(En.Qy,null):n.createElement(n.Fragment,null,n.createElement(xo,null),n.createElement(Ro.B,null),n.createElement(Vo.B,null),n.createElement(ko.W,null),n.createElement(Ao.D,null)),!1,!e&&t&&n.createElement(Lo,null))}));class Bo extends n.Component{constructor(e){var t,a,s;super(e),s=void 0,(a="store")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s;const{logger:i,context:n,state:r}=e;this.store=no({...r,requestContext:n},i)}render(){const{logger:e,context:t,state:a,strings:s,homeRegion:i}=this.props;return a.restriction&&a.restriction[a.pageTitleId]&&a.restriction[a.pageTitleId].blockedPageModel?null:n.createElement(lo.DVUI,null,n.createElement(At.kw.Provider,{value:{detailPageTheme:At.wS.Default}},n.createElement(De.h.Provider,{value:{getString:(0,js.qY)(s,e,t),...a.pageContext,isRTL:!1,requestContext:t,isMobile:(0,Io.t)(a.pageContext),isDCSAnalyticsCallEnabled:(0,x.iP)(a.pageContext.features,"isDCSAnalyticsCallEnabled"),clickstream:(0,kt.U)({context:t,homeRegion:i}),clickStreamPageType:a.pageContext.pageType,clickStreamSubPageType:a.pageContext.subPageType||Rt.wW.Unknown,refTagTitleId:(0,De.N)(a.pageContext.pageTitleId,a.self&&a.self[a.pageTitleId]),isRetail:"Retail"==t.domain}},n.createElement(l.zt,{store:this.store},n.createElement(oo,{name:"btf"},n.createElement(co,null,n.createElement(Oo,null)))))))}}const Mo={name:"detail-btf-default",getProps:void 0,getHydrationProps:undefined,Component:(0,r.s6)((0,o.ty)(Bo))};(async()=>{(0,s.y)(Co),(0,i.KL)(),await new Promise((e=>setTimeout(e))),(0,s.y)(Mo),(()=>{const e="detail-hydration-complete";let t;"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e)),"complete"===document.readyState&&document.dispatchEvent(t),window.addEventListener("load",(()=>document.dispatchEvent(t)))})()})()},"./src/shared/CS/components/IconButton/IconButton.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>u});var s=a("./node_modules/react/index.js"),i=a("./node_modules/classnames/index.js");const n="_1yNmYv",r="_1RhLeT",o="_1sPQxp",l="_2mt6TB",c="_2pEmzF";function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},d.apply(this,arguments)}const u=({href:e,disabled:t,icon:a,isInverted:u,label:m,ariaLabel:p,className:g,labelClassName:_,onClick:h,type:b,testID:v})=>{const D=e?"a":"button",E=i(g,n,{[l]:u}),f={...v&&{"data-testid":v}};return s.createElement("div",d({},f,{className:E,role:"img","aria-label":p}),s.createElement(D,{disabled:t,href:e,onClick:h,type:b,className:i(r)},a),m&&!t&&s.createElement("label",{className:i(_,o,{[c]:u})},m))}},"./src/shared/DetailPage/queryParameters.ts":(e,t,a)=>{"use strict";a.d(t,{cg:()=>i,n9:()=>r,pN:()=>s,w5:()=>n});const s="bannerMsg",i="wpTitleId",n="wpCode",r="fbId"},"./src/shared/SPA/SpaContext.tsx":(e,t,a)=>{"use strict";a.d(t,{cG:()=>r});var s=a("./node_modules/react/index.js");const i=s.createContext({});i.Consumer,i.Provider;let n;!function(e){e.CanMultiDeleteV2="CanMultiDeleteV2",e.CanSeasonDownloadV2="CanSeasonDownloadV2",e.CanDownloadSDQuality="CanDownloadSDQuality",e.CanSelectAudioTracks="CanSelectAudioTracks",e.PassDownloadQualityInPayload="PassDownloadQualityInPayload"}(n||(n={}));const r=e=>t=>s.createElement(e,t)},"./src/shared/SPA/UWPNotifier/index.ts":(e,t,a)=>{"use strict";a.d(t,{_5:()=>s._5,lh:()=>s.lh});a("./src/shared/SPA/UWPNotifier/uwp-notifier.ts");var s=a("./src/shared/SPA/UWPNotifier/inputActions/index.ts");a("./src/shared/SPA/UWPNotifier/outputActions/index.ts")},"./src/shared/SPA/UWPNotifier/inputActions/index.ts":(e,t,a)=>{"use strict";let s,i,n,r,o,l,c,d,u;a.d(t,{_5:()=>u,lh:()=>i}),function(e){e.Handshake="Handshake",e.Downloads_All="Downloads_All",e.Download_Status="Download_Status",e.AppSettings="AppSettings",e.Player_Start="Player_Start",e.Player_Closed="Player_Closed",e.AppCapabilities="AppCapabilities",e.DeviceNavigation="DeviceNavigation",e.DeeplinkNavigation="DeeplinkNavigation"}(s||(s={})),function(e){e.IDLE="IDLE",e.SEASON_IDLE="SEASON_IDLE",e.SEASON_DOWNLOADING="SEASON_DOWNLOADING",e.SEASON_COMPLETED="SEASON_COMPLETED",e.SEASON_QUEUED="SEASON_QUEUED",e.SEASON_ERROR="SEASON_ERROR",e.WAITING="WAITING",e.QUEUED="QUEUED",e.DOWNLOADING="DOWNLOADING",e.PAUSED="PAUSED",e.ERROR="ERROR",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.REMOVED="REMOVED",e.DISABLED="DISABLED",e.CANCELLING="CANCELLING",e.REMOVING="REMOVING",e.RETRYING="RETRYING",e.PAUSING="PAUSING"}(i||(i={})),function(e){e.GOOD="GOOD",e.BETTER="BETTER",e.BEST="BEST",e.DATA_SAVER="DATA_SAVER"}(n||(n={})),function(e){e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR"}(r||(r={})),function(e){e.syncApi="SyncApi",e.uwpClient="UWPClient",e.xpDownload="XpDownload"}(o||(o={})),function(e){e.string="string",e.id="id"}(l||(l={})),function(e){e.MissingAudioLanguages="WA_9001"}(c||(c={})),function(e){e.RENTAL="rental",e.OFFLINE="offline"}(d||(d={})),function(e){e.UWP="UWP",e.XP="XP"}(u||(u={}))},"./src/shared/SPA/UWPNotifier/outputActions/index.ts":(e,t,a)=>{"use strict";let s,i,n;!function(e){e.Handshake="Handshake",e.Logout="Logout",e.Restart="Restart",e.Downloads_GetAll="Downloads_GetAll",e.Downloads_Start="Downloads_Start",e.Download_Start="Download_Start",e.Download_Delete="Download_Delete",e.Downloads_Delete="Downloads_Delete",e.Download_Pause="Download_Pause",e.Download_Resume="Download_Resume",e.Download_Play="Download_Play",e.Download_Cancel="Download_Cancel",e.Downloads_Cancel="Downloads_Cancel",e.Download_Retry="Download_Retry",e.Settings_GetAll="Settings_GetAll",e.Settings_DownloadQuality="Settings_DownloadQuality",e.Settings_DownloadOnMobileData="Settings_DownloadOnMobileData",e.Settings_3PNotice="Settings_3PNotice",e.Settings_Feedback="Settings_Feedback",e.Profile_Switch="Profile_Switch",e.Profile_Switched="Profile_Switched",e.Profile_SwitchFailed="Profile_SwitchFailed",e.Counter="Counter",e.Logging="Logging",e.AppCapabilities_GetAll="AppCapabilities_GetAll"}(s||(s={})),function(e){e.SW="SW",e.SPA="SPA"}(i||(i={})),function(e){e.VERBOSE="Verbose",e.DEBUG="Debug",e.INFO="Information",e.WARN="Warning",e.ERROR="Error",e.FATAL="Fatal"}(n||(n={}))},"./src/shared/SPA/UWPNotifier/uwp-notifier.ts":(e,t,a)=>{"use strict";var s=a("./src/util/logger/logger.ts"),i=a("./src/util/utils/pubSub.ts");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e,t=new s.Oc("DVWebNodeSPA/UWPNotifier")){n(this,"myWindow",void 0),n(this,"logger",void 0),n(this,"pubSub",void 0),this.myWindow=e,this.logger=t,this.pubSub=(0,i.M)(),this.init()}static getInstance(){return this.instance||(this.instance=new r(window)),this.instance}isSubscribed(e){const t=this.pubSub.query(e);return t&&t.length>0}subscribe(e,t){try{return this.pubSub.subscribe(e.toString(),t)}catch(a){const s="UWPNotifier failed to subscribe to an event from the native app";this.logger.error(s,e,t,a)}}unsubscribe(e,t){try{return this.pubSub.unsubscribe(e.toString(),t)}catch(a){const s="UWPNotifier failed to unsubscribe to an event from the native app";return this.logger.error(s,e,t,a),Promise.reject(new Error(s))}}publish(e,t){const a=Date.now();try{this.notify(JSON.stringify({action:e,payload:t,timestamp:a}))}catch(s){this.logger.error("UWPNotifier failed to generate the payload and notify the native app",e,t,a,s)}}init(){this.myWindow.primevideoUWPNotifierHandler=this.inputDispatcher.bind(this)}notify(e){if(this.myWindow&&this.myWindow.external)try{this.myWindow.external.notify(e)}catch(e){0}}inputDispatcher(e,t){try{const a=JSON.parse(t);this.pubSub.publish(e,a)}catch(a){this.logger.error("UWPNotifier failed to parse the native action payload",e,t,a)}}}n(r,"instance",void 0)},"./src/shared/SPA/downloadButton/DownloadButton.tsx":(e,t,a)=>{"use strict";a.d(t,{o6:()=>A,C$:()=>L});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Button.js"),n=a("./node_modules/@amzn/dvui/dist/Text.js"),r=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),o=a("./node_modules/@amzn/dvui/dist/Icons/Download.js");const l="_3ris48",c="_2ijjo6",d="_3VjO1A",u="_3i32fS",m="_1Y9Jue",p="_3KkSpY",g="N9fBYq",_="_14mRBK",h="_1Hl-5H",b="_2ZkoCK",v="_1g0tVA",D="_34INWL",E="_1Hb5tW",f="_3sYxmH";var y=a("./src/shared/SPA/UWPNotifier/index.ts"),w=a("./src/util/utils/dvstring/utils.ts"),T=a("./node_modules/classnames/index.js"),I=a.n(T),C=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),N=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),S=a("./src/shared/CS/components/IconButton/IconButton.tsx");function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},P.apply(this,arguments)}const x=Math.round(11*Math.PI*2),k=(e=0)=>Math.round((100-Math.min(e,100))/100*x),R="undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Edge")>-1&&navigator.userAgent.indexOf("Windows NT 10.0")>-1?"":"js-deeplinkable",V=({status:e,progress:t=0,hasLabel:a})=>{const i="#8197A4",n="#F2F4F6",r=e&&[y.lh.WAITING,y.lh.REMOVING,y.lh.CANCELLING].includes(e),o=k(r?75:t),l=e&&[y.lh.DOWNLOADING,y.lh.SEASON_DOWNLOADING,y.lh.PAUSED,y.lh.QUEUED,y.lh.SEASON_QUEUED,y.lh.ERROR,y.lh.SEASON_ERROR].includes(e),u=e&&[y.lh.DOWNLOADING,y.lh.PAUSED,y.lh.SEASON_DOWNLOADING].includes(e),m=e&&[y.lh.IDLE,y.lh.PAUSED,y.lh.QUEUED,y.lh.SEASON_QUEUED,y.lh.SEASON_IDLE,y.lh.REMOVED,y.lh.CANCELLED].includes(e),g=e&&[y.lh.IDLE,y.lh.SEASON_IDLE,y.lh.REMOVED,y.lh.CANCELLED].includes(e),_=e===y.lh.COMPLETED&&!a||e===y.lh.DISABLED;return s.createElement("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:I()({[p]:r})},s.createElement("g",{fillRule:"nonzero",fill:"none"},g&&s.createElement("path",{className:d,stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M2.997 18.087v4.972h18.03v-4.972"}),m&&s.createElement("path",{className:d,d:"M12 5v12M7.5 12.5L12 17M16.5 12.5L12 17",stroke:e===y.lh.PAUSED||g?n:i,strokeWidth:"1.5",strokeLinecap:"round"}),l&&s.createElement("circle",{className:c,stroke:i,strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11"}),(u||r)&&s.createElement("circle",{stroke:n,transform:"rotate(-90 12 12)",strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11",strokeDasharray:"69",strokeDashoffset:"69",strokeLinecap:"butt",style:{strokeDashoffset:o,transition:"strokeDashoffset 2s linear"}}),_&&s.createElement("g",{fill:n},s.createElement("path",{d:"M 14.121094 0.878906 C 15.292969 2.050781 15.292969 3.949219 14.121094 5.121094 C 12.949219 6.292969 11.050781 6.292969 9.878906 5.121094 C 8.707031 3.949219 8.707031 2.050781 9.878906 0.878906 C 11.050781 -0.292969 12.949219 -0.292969 14.121094 0.878906 M 14.121094 9.878906 C 15.292969 11.050781 15.292969 12.949219 14.121094 14.121094 C 12.949219 15.292969 11.050781 15.292969 9.878906 14.121094 C 8.707031 12.949219 8.707031 11.050781 9.878906 9.878906 C 11.050781 8.707031 12.949219 8.707031 14.121094 9.878906 M 14.121094 18.878906 C 15.292969 20.050781 15.292969 21.949219 14.121094 23.121094 C 12.949219 24.292969 11.050781 24.292969 9.878906 23.121094 C 8.707031 21.949219 8.707031 20.050781 9.878906 18.878906 C 11.050781 17.707031 12.949219 17.707031 14.121094 18.878906 "})),e===y.lh.COMPLETED&&a&&s.createElement("g",{fill:n},s.createElement("path",{d:"M15 18V8a1 1 0 012 0v11a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 112 0v10h10z"}),s.createElement("path",{d:"M7 8a1 1 0 112 0v7a1 1 0 01-2 0V8zm4 0a1 1 0 012 0v7a1 1 0 01-2 0V8zM1 5a1 1 0 110-2h18a1 1 0 010 2H1z"}),s.createElement("path",{d:"M6.8 2v2c0 .552-.403 1-.9 1S5 4.552 5 4V1c0-.552.403-1 .9-1h7.2c.497 0 .9.448.9 1v3c0 .552-.403 1-.9 1s-.9-.448-.9-1V2H6.8z"})),(e===y.lh.DOWNLOADING||e===y.lh.SEASON_DOWNLOADING)&&s.createElement("g",{fill:n},s.createElement("path",{d:"M10.3 16.012c0 .828-.335 1.054-.75 1.054-.414 0-.75-.226-.75-1.054V7.007C8.8 6.178 9.158 6 9.55 6s.75.178.75 1.007v9.005zM15.3 16.012c0 .828-.335 1.054-.75 1.054s-.75-.226-.75-1.054V7.007c0-.829.358-1.007.75-1.007s.75.178.75 1.007v9.005z"})),(e===y.lh.ERROR||e===y.lh.SEASON_ERROR)&&s.createElement("g",{fill:n},s.createElement("path",{d:"M13 13.024a.978.978 0 0 1-.975.976h-.05a.978.978 0 0 1-.975-.976V6.976c0-.537.439-.976.976-.976h.049c.536 0 .975.439.975.976v6.048zM11 16h2v2.04h-2z"})),e===y.lh.SEASON_COMPLETED&&s.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M20.03 4.28a1 1 0 00-1.42.03l-8.8 9.19-3.04-3.66a1 1 0 10-1.54 1.27l3.75 4.53a1 1 0 001.5.05l9.58-10a1 1 0 00-.03-1.41zM20 16v4H4v-4a1 1 0 10-2 0v5a1 1 0 001 1h18a1 1 0 001-1v-5a1 1 0 10-2 0z",clipRule:"evenodd"})))},A=({progress:e,status:t=y.lh.IDLE,downloadURL:a,fallbackURL:i,onClick:o,isDropList:c,label:d,id:u,containerRef:m})=>{const p=c?"button":"a",g={onClick:o,...!c&&{href:a},...(0,w.Ol)({fallbackUrl:i})},_=s.createElement(p,P({className:`${R} ${l}`},g),s.createElement("span",{className:"avu-screen-reader-only"},d),s.createElement(V,{hasLabel:!1,progress:e,status:t}));return u&&d?s.createElement(r.Tooltip,{content:s.createElement(n.Text,{string:d}),position:"top",size:"m",tabIndex:0,id:u,containerRef:m},_):_},W=({showIcon:e,progress:t,status:a,hasLabel:i})=>{const n=[y.lh.IDLE,y.lh.SEASON_IDLE,y.lh.CANCELLED,y.lh.REMOVED],r=[y.lh.SEASON_DOWNLOADING,y.lh.SEASON_COMPLETED,y.lh.SEASON_QUEUED,y.lh.SEASON_ERROR,y.lh.WAITING,y.lh.DOWNLOADING,y.lh.PAUSED,y.lh.ERROR,y.lh.QUEUED];return e?s.createElement("span",{className:I()(g,m,{[h]:n.includes(a),[b]:r.includes(a),[v]:a===y.lh.COMPLETED,[D]:a===y.lh.DISABLED,[E]:a===y.lh.SEASON_COMPLETED})},s.createElement(V,{progress:t,status:a,hasLabel:i})):null},L=(0,N.QI)((({onClick:e,progress:t,status:a,label:o,downloadURL:l,fallbackURL:c,forceDoubleHeight:d,containerRef:m,showIcon:p=!0,disabled:g=!1})=>{const h={...(0,w.Ol)({fallbackUrl:c}),onClick:e,forceDoubleHeight:d,href:l,disabled:g,className:I()(R,"dv-node-dp-download",u,_,C.Z.enablePointerEvents)},b={showIcon:p,progress:t,status:a,hasLabel:!0};return s.createElement(r.Tooltip,{position:"top",size:"s",content:s.createElement(n.Text,{tag:"span",string:o}),className:f,id:"dv-dp-node-download-tooltip",containerRef:m},s.createElement(i.Button,P({},h,{role:"button","aria-live":"polite","aria-label":o,testID:"download-button"}),s.createElement(W,b)))}),(({onClick:e,label:t})=>s.createElement(S.h,{icon:s.createElement(o.Download,null),onClick:e,ariaLabel:t,label:t})));L.displayName="DownloadButtonWithLabel"},"./src/shared/deeplink/browser.ts":(e,t,a)=>{"use strict";a.d(t,{Vl:()=>m,Y5:()=>p,pb:()=>u,uW:()=>g});var s=a("./src/shared/utils/analytics/recordReftag.tsx");const i=new(a("./src/util/logger/logger.ts").Oc)("DVWbNode:deeplink"),n="pv-hidden-iframe",r=e=>{var t,a;return null!==(t=null==e||null===(a=e.match(/^([^:]+)/))||void 0===a?void 0:a[1])&&void 0!==t?t:"unknown"},o=(e,t,a,n)=>{const o=r(e);n?((0,s.XQ)(`dv_deeplink_${o}_noapp`,void 0,void 0,void 0,void 0,void 0,a),i.count(`DVWeb::Deeplink::${o}::NoApp`,1,!0),t({isSuccess:!0}),window.location.assign(n)):(t({isSuccess:!1}),i.error("fallbackUrl param is required for deeplinking"))},l=(e,t,a)=>{const n=r(e);(0,s.XQ)(`dv_deeplink_${n}`,void 0,void 0,void 0,void 0,void 0,a),t({isSuccess:!0}),i.count(`DVWeb::Deeplink::${n}`,1,!0)},c=()=>document.querySelector("#"+n)||((e,t)=>{const a=document.createElement("iframe");return a.src=t,a.id=n,a.style.display="none",e.appendChild(a),a})(document.body,"about:blank"),d=(e,t,a)=>(e.addEventListener(t,a),()=>{e.removeEventListener(t,a)}),u=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:s})=>{navigator.msLaunchUri&&navigator.msLaunchUri(a,(()=>l(a,e,t)),(()=>o(a,e,t,s)))},m=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:s})=>{const i=setTimeout((()=>{o(a,e,t,s),r&&r()}),1e3),n=c(),r=d(window,"blur",(()=>{clearTimeout(i),r&&r(),l(a,e,t)}));n.contentWindow&&(n.contentWindow.location.href=a)},p=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:s})=>{const n=c();try{n.contentWindow&&(n.contentWindow.location.href=a),l(a,e,t)}catch(n){"NS_ERROR_UNKNOWN_PROTOCOL"===n.name?o(a,e,t,s):i.error("Unexpected error with Firefox deeplinking",n)}},g=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:s})=>{const i=setTimeout((()=>{o(a,e,t,s),r&&r()}),1e3);let n=window;for(;n!=n.parent;)n=n.parent;const r=d(n,"blur",(()=>{clearTimeout(i),r&&r(),l(a,e,t)}));window.location.assign(a)}},"./src/shared/deeplink/index.ts":(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var s=a("./src/shared/deeplink/url.ts"),i=a("./src/shared/deeplink/mshop.ts"),n=a("./src/shared/deeplink/browser.ts");const r=new(a("./src/util/logger/logger.ts").Oc)("DVWebNode:deeplink"),o=(e,t,a)=>e({logOutcome:({isSuccess:e})=>{r.count(`DVWebNode:deeplinking:${t}:${e?"success":"failure"}`,1,!1)},isDCSAnalyticsCallEnabled:a}),l=e=>({URL:o(s.t,"url",e),URL_EMBEDDED:o(s.t,"urlEmbedded",e),MSHOP_ANDROID:o(i.Q,"mshopAndroid",e),MSHOP_ANDROID_EMBEDDED:o(i.Q,"mshopAndroidEmbedded",e),MSHOP_IOS:o(i.l,"mshopIos",e),IOS_LEGACY:o(s.t,"iosLegacy",e),WIN10_EDGE:o(n.pb,"win10Edge",e),WIN10_FIREFOX:o(n.Vl,"win10Firefox",e),WIN10_FIREFOX_LEGACY:o(n.Y5,"win10FirefoxLegacy",e),WIN10_CHROME:o(n.uW,"win10Chrome",e),MAC_OS:o(n.Vl,"macOS",e)})},"./src/shared/deeplink/mshop.ts":(e,t,a)=>{"use strict";a.d(t,{Q:()=>o,l:()=>r});var s=a("./src/shared/utils/analytics/recordReftag.tsx");const i="dv_web_dl_success",n="dv_web_dl_failure",r=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:r})=>{var o;null===(o=window.P)||void 0===o||o.when("mash").execute((o=>{o.launchIntentURL({url:a,successCallback:()=>{e({isSuccess:!0}),(0,s.XQ)(i,void 0,void 0,void 0,void 0,void 0,t)},failCallback:async()=>{r?(e({isSuccess:!0}),await(0,s.XQ)(i,void 0,void 0,void 0,void 0,void 0,t),window.location.assign(r)):(e({isSuccess:!1}),await(0,s.XQ)(n,void 0,void 0,void 0,void 0,void 0,t))}})}))},o=({logOutcome:e,isDCSAnalyticsCallEnabled:t})=>({url:a,fallbackUrl:r})=>{var o;null===(o=window.P)||void 0===o||o.when("mash").execute((o=>{o.canLaunchIntentURL({url:a,successCallback:async l=>{l?(await(0,s.XQ)(i,void 0,void 0,void 0,void 0,void 0,t),e({isSuccess:!0}),o.launchIntentURL({url:a})):(await(0,s.XQ)(n,void 0,void 0,void 0,void 0,void 0,t),e({isSuccess:!1}),r&&o.launchIntentURL({url:r}))},failCallback:()=>{e({isSuccess:!1}),(0,s.XQ)(n,void 0,void 0,void 0,void 0,void 0,t)}})}))}},"./src/shared/deeplink/url.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>s});const s=({logOutcome:e})=>({url:t})=>{e({isSuccess:!0}),window.location.assign(t)}},"./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts":(e,t,a)=>{"use strict";let s,i,n,r,o;a.d(t,{KU:()=>o,Nb:()=>r,W0:()=>c,c7:()=>s,cf:()=>n,qB:()=>d,sW:()=>l,wW:()=>i}),function(e){e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch",e.ATVWatchParty="ATVWatchParty",e.ATVMoviesAnywhere="ATVMoviesAnywhere",e.ATVModal="ATVModal",e.Detail="Detail",e.DetailWebView="DetailWebView",e.DetailAW="DetailAW",e.PVPerson="PVPerson",e.DVWebAjaxAnalytics="DVWebAjaxAnalytics",e.DVSPA="DVSPA"}(s||(s={})),function(e){e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.Search="Search",e.Browse="Browse",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.TVSeason="TVSeason",e.SSM="SSM",e.Actor="Actor",e.Watch="Watch",e.Chat="Chat",e.PVWinApp="PVWinApp",e.GettingStarted="GettingStarted",e.Main="Main",e.Unknown="Unknown"}(i||(i={})),function(e){e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.Live="pvwindowsapp-live",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown"}(n||(n={})),function(e){e.Explore="pvweb-explore",e.DetailPage="pvweb-dp",e.Live="pvweb-live",e.AccList="pvweb-al",e.WindowsApp="pvweb-winapp",e.Unknown="pvweb-unknown"}(r||(r={})),function(e){e.Web="web",e.WinApp="winApp"}(o||(o={}));const l={[s.ATVMyStuff]:{[o.WinApp]:n.AccList,[o.Web]:r.AccList},[s.ATVProfiles]:{[o.WinApp]:n.AccList,[o.Web]:r.AccList},[s.ATVDetail]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.ATVPerson]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.ATVWatchParty]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.ATVMoviesAnywhere]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.ATVHome]:{[o.WinApp]:n.Explore,[o.Web]:r.Explore},[s.ATVBrowse]:{[o.WinApp]:n.Explore,[o.Web]:r.Explore},[s.ATVSearch]:{[o.WinApp]:n.Explore,[o.Web]:r.Explore},[s.ATVMerch]:{[o.WinApp]:n.Explore,[o.Web]:r.Explore},[s.ATVSubscription]:{[o.WinApp]:n.Explore,[o.Web]:r.Explore},[s.ATVUnknown]:{[o.WinApp]:n.WindowsApp,[o.Web]:r.WindowsApp},[s.ATVDownloads]:{[o.WinApp]:n.WindowsApp,[o.Web]:r.WindowsApp},[s.DVSPA]:{[o.WinApp]:n.WindowsApp,[o.Web]:r.WindowsApp},[s.ATVModal]:{[o.WinApp]:n.Live,[o.Web]:r.Live},[s.Detail]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.DetailWebView]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.DetailAW]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.PVPerson]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage},[s.DVWebAjaxAnalytics]:{[o.WinApp]:n.DetailPage,[o.Web]:r.DetailPage}};let c,d,u;!function(e){e.SignOut="SignOut",e.SignIn="SignIn",e.Share="Share",e.Search="Search",e.CarouselScroll="CarouselScroll",e.Purchase="Purchase",e.Rent="Rent",e.PlayTrailer="PlayTrailer",e.PlayStream="PlayStream",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.DefaultAction="Click"}(c||(c={})),function(e){e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.actionOnly="actionOnly",e.refreshButton="refreshButton",e.BackForwardButton="bf=10"}(d||(d={})),function(e){e.Browse="browse",e.Store="OFFER_FILTER=TVOD",e.Channels="OFFER_FILTER=SUBSCRIPTIONS",e.Merch="merch",e.Channels_subscription="subscription",e.FreeToMe="on",e.Manage="manage",e.Edit="edit",e.Editing="editing",e.Associate="associate",e.Create="create"}(u||(u={}))},"./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>p});var s=a("./src/shared/deviceProxy/ServiceClientBase.ts"),i=a("./src/util/logger/logger.ts"),n=a("./src/util/api/util.ts"),r=a("./src/shared/deviceProxy/DeviceProxy.ts"),o=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),l=a("./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts"),c=a("./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts"),d=a("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts"),u=a("./src/shared/utils/LoggerWrapper.ts");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p{constructor({context:e,DTID:t,logger:a=new u.G(new i.Oc("DVWebNode:ClickstreamClient")),batchParameters:g,homeRegion:_}){m(this,"DTID",void 0),m(this,"context",void 0),m(this,"serviceClient",void 0),m(this,"queue",void 0),m(this,"dcsSchemaValidator",new c.j(d.I3)),m(this,"logger",void 0),m(this,"homeRegion",void 0),m(this,"buildURL",(()=>{const e=new URLSearchParams({...(0,r.B$)(this.context),deviceTypeID:this.DTID,firmware:"DVWebNode"});return`${(0,r.WA)(this.context,this.homeRegion)}/${p.CLICKSTREAM_URL}?${e.toString()}`})),m(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),m(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),m(this,"enqueue",(e=>{const t=this.dcsSchemaValidator.isValid(e);t.isValid?(this.queue.add(e),this.logger.count("ClickstreamClient::ValidEntry",{[e.clientVariant]:1})):(this.logger.debug("Invalid Clickstream entry",{validationError:(null==t?void 0:t.errorMessage)||"",invalidEntry:JSON.stringify(e)}),this.logger.count("ClickstreamClient::InvalidEntry",{[e.clientVariant]:1}))})),m(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:"Clickstream",uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},p.strategy)}catch(e){this.logger.warn("Clickstream client failed to execute",e),e instanceof n.jZ&&this.logger.debug("Clickstream client - Invalid Status Code request",{homeRegion:this.homeRegion||""})}})),m(this,"hit",(({pageType:e,subPageType:t,clientVariant:a,refMarker:s,pageTypeId:i,A9SearchFields:n})=>{const r=this.buildEntry(o.qB.PageHit,{action:o.W0.Click,pageType:e,subPageType:t,clientVariant:a,...s&&{refMarker:s},...i&&{pageTypeId:i},...n&&{A9SearchFields:n}});this.enqueue(r)})),m(this,"hva",(({pageType:e,subPageType:t,action:a,clientVariant:s,refMarker:i,pageTypeId:n,hitType:r,A9SearchFields:l})=>{const c=this.buildEntry(null!=r?r:o.qB.PageTouch,{action:a,pageType:e,subPageType:t,clientVariant:s,...i&&{refMarker:i},...n&&{pageTypeId:n},...l&&{A9SearchFields:l}});this.enqueue(c)})),this.context=e,this.DTID=t,this.logger=a,this.serviceClient=new s.v({context:this.context,logger:a,logErrorAsWarning:!0}),this.queue=new l.V(g,this.call),this.homeRegion=_}}m(p,"CLICKSTREAM_URL","cdp/usage/Clickstream"),m(p,"strategy",{maxRetries:0,retryOnException:()=>!1})},"./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts":(e,t,a)=>{"use strict";a.d(t,{j:()=>r});var s=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),i=a("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e){n(this,"clickstreamSchemaConfiguration",i.I3),n(this,"isClickstreamPayload",((e,t)=>!!(e&&"object"==typeof e&&e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype)||(t.message="Clickstream payload is not an object",!1))),e&&(this.clickstreamSchemaConfiguration=e)}isValid(e){let t={message:""};return this.isClickstreamPayload(e,t)&&this.checkProperties(e,t)?{isValid:!0}:{isValid:!1,errorMessage:t.message}}checkProperties(e,t){return this.checkProperty(e,"hitType",t)&&this.checkProperty(e,"action",t)&&this.checkProperty(e,"refMarker",t)&&this.checkProperty(e,"pageType",t)&&this.checkProperty(e,"pageTypeId",t)&&this.checkProperty(e,"subPageType",t)&&this.checkProperty(e,"startTime",t)&&this.checkProperty(e,"deviceId",t)&&this.checkProperty(e,"deviceTypeId",t)&&this.checkProperty(e,"clientVariant",t)&&this.checkProperty(e,"preferredLanguage",t)&&this.checkProperty(e,"ue",t)&&this.checkProperty(e,"cf",t)&&this.checkProperty(e,"id",t)&&this.checkAdditionalData(e,"additionalData",t)&&this.checkTags(e,"tags",t)}checkProperty(e,t,a){return this.isPropertyDefined(e,t)?this.isOfSpecifiedType(e,t,this.clickstreamSchemaConfiguration[t],a)&&this.propertySpecificCheck(e,t,a):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}checkAdditionalData(e,t,a){return this.isPropertyDefined(e,t)?this.isPlainObject(e.additionalData,t,a):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}checkTags(e,t,a){return this.isPropertyDefined(e,t)?this.isArray(e.tags,"tags",a)&&e.tags.every((e=>this.isOfSpecifiedType(e,"tags","string",a))):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}handleUndefinedProperty(e,t,a,s){return!this.isRequired(e,t,a)||(this.setUndefinedErrorMessage(t,s),!1)}isRequired(e,t,a){return a.indexOf(t)>=0||this.isMaybeRequired(e,t)}isMaybeRequired(e,t){if("pageTypeId"===t){const t=e.pageType,a=e.hitType,i=e.action;return a==s.qB.PageHit&&t==s.c7.ATVDetail&&i==s.W0.Click||a==s.qB.PageTouch&&(i==s.W0.Download||i==s.W0.PlayDownload)}return!1}isPropertyDefined(e,t){return Object.hasOwnProperty.call(e,t)}isPlainObject(e,t,a){const s=e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype;return s||this.setIncorrectTypeErrorMessage(t,a,e),s}isArray(e,t,a){const s=Array.isArray(e);return s||this.setIncorrectTypeErrorMessage(t,a,e),s}isOfSpecifiedType(e,t,a,s){const i=Array.isArray(a)&&a.indexOf(e[t])>=0||typeof e[t]===a;return i||this.setIncorrectTypeErrorMessage(t,s,e[t]),i}setUndefinedErrorMessage(e,t){t.message=`ClickstreamValidationFailed - ${e} is not defined`}setIncorrectTypeErrorMessage(e,t,a){Array.isArray(a)?a="Array":a instanceof Object&&Object.getPrototypeOf(a)===Object.prototype&&(a="Object"),t.message=`ClickstreamValidationFailed - ${e} is of incorrect type, received value is ${a}`}propertySpecificCheck(e,t,a){switch(t){case"subPageType":return this.checkSubPageType(e,a);case"refMarker":return this.checkRefMarker(e,a);default:return!0}}checkSubPageType(e,t){const a=e.subPageType;return a?a.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/)?(t.message=`ClickstreamValidationFailed - subPageType must not contain special characters, received value is ${a}`,!1):a.charAt(0)===a.charAt(0).toUpperCase()||(t.message=`ClickstreamValidationFailed - subPageType is not CapitalizedCamelCase, received value is ${a}`,!1):(t.message="ClickstreamValidationFailed - subPageType must not be empty string",!1)}checkRefMarker(e,t){const a=e.refMarker;return a.match("^[A-Za-z0-9_|\\-]*$")?a.match("^[A-Za-z].*")?a.match(".*[A-Za-z0-9]$")?a.match("^(?!.*([-_|]){2,}).*$")?!(a.length<2||a.length>64)||(t.message=`ClickstreamValidationFailed - refMarker must be within the length limits, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must not contain repeating punctuation, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must end with alphanumeric character, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must start with alphabetic character, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must contain alphanumeric characters and punctuation only, received value is ${a}`,!1)}}},"./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts":(e,t,a)=>{"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{V:()=>n});class i{constructor(){s(this,"store",new Map),s(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),s(this,"delete",(e=>{this.store.delete(e)})),s(this,"values",(()=>Array.from(this.store.values()))),s(this,"clear",(()=>{this.store.clear()}))}}class n{constructor(e,t){s(this,"storage",void 0),s(this,"callback",void 0),s(this,"parameters",void 0),s(this,"interval",null),s(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),s(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),s(this,"remove",(e=>{this.storage.delete(e)})),s(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),s(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new i,this.callback=t,this.parameters=e}}},"./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts":(e,t,a)=>{"use strict";a.d(t,{I3:()=>i});var s=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const i={hitType:Object.values(s.qB),action:Object.values(s.W0),pageType:Object.values(s.c7),subPageType:"string",clientVariant:[...Object.values(s.Nb),...Object.values(s.cf)],refMarker:"string",pageTypeId:"string",startTime:"number",deviceTypeId:"string",deviceId:"string",pageTypeIdSource:"string",preferredLanguage:"string",ue:"number",cf:"number",af:"number",id:"number",requiredProperties:["hitType","pageType","subPageType","startTime","deviceTypeId","action","clientVariant","refMarker"]}},"./src/shared/deviceProxy/ClientsideImpressionClient.ts":(e,t,a)=>{"use strict";a.d(t,{g:()=>l});var s=a("./src/util/logger/logger.ts"),i=a("./src/util/utils/device.ts"),n=a("./src/shared/deviceProxy/DeviceProxy.ts"),r=a("./src/util/csm/csm.tsx");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{constructor(e){o(this,"context",void 0),o(this,"logger",void 0),this.context=e,this.logger=new s.Oc("DVWebNode_ClientsideImpressionClient")}buildClientsideImpressionUri(){const e={...(0,n.B$)(this.context),deviceTypeID:l.html5DTID,deviceID:"Web",firmware:"DVWebNode"},t=new URLSearchParams(e);return`${(0,n.WA)(this.context)}/${l.clientsideImpressionUrl}?${t.toString()}`}getParameters(e){return{...(0,n.B$)(this.context),...e,sessionId:this.context.sessionID,deviceTypeID:(0,i.dz)().deviceTypeId}}async logImpression(e){const t=this.buildClientsideImpressionUri(),a=this.getParameters(e),s="sendBeacon"in navigator&&!Boolean(window.chrome);if(s){(0,r.cL)("DVWebNode::ClientsideImpressionClient::sendBeaconAttempt",1,!1);const e=new Blob([JSON.stringify(a)],{type:"application/json"});return navigator.sendBeacon(t,e)}return(0,r.cL)("DVWebNode::ClientsideImpressionClient::fetchAttempt",1,!1),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),keepalive:!0,credentials:"include"}).then((()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${s?"sendBeacon":"fetch"}Success`,1,!1),!0)),(()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${s?"sendBeacon":"fetch"}Reject`,1,!1),!1))).catch((e=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${s?"sendBeacon":"fetch"}Caught`,1,!1),this.logger.warn("Clientside impression fetch failed",e),!1)))}}o(l,"clientsideImpressionUrl","cdp/usage/ClientsideImpression"),o(l,"html5DTID",n.V4.WEB)},"./src/shared/deviceProxy/DeviceProxy.ts":(e,t,a)=>{"use strict";a.d(t,{B$:()=>l,V4:()=>r,WA:()=>o});var s=a("./src/util/utils/device.ts"),i=a("./src/util/utils/marketplace.ts"),n=a("./src/shared/deviceProxy/marketplaceUtils.ts");const r={WEB:"AOAGZA014O5RE",WINDOWS:"A3OEMT9S4WNMK"},o=(e,t)=>`https://${(0,n.fJ)(e.marketplaceID,t)}`,l=e=>({deviceID:e.deviceID,deviceTypeID:(0,s.dz)().deviceTypeId,gascEnabled:(0,i.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale})},"./src/shared/deviceProxy/PVClickstreamClient.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>u});var s=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),i=a("./src/shared/deviceProxy/DeviceProxy.ts"),n=a("./src/util/utils/refMarker.ts"),r=a("./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={size:1,duration:1};class c extends r.E{constructor({context:e,homeRegion:t,logger:a}){super({context:e,DTID:c.getDTID(),logger:a,homeRegion:t,batchParameters:c.getBatchParameters()}),o(this,"previousParameters",void 0),o(this,"onNavigation",void 0),o(this,"backButtonData",void 0),o(this,"getClientVariant",(e=>s.sW[e]?s.sW[e][s.KU.Web]:s.Nb.Unknown)),o(this,"getA9SearchFields",(()=>{var e;const t=new URLSearchParams(window.location.search),a=e=>{if(null===e)return null;const t=parseInt(e,10);return isNaN(t)?null:t},s=a(t.get("qid")),i=t.get("sr"),n=null===i?null:a(i.substring(i.lastIndexOf("-")+1));return null!==s&&null!==n?{qid:s,searchPositionIndex:n,keyword:null!==(e=t.get("keywords"))&&void 0!==e?e:""}:void 0})),o(this,"getRefmarker",(()=>{const e=window.location.href.match(n.o);return e&&e[1]||"atv_unknown"})),o(this,"getParameters",((e,t,a,s)=>({pageType:e,subPageType:t,refMarker:a||this.getRefmarker(),clientVariant:s||this.getClientVariant(e),A9SearchFields:this.getA9SearchFields()}))),o(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:s.qB.BackForwardButton}})),o(this,"clearBackButton",(()=>{this.backButtonData=void 0})),o(this,"navigation",(e=>{const{pType:t,sPageType:a,ref:i,pageTypeId:n}=e;try{const{pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:c}=this.getParameters(t,a,i);this.previousParameters={pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:c},this.backButtonData&&(this.hva({pageType:e,subPageType:r,action:s.W0.Back,clientVariant:l,refMarker:this.backButtonData.ref,pageTypeId:n,hitType:this.backButtonData.hitType,A9SearchFields:c}),this.clearBackButton()),this.hit({pageType:e,subPageType:r,clientVariant:l,refMarker:o,pageTypeId:n,A9SearchFields:c}),this.onNavigation&&this.onNavigation({pageType:e,subPageType:r})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),o(this,"action",(e=>{const{action:t,pType:a,sPageType:s,ref:i,pageTypeId:n,hitType:r,clientVariantOverride:o}=e;try{const{pageType:e,subPageType:l,refMarker:c,clientVariant:d,A9SearchFields:u}=a&&s?this.getParameters(a,s,i,o):this.previousParameters;this.previousParameters={pageType:e,subPageType:l,refMarker:c,clientVariant:d,A9SearchFields:u},this.hva({pageType:e,subPageType:l,action:t,clientVariant:null!=o?o:d,hitType:r,refMarker:null!=i?i:c,pageTypeId:n,A9SearchFields:u})}catch(e){this.logger.warn("PVClickstream action() error",e)}})),o(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:s.c7.ATVUnknown,subPageType:s.wW.Unknown,clientVariant:s.cf.Unknown,refMarker:"atv_unknown"}}}o(c,"getBatchParameters",(()=>l)),o(c,"getDTID",(()=>i.V4.WEB));let d=null;const u=e=>(null==d&&void 0!==(null==e?void 0:e.context)&&(d=new c(e)),d)},"./src/shared/deviceProxy/ServiceClientBase.ts":(e,t,a)=>{"use strict";a.d(t,{v:()=>r});var s=a("./src/util/api/util.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={credentials:"include",headers:{},body:void 0};class r{constructor({context:e,logger:t,retryLogic:a,logErrorAsWarning:s=!1}){i(this,"context",void 0),i(this,"logger",void 0),i(this,"retryLogic",void 0),i(this,"logErrorAsWarning",void 0),i(this,"defaultRetryCondition",(()=>!1)),i(this,"logError",((e,t,a)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...a}):this.logger.error(e,t,a)})),this.context=e,this.logger=t;const n={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...n,...a},this.logErrorAsWarning=s}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const a={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),a,t)}async post(e,t){const a={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),a,t)}buildURL(e,t={}){let a;try{a=new URL(e)}catch(t){a=new URL(e,window.location.origin)}for(const e in t)a.searchParams.set(e,`${t[e]}`);return a.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...n,...t,body:e?JSON.stringify(e):void 0}}async call(e="undefined",t,a,s){const i={...this.retryLogic,...s};let n=0;do{const s={};try{if(n>0&&i.backoffStrategy){const e=i.backoffStrategy(n);await this.sleep(e)}const r=await this.fetchResponse(e,t,a,s);let o=await this.parseResponse(e,r,s);return s.Success=1,o}catch(r){if(this.shouldRetry(r,t,a,e,s,i)&&n!=i.maxRetries)continue;throw s.Failure=1,r}finally{0!=n&&(s.Retry=1),this.logger.count(`Call:${e}`,s),n++}}while(n<=((null==i?void 0:i.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,a){let i;try{i=await t.json()}catch(t){const i=new s.xU(t.message);throw this.logError(i,"Could not parse response",{operationName:e}),a.DeserializationException=1,i}return i}async fetchResponse(e,t,a,i){const n=await fetch(t,a);if(i[`StatusCode_${n.status}`]=1,!n.ok){const a=await n.text(),i=new s.jZ(a,n.status);throw this.logError(i,"Non 2xx status code received",{statusCode:n.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),i}return n}shouldRetry(e,t,a,i,n,r){return e instanceof s.jZ&&r&&r.retryOnStatusCode?r.retryOnStatusCode(e,t,a):e instanceof s.xU&&r&&r.retryOnDeserializationException?r.retryOnDeserializationException(e,t,a):(n.Exception=1,this.logError(e,`${a.method} request threw an exception`,{url:t,operationName:i}),!(!r||!r.retryOnException)&&r.retryOnException(e,t,a))}}},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,a)=>{"use strict";a.d(t,{fJ:()=>i});var s=a("./src/util/utils/marketplace.ts");const i=(e,t)=>{let a="";switch(a=(0,s.is)()===s.wQ.ROW&&t?t:n(e),a){case s.yp.EU:return`atv-ps-eu${(0,s.is)()}`;case s.yp.FE:return`atv-ps-fe${(0,s.is)()}`;case s.yp.NA:default:return`atv-ps${(0,s.is)()}`}},n=e=>{switch(e){case s.HZ.UK:case s.HZ.DE:case s.HZ.ROW_EU:case s.HZ.ROE_EU:return s.yp.EU;case s.HZ.JP:case s.HZ.ROW_FE:return s.yp.FE;case s.HZ.US:case s.HZ.ROW_NA:default:return s.yp.NA}}},"./src/shared/imageUtils/imageUtils.ts":(e,t,a)=>{"use strict";a.d(t,{GH:()=>r,Ro:()=>_,rB:()=>n});var s=a("./src/util/utils/imageUtils/imageUtils.tsx"),i=a("./src/shared/utils/utils.ts");let n,r;!function(e){e.WIDTH="WIDTH",e.HEIGHT="HEIGHT"}(n||(n={})),function(e){e.gif="gif",e.jpg="jpg",e.pkmz="pkmz",e.png="png",e.webp="webp"}(r||(r={}));const o=[1.5,2],l={phone:"20em",phablet:"28em","phone-landscape":"47em",tablet:"55em","tablet-landscape":"65em",desktop:"90em",largeScreen:"118em","tablet-lowest":"28em","laptop-lowest":"55em","desktop-lowest":"80em","desktop-hd-lowest":"100em","desktop-uhd-lowest":"150em"},c=RegExp(`(${Object.keys(l).join("|")})$`),d=e=>"string"==typeof e?e:`${e}px`,u=(e,t,a,s,i,n,r)=>{const l=o.map((o=>`${m({src:e,value:t*o,baseType:a,type:s,skipStripTags:i,supportTransparency:n,autoCrop:r})} ${o}x`));return l&&l.unshift(m({src:e,value:t,baseType:a,type:s,skipStripTags:i,supportTransparency:n,autoCrop:r})),l&&l.join(", ")},m=({src:e,value:t,baseType:a,type:i,skipStripTags:r,supportTransparency:o=!1,autoCrop:l})=>{if(!e)return"";const c=new s.e(e);return r||c.stripTags(),l&&c.autoCrop(),a===n.HEIGHT?c.scaleHeight(t):c.scaleWidth(t),i?c.forceFormat(i):o&&c.formatHasTransparencySupport&&c.forceFormat(c.urlFileFormat),c.getImageUrl()},p=(e,t,a,s,i,n)=>t.map((t=>`${m({src:e,value:t,baseType:a,type:s,skipStripTags:i,autoCrop:n})} ${t}w`)).join(", "),g=(e,t=[])=>{const a=t.reduce(((e,t)=>{const[a,s]=Object.entries(t)[0],i=(e=>e.replace(c,(e=>`width: ${l[e]}`)))(a);return i&&s&&e.push(`(${i}) ${d(s)}`),e}),[]);return a.push(d(e)),a.join(", ")},_=({src:e,baseValue:t,baseType:a=n.WIDTH,srcSizes:s,format:r,resolutions:l,skipStripTags:c,supportTransparency:d,autoCrop:_})=>{if(a===n.HEIGHT&&s)throw new Error("BaseType.HEIGHT can't be used with srcSizes. It is only compatible with format and resolutions.");if((0,i.xb)(s))return{src:m({src:e,value:t,baseType:a,type:r,skipStripTags:c,supportTransparency:d,autoCrop:_}),srcSet:u(e,t,a,r,c,d,_)};const h=s.map((e=>Object.values(e)[0]));h.push(t);const b=((e,t=o)=>{const a=t.reduce(((t,a)=>[...t,...e.map((e=>Math.floor(e*a)))]),e);return Array.from(new Set(a)).sort(i.ws)})(h,l);return{src:m({src:e,value:t,baseType:a,type:r,skipStripTags:c,autoCrop:_}),srcSet:p(e,b,a,r,c,_),sizes:g(t,s)}}},"./src/shared/player/index.tsx":(e,t,a)=>{"use strict";a.d(t,{Sz:()=>b,c4:()=>_});var s=a("./node_modules/react/index.js"),i=a("./src/util/utils/network.ts"),n=a("./src/util/logger/logger.ts"),r=a("./src/shared/player/integration/index.ts"),o=a("./src/shared/player/integration/config.ts"),l=a("./src/shared/SPA/SpaContext.tsx");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=(e,t)=>{const a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,!0,t),document.dispatchEvent(a)},u=e=>{document.getElementsByTagName("body")[0].style.overflow=e},m=e=>{document.getElementById(o.c6).className=e},p=e=>{m("dv-player-fullscreen"),u("hidden")},g=e=>{m(""),u("visible")},_=e=>{window.location.assign(e)};class h extends s.Component{constructor(e){super(e),c(this,"logger",void 0),c(this,"player",void 0),c(this,"unsubscribeHandlers",void 0),c(this,"loadPlayer",(async(e=!1)=>{const{playerConfig:t,whisperCacheData:a,liveIncompatibleCallback:s,capabilities:i,onPlayerLoadErrorCallback:n}=this.props;try{this.player=await(0,r.MD)(t,s,this.logger,e),this.attachRefreshEventHandlers(),a&&await this.handlePrepareRequest(a)}catch(e){this.logFatal(e),n&&n()}})),c(this,"handleNetworkChange",(async()=>{!this.player&&i.Zc.isOnline()&&this.loadPlayer(!0)})),this.logger=e.logger||new n.Oc(`DVWebNode:Player:${this.props.playerConfig.pageType}`),this.unsubscribeHandlers=[]}logFatal(e){this.count(e).fatal(e)}count(e){const{pageType:t}=this.props.playerConfig;return this.logger.count(`${e}:${t}`,1,!1)}async attachRefreshEventHandlers(){const{onPlay:e,onClosed:t,onClosedStoreResumeTime:a,onAsinChanged:s,onInitialized:i,onPrepare:n,onPlayerCapabilities:r}=this.props,o=this.player,l=(e,t)=>{this.unsubscribeHandlers.push(o.on(e,(e=>t(e))))};l("play",p),l("play",(e=>d("PVVideoPlayerPlay",e))),e&&l("play",e),l("closed",g),l("closed",(e=>d("PVVideoPlayerClosed",e))),t&&l("closed",t),a&&l("closed",a),l("asinChanged",(e=>d("PVVideoPlayerTitleChanged",e))),s&&l("asinChanged",s),l("initialized",(()=>d("PVVideoPlayerInitialized",void 0))),i&&l("initialized",i),l("prepare",(()=>d("PVVideoPlayerPrepared",void 0))),n&&l("prepare",n),l("aborted",(()=>{this.count("DVWebPlayer:aborted")}));const c=await o.capabilities;c.supportsDrm||this.count("DVWebPlayer:missingDrm"),d("PVVideoPlayerCapabilities",c),r&&r(c)}async componentDidMount(){this.loadPlayer(),i.Zc.onNetworkChange(this.handleNetworkChange)}componentDidUpdate({playbackLinkData:e,whisperCacheData:t}){const{playbackLinkData:a,whisperCacheData:s}=this.props;a&&!e&&this.handlePlayRequest(a),!a&&s&&s!==t&&this.handlePrepareRequest(s)}async componentWillUnmount(){this.unsubscribeHandlers.forEach((e=>e())),i.Zc.offNetworkChange(this.handleNetworkChange)}async handlePrepareRequest(e){this.player&&this.player.prepare(e)}async handlePlayRequest({contentConfig:e,signInUrl:t}){const{onPlayFailure:a}=this.props;let s=!0;if(this.player)if(t)_(t);else try{await this.player.play(e)}catch(t){this.logger.fatal("Playback failed",{contentConfig:e},t),s=!1}else this.count("DVWebPlayer:notReady"),s=!1;!s&&a&&a()}render(){return null}}const b=(0,l.cG)(h)},"./src/shared/player/integration/config.ts":(e,t,a)=>{"use strict";a.d(t,{QD:()=>c,c6:()=>i,it:()=>d});var s=a("./src/shared/utils/analytics/analytics.ts");const i="dv-web-player",n=()=>{let e=document.getElementById(i);return e||(e=document.createElement("div"),e.setAttribute("id",i),document.body.appendChild(e),e)},r={Detail:"f22dbddb-ef2c-48c5-8876-bed0d47594fd",DetailAndroid:"898eb3b8-96c0-4c6b-baa3-2d253860be8c",DetailAndroidMShop:"98d383c3-632a-4872-8ef8-7cc10d033066",Live:"b4f777f2-3153-4c55-8aa7-4645fe264be1",Home:"9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",AIVWatchlist:"8e377055-28b0-4475-a3e7-f909ebcad6f1",YourVideoLibrary:"1e2f7321-aba1-4bd3-bdfc-a63777d869af",SPA:"933adc82-54c5-4fe0-9273-f1e188456161",PersonPage:"41e7965c-89b8-4967-bdd3-74e2a8f06636",ChannelsSubscription:"66d54d28-d754-4b11-b74d-427a03909d93",Following:"74392e3c-4c00-479e-90c8-f4d42aae8705",EPG:"bdd74b62-c362-46c8-86f0-47e300702607",Search:"47c62571-58c9-4572-9a75-52f68e019cea",Browse:"47c62571-58c9-4572-9a75-52f68e019cea"},o=e=>r[e],l={Detail:s.am.Detail,Live:s.am.Live,DetailAndroid:s.am.Detail,DetailAndroidMShop:s.am.Detail,Home:s.am.Home,AIVWatchlist:s.am.MyStuff,YourVideoLibrary:s.am.MyStuff,SPA:s.am.SPA,PersonPage:s.am.Person,ChannelsSubscription:s.am.Channels,Following:s.am.Following,EPG:s.am.EPG,Search:s.am.Search,Browse:s.am.Browse},c=e=>l[e],d=e=>{const{marketplaceId:t,sessionId:a,playerBeta:s,customerId:i,locale:r,pageType:l,deviceId:c}=e,d={marketplaceId:t,sessionId:a,playerBeta:s,customerId:i,locale:r,deviceId:c,domElement:n(),clientId:o(l)};var u;return(u=d)&&Object.entries(u).forEach((([e,t])=>void 0===t&&delete u[e])),d}},"./src/shared/player/integration/index.ts":(e,t,a)=>{"use strict";a.d(t,{MD:()=>_});var s=a("./src/util/utils/pubSub.ts"),i=a("./src/shared/player/integration/loader.ts"),n=a("./src/shared/player/integration/config.ts"),r=a("./src/shared/player/integration/logger.ts"),o=a("./src/shared/utils/analytics/analytics.ts");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=["closed","asinChanged","aborted"],d=e=>({trailer:e.trailer,position:Number(e.position||0),videoType:e.videoType,live:Boolean(e.lcid),asin:e.lcid||e.asin,ref:e.ref,playbackEnvelope:e.playbackEnvelope,privacyConsent:e.privacyConsent,playbackExperiences:e.playbackExperiences}),u=e=>({...e,startEpoch:Math.floor(Date.now()/1e3)}),m="dv_play_action";class p{constructor(e,t,a,i){l(this,"player",void 0),l(this,"logger",void 0),l(this,"liveIncompatibleCallback",void 0),l(this,"playerConfigData",void 0),l(this,"playerConfig",void 0),l(this,"currentContentConfig",null),l(this,"pubSub",void 0),l(this,"lastTitle",void 0),l(this,"capabilities",void 0),l(this,"_test",void 0),l(this,"playbackLaunchedTime",void 0),this.player=e,this.logger=i,this._test={player:e},this.liveIncompatibleCallback=a,this.pubSub=(0,s.M)(),this.playerConfigData=t,this.playerConfig=(0,n.it)(t),this.lastTitle=null,this.init(),this.capabilities=new Promise((t=>{e.on("playerCapabilities",(({capabilities:e})=>{t(e)}))}))}init(){const e=(0,n.QD)(this.playerConfigData.pageType);c.forEach((e=>{this.player.on(e,(async t=>{await this.callAction(e),t&&"asinChanged"===e&&(this.lastTitle=u(d(t)))}))})),this.player.on("playing",(t=>{if(this.playbackLaunchedTime){const a=Date.now()-this.playbackLaunchedTime;this.logCounter("playbackdelay",a),this.playbackLaunchedTime=null,(0,r.r1)({action:o.m0.PlaybackStarted,refTag:m,pageType:e})(t)}})),this.on("closed",(0,r.r1)({action:o.m0.PlayerClosed,refTag:m,pageType:e})),this.on("asinChanged",(0,r.r1)({action:o.m0.PlayerTitleChanged,refTag:m,pageType:e})),this.on("beforePlay",(e=>this.liveIncompatibleCheck(e))),this.player.initialize(this.playerConfig)}async callAction(e){return await Promise.all(this.pubSub.query(e).map((e=>e(this.lastTitle))))}on(e,t){return this.pubSub.subscribe(e,t)}async prepare(e){await this.callAction("prepare"),this.player.prepare(this.playerConfig,{...d(e),immediateConsumption:!1})}async liveIncompatibleCheck(e){var t;if(!("Live"!==(t=e).videoType&&!t.lcid&&!t.live||(await this.capabilities).supportsLive))throw this.liveIncompatibleCallback(),"Live Incompatible"}async play(e){const t=d(e);this.lastTitle=u(t),this.currentContentConfig=t,this.playbackLaunchedTime=Date.now(),await this.callAction("beforePlay"),await this.callAction("play");const a={clickstreamRefMarker:e.ref||"atv_dp_unknown",playbackInitiatedTime:Date.now()};this.player.play(this.playerConfig,t,a)}async stop(){await this.callAction("stop"),this.player.initialize(this.playerConfig),this.currentContentConfig=null,this.playbackLaunchedTime=null,await this.callAction("closed")}logCounter(e,t=1){const a=this.currentContentConfig&&this.currentContentConfig.videoType||"unknown",s=`dvweb:playback:${e}:${this.playerConfigData.pageType}:web:${a}`.toLocaleLowerCase();this.logger.count(s,t,!1)}}const g={instance:null},_=(e,t,a,s=!1)=>(g.instance=!s&&g.instance||(0,i.N)().then((s=>new p(s,e,t,a))).catch((t=>{throw(0,r.cn)({action:o.m0.PlayerFailedToLoad,pageType:(0,n.QD)(e.pageType),refTag:m}),t})),g.instance)},"./src/shared/player/integration/loader.ts":(e,t,a)=>{"use strict";a.d(t,{N:()=>s});const s=()=>new Promise(((e,t)=>{const a=e=>{fetch(`/gp/video/ajax/log-device-info.html/ref=atv_log_device_info?description=DVWebPlayer${e}:LoadFailed`),t(`DVWebPlayer:${e}:load:failure`)};window.WebPlayer?e(new window.WebPlayer):null==document.getElementById("player-script")?a("Tag"):(()=>{let t,s=0;const i=()=>{s<60?(s+=1,window.WebPlayer?e(new window.WebPlayer):t=setTimeout(i,1e3)):a("Timeout")};i(),document.getElementById("player-script").onload=()=>{clearTimeout(t),window.WebPlayer?e(new window.WebPlayer):a("Loading")}})()}))},"./src/shared/player/integration/logger.ts":(e,t,a)=>{"use strict";a.d(t,{cn:()=>i,r1:()=>n});var s=a("./src/shared/utils/analytics/analytics.ts");const i=(e,t)=>{const a=((e,t)=>{const{trailer:a,asin:i,lcid:n,startEpoch:r}=t||{},o={trailer:a,titleId:i,lcid:n,secondsPlayed:e.action!==s.m0.PlaybackClicked&&r?Math.floor(Date.now()/1e3)-r:void 0};return(0,s.tu)(e,o)})(e,t);fetch(a,{method:"POST"})},n=e=>t=>i(e,t)},"./src/shared/player/integration/playbackArea.tsx":(e,t,a)=>{"use strict";a.d(t,{ET:()=>h,XM:()=>D,cr:()=>f});var s,i=a("./node_modules/react/index.js"),n=a("./src/shared/deeplink/index.ts"),r=a("./src/util/logger/logger.ts"),o=a("./src/util/wrappers/ArgsContext.tsx"),l=a("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js"),c=a("./src/shared/SPA/SpaContext.tsx"),d=a("./src/shared/player/integration/logger.ts"),u=a("./src/shared/player/integration/config.ts"),m=a("./src/shared/SPA/UWPNotifier/index.ts"),p=a("./src/shared/utils/analytics/analytics.ts"),g=a("./src/shared/utils/analytics/recordReftag.tsx");const _=new r.Oc("DVWebNode:deeplink"),h=i.createContext({onPlay:null}),b=(e,t,a)=>{(0,n.b)(a)[t]({url:e.playbackUrl,fallbackUrl:e.fallbackUrl})},v=e=>(null==e?void 0:e.isBonus)||(null==e?void 0:e.sequenceNumber)&&e.sequenceNumber>=1&&e.sequenceNumber<=3,D=({onPlay:e,launchType:t,trailerLaunchType:a,configPageType:i,playerCapabilities:r,onDownloadAppRequired:o,enableMarinTracking:c,recordTerritory:h,hasDownloaded:D,triggerNativeOfflinePlayback:E,triggerXpOfflinePlayback:f,isDownloadQueuedOrDownloading:y,pageType:w,subPageType:T,isDCSAnalyticsCallEnabled:I})=>C=>{var N;const S=(0,u.QD)(i),P=null!=C&&C.triggerLocation?`${i}:${C.triggerLocation}`:i,x="dv_play_action",k=null==C||null===(N=C.contentConfig)||void 0===N?void 0:N.asin,R=e?t=>{(0,d.cn)({action:p.m0.PlaybackClicked,pageType:S,refTag:x},t.contentConfig),e(t)}:null;const{trailer:V}=C.contentConfig;!c||V||C.isBonus||("Detail"===i||"DetailAndroid"===i?"Prime"===C.subscriptionName&&(0,l.sendConversionTrackingRequest)(l.ConversionType.SVOD_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"):(0,l.sendConversionTrackingRequest)(l.ConversionType.UNDEFINED_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"));const A=(C.contentConfig.videoType||"").toLowerCase(),W="trailer"===A?a:t;if(_.count(`DVWebNode:LaunchType:${i}:${W}`,1,!1),_.count(`DVWebNode:LaunchType:${i}:${A}:${W}`,1,!1),"feature"===A&&(e=>!e||e.supportsDrm)(r)&&["MSHOP_ANDROID_EMBEDDED","URL_EMBEDDED"].includes(W))"MSHOP_ANDROID_EMBEDDED"===W?((e,t,a,s,i)=>{var n;const r=()=>{v(t)&&e?e(t):i?i():b(t,a,s)};null===(n=window.P)||void 0===n||n.when("mash").execute((e=>{e.canLaunchIntentURL({url:t.playbackUrl,successCallback:e=>{e?b(t,a,s):r()},failCallback:()=>{r()}})}))})(R,C,W,I,o):((e,t,a,s)=>{v(t)&&e?e(t):b(t,a,s)})(R,C,W,I);else if("EMBEDDED"===W)if("feature"===A&&D&&D(k,m._5.UWP)&&E)E(k),s.count("PlaybackOrigin:NativePlayback",{[P]:1});else if(R){let e="fallback-streaming";"feature"===A&&D&&D(k,m._5.XP)&&f?(f(C,R),s.count("PlaybackOrigin:XpPlayback",{[P]:1})):R(C),"feature"===A&&y&&y(k)&&s.count(e,{downloadingInComplete:1}),C.refMarker&&(0,g.XQ)(C.refMarker,w,T,k,void 0,void 0,I)}else(0,d.cn)({action:p.m0.PlaybackClickUnhandled,pageType:S,refTag:x},C.contentConfig),_.error("Missing onPlay for Embedded Player",{pageType:w,subPageType:T});else(0,n.b)(I).hasOwnProperty(W)?b(C,W,I):((0,d.cn)({action:p.m0.PlaybackClickUnhandled,pageType:S,refTag:x},C.contentConfig),_.error("Unhandled Playback",{pageType:w,subPageType:T,launchTypeToApply:W}))},E=({onPlay:e,launchType:t,trailerLaunchType:a,configPageType:s,playerCapabilities:n,onDownloadAppRequired:r,children:o,enableMarinTracking:l,context:c,hasDownloaded:d,triggerNativeOfflinePlayback:u,triggerXpOfflinePlayback:m,isDownloadQueuedOrDownloading:p,pageType:g,subPageType:_,isDCSAnalyticsCallEnabled:b})=>{const v=D({onPlay:e,launchType:t,trailerLaunchType:a,configPageType:s,playerCapabilities:n,onDownloadAppRequired:r,enableMarinTracking:l,recordTerritory:null==c?void 0:c.recordTerritory,hasDownloaded:d,triggerNativeOfflinePlayback:u,triggerXpOfflinePlayback:m,isDownloadQueuedOrDownloading:p,pageType:g,subPageType:_,isDCSAnalyticsCallEnabled:b});return i.createElement(h.Provider,{value:{onPlay:v,launchType:t}},o)};E.displayName="PlaybackArea";const f=(0,c.cG)((0,o.s6)(E))},"./src/shared/utils/LoggerWrapper.ts":(e,t,a)=>{"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{G:()=>i});class i{constructor(e){s(this,"logger",void 0),s(this,"warn",((e,t)=>{this.logger.warn(e,t)})),s(this,"error",((e,t,a)=>{this.logger.error(t,a,e)})),s(this,"debug",((e,t)=>{this.logger.debug(e,t)})),s(this,"info",((e,t)=>{this.logger.info(e,t)})),s(this,"fatal",((e,t,a)=>{this.logger.fatal(t,a,e)})),s(this,"count",((e,t)=>{this.logger.count(e,1,!1),t&&Object.entries(t).forEach((([t,a])=>{this.logger.count(`${e}::${t}`,a,!1)}))})),this.logger=e}}},"./src/shared/utils/analytics/analytics.ts":(e,t,a)=>{"use strict";a.d(t,{am:()=>r,m0:()=>n,tu:()=>o});var s=a("./src/util/utils/url.ts");let i,n,r;!function(e){e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.CarouselScroll="CarouselScroll",e.Download="Download",e.PlayDownload="PlayDownload",e.PlayStream="PlayStream",e.PlayTrailer="PlayTrailer",e.Purchase="Purchase",e.Rent="Rent",e.Search="Search",e.Share="Share",e.SignIn="SignIn",e.SignOut="SignOut"}(i||(i={})),function(e){e.PlaybackClicked="PlaybackClicked",e.PlaybackClickUnhandled="PlaybackClickUnhandled",e.PlaybackStarted="PlaybackStarted",e.PlayerTitleChanged="PlayerTitleChanged",e.PlayerClosed="PlayerClosed",e.PlayerFailedToLoad="PlayerFailedToLoad",e.SignupClick="SignupClick",e.SignupComplete="SignupComplete",e.PurchaseClicked="PurchaseClicked",e.PurchaseCompleted="PurchaseCompleted"}(n||(n={})),function(e){e.Browse="ATVBrowse",e.Channels="ATVSubscription",e.Detail="ATVDetail",e.Downloads="ATVDownloads",e.Following="ATVMyStuffFollowing",e.Home="ATVHome",e.MyStuff="ATVMyStuff",e.Person="ATVPerson",e.Search="ATVSearch",e.WatchParty="ATVWatchParty",e.EPG="ATVLive",e.Live="DetailLive",e.SPA="DVSPA"}(r||(r={}));const o=({action:e,pageAction:t,pageType:a,refTag:i="dv_analytics"},n={})=>{const r={action:e,pageType:a,pageAction:t,...n},o=Object.keys(r).filter((e=>!!r[e])).reduce(((e,t)=>(e[t]=`${r[t]}`,e)),{});return`${(0,s.v)("/gp/video/ajax/analytics.html/ref=")}${i}?${new URLSearchParams(o).toString()}`}},"./src/shared/utils/analytics/recordReftag.tsx":(e,t,a)=>{"use strict";a.d(t,{$5:()=>o,Jd:()=>c,XQ:()=>l});var s=a("./node_modules/react/index.js"),i=a("./src/util/utils/url.ts"),n=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),r=a("./src/shared/deviceProxy/PVClickstreamClient.ts");const o=(e,t,a,s,n,r)=>{const o=[t&&`pageType=${t}`,t&&a&&`subPageType=${a}`,s&&`pageAction=${s}`,n&&`hitType=${n}`,r&&`titleId=${r}`].filter(Boolean);return`${(0,i.v)("/gp/video/ajax/analytics.html/ref=")}${e}${o.length>0?`?${o.join("&")}`:""}`};function l(e,t,a,s,i,l,c,d,u){if(c){const o=u||(0,r.U)();null==o||o.action({action:i||n.W0.DefaultAction,pageTypeId:s,ref:e,sPageType:a,pType:t,hitType:l,clientVariantOverride:d})}else fetch(o(e,t,a,i,l,s),{method:"POST"})}const c=({refTag:e,pageType:t,subPageType:a,children:i,className:n="",pageAction:r,hitType:o,titleId:c,isDCSAnalyticsCallEnabled:d})=>e?s.createElement("span",{className:n,onClick:()=>l(e,t,a,c,r,o,d)},i):s.createElement(s.Fragment,null,"children")},"./src/shared/utils/events/index.ts":(e,t,a)=>{"use strict";a.d(t,{q:()=>s});const s=e=>{e&&e.nativeEvent&&e.nativeEvent.ack&&e.nativeEvent.ack(e.currentTarget)}},"./src/shared/utils/maturityRatings/ratingMap.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>s});const s={NZ:{g:{stringId:"vcc_maturity_rating_oflc_g",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/g.png"},pg:{stringId:"vcc_maturity_rating_oflc_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/pg.png"},13:{stringId:"vcc_maturity_rating_cvod_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/13.png"},rp13:{stringId:"vcc_maturity_rating_oflc_rp13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp13.png"},r13:{stringId:"vcc_maturity_rating_oflc_r13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r13.png"},r15:{stringId:"vcc_maturity_rating_oflc_r15",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r15.png"},m:{stringId:"vcc_maturity_rating_oflc_m",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/m.png"},16:{stringId:"vcc_maturity_rating_cvod_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/16.png"},rp16:{stringId:"vcc_maturity_rating_oflc_rp16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp16.png"},r16:{stringId:"vcc_maturity_rating_oflc_r16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r16.png"},18:{stringId:"vcc_maturity_rating_cvod_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/18.png"},rp18:{stringId:"vcc_maturity_rating_oflc_rp18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp18.png"},r18:{stringId:"vcc_maturity_rating_oflc_r18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r18.png"},r:{stringId:"vcc_maturity_rating_oflc_r",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r.png"}},BR:{l:{stringId:"vcc_maturity_rating_djctq_l",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/l.png"},10:{stringId:"vcc_maturity_rating_djctq_10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/10.png"},12:{stringId:"vcc_maturity_rating_djctq_12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/12.png"},14:{stringId:"vcc_maturity_rating_djctq_14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/14.png"},16:{stringId:"vcc_maturity_rating_djctq_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/16.png"},18:{stringId:"vcc_maturity_rating_djctq_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/18.png"},al:{stringId:"vcc_maturity_rating_adjctq_al",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/al.png"},a10:{stringId:"vcc_maturity_rating_adjctq_a10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a10.png"},a12:{stringId:"vcc_maturity_rating_adjctq_a12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a12.png"},a14:{stringId:"vcc_maturity_rating_adjctq_a14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a14.png"},a16:{stringId:"vcc_maturity_rating_adjctq_a16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a16.png"},a18:{stringId:"vcc_maturity_rating_adjctq_a18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a18.png"}},ZA:{a:{stringId:"vcc_maturity_rating_fpb_a",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/a.png"},pg:{stringId:"vcc_maturity_rating_fpb_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/pg.png"},"7-9-pg":{stringId:"vcc_maturity_rating_fpb_7_9_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/7-9-pg.png"},"10-12-pg":{stringId:"vcc_maturity_rating_fpb_10_12_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/10-12-pg.png"},13:{stringId:"vcc_maturity_rating_fpb_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/13.png"},16:{stringId:"vcc_maturity_rating_fpb_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/16.png"},18:{stringId:"vcc_maturity_rating_fpb_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/18.png"},x18:{stringId:"vcc_maturity_rating_fpb_x18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/x18.png"},xx:{stringId:"vcc_maturity_rating_fpb_xx",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/xx.png"}}}},"./src/shared/utils/modalTrigger/ModalTrigger.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>l});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Modal.js"),n=a("./src/shared/utils/events/index.ts"),r=a("./src/shared/utils/modalTrigger/ModalTrigger.module.scss");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends s.Component{constructor(...e){super(...e),o(this,"state",{isVisible:Boolean(this.props.isOpen)}),o(this,"openModal",(()=>{this.setState({isVisible:!0})})),o(this,"openModalClickHandler",(e=>{(0,n.q)(e),this.openModal(),e.preventDefault()})),o(this,"closeModal",(()=>{this.setState({isVisible:!1}),this.props.onClose&&this.props.onClose()}))}componentDidUpdate(e){const{isOpen:t}=this.props;t!==e.isOpen&&this.setState({isVisible:t})}render(){const e=this.closeModal,t={openModal:this.openModal,openModalClickHandler:this.openModalClickHandler,closeModal:e},a={closeModal:e},{modalContent:n,modalHeader:o,modalFooter:l,toggle:c,modalId:d,className:u,size:m}=this.props,p="function"==typeof l?l(a):l,g="function"==typeof o?o(a):o,_="function"==typeof n?n(a):n;return s.createElement(s.Fragment,null,this.state.isVisible&&s.createElement(i.Modal,{className:u||"av-narrow",isVisible:!0,onClose:e,footer:s.createElement("div",{className:r.Z.modalFooter},p),header:s.createElement("h3",null,g),modalId:d,size:m},_),c&&c(t))}}},"./src/shared/utils/utils.ts":(e,t,a)=>{"use strict";a.d(t,{R4:()=>s,ws:()=>n,xb:()=>i});a("./node_modules/react/index.js");const s=(e,t)=>{const a=e||.7*window.innerWidth,s=t||.7*window.innerHeight;return`toolbar=0, status=0, width=${a}, height=${s}, top=${window.top?window.top.outerHeight/2+window.top.screenY-s/2:0}, left=${window.top?window.top.outerWidth/2+window.top.screenX-a/2:0}`},i=e=>!e||0===e.length,n=(e,t)=>e-t},"./src/widgets/DVWebNodeDetail/actions/banner.ts":(e,t,a)=>{"use strict";a.d(t,{I:()=>i,y:()=>n});var s=a("./src/widgets/DVWebNodeDetail/actions/constants.ts");const i=e=>({type:s.k.CreateBanner,payload:e}),n=()=>({type:s.k.ClearBanner})},"./src/widgets/DVWebNodeDetail/actions/constants.ts":(e,t,a)=>{"use strict";let s;a.d(t,{k:()=>s}),function(e){e.STORE_MERGE="@@dp/STORE_MERGE",e.CHANGE_PAGE="@@dp/CHANGE_PAGE",e.LIVE_PAGE="@@lp/LIVE_PAGE",e.WatchlistToggle="@@dp/WatchlistToggle",e.WatchlistToggleFailed="@@dp/WatchlistToggleFailed",e.ClearWatchlistToggleFailure="@@dp/ClearWatchlistToggleFailure",e.GetDevices="@@dp/GetDevices",e.GetDevicesFailed="@@dp/GetDevicesFailed",e.RefreshEpisode="@@dp/ActionBox/RefreshEpisode",e.RefreshAtfActionBox="@@dp/ActionBox/RefreshAtfActionBox",e.RefreshBtfActionBoxes="@@dp/ActionBox/RefreshBtfActionBoxes",e.TriggerPurchase="@@dp/ActionBox/TriggerPurchase",e.PurchaseCancelled="@@dp/ActionBox/PurchaseCancelled",e.PurchaseFailed="@@dp/ActionBox/PurchaseFailed",e.TriggerRefund="@@dp/ActionBox/TriggerRefund",e.RefundFailed="@@dp/ActionBox/RefundFailed",e.RefundCancelled="@@dp/ActionBox/RefundCancelled",e.CreateBanner="@@dp/CreateBanner",e.ClearBanner="@@dp/ClearBanner",e.SetPlayerCapabilities="@@dp/player/SetPlayerCapabilities",e.PlaybackStart="@@dp/player/PlaybackStart",e.PlaybackFailed="@@dp/player/PlaybackFailed",e.PlaybackClosed="@@dp/player/PlaybackClosed",e.UpdateShowCancellationWinback="@@dp/UpdateShowCancellationWinback",e.TriggerUpsellApp="@@dp/TriggerUpsellApp",e.ClearUpsellApp="@@dp/ClearUpsellApp",e.GetTranslatedReviews="@@dp/GetTranslatedReviews",e.TranslatedReviewsFailed="@@dp/TranslatedReviewsFailed",e.ChangeTranslatedReviewStatus="@@dp/ChangeTranslatedReviewStatus",e.UpdatedBatchTranslationStatus="@@dp/UpdatedBatchTranslationStatus",e.SetPublicName="@@dp/SetPublicName",e.UpdatePublicNameState="@@dp/UpdatePublicNameState",e.SubmitCustomerReview="@@dp/SubmitCustomerReview",e.UpdateSubmissionState="@@dp/UpdateSubmissionState",e.UpdateRatingState="@@dp/UpdateRatingState",e.ClearSubmissionStates="@@dp/ClearSubmissionStates",e.DeleteCustomerReview="@@dp/DeleteCustomerReview",e.FetchReviewEligibility="@@dp/FetchReviewEligibility",e.ClearReviewEligibility="@@dp/ClearReviewEligibility"}(s||(s={}))},"./src/widgets/DVWebNodeDetail/actions/index.ts":(e,t,a)=>{"use strict";a.d(t,{k:()=>s.k});var s=a("./src/widgets/DVWebNodeDetail/actions/constants.ts")},"./src/widgets/DVWebNodeDetail/actions/purchase.ts":(e,t,a)=>{"use strict";a.d(t,{MW:()=>g,NT:()=>u,P:()=>m,jF:()=>d,lQ:()=>c});var s=a("./src/widgets/DVWebNodeDetail/actions/constants.ts"),i=a("./src/util/utils/device.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),o=a("./node_modules/@amzn/dv-web-node-reftags/index.js");const{deviceTypeId:l}=(0,i.dz)(),c=(e,t,a,i,n,o)=>{const c=[r.EZ,"Purchase",i?"continuePurchase":"startPurchase"].join("_");t.info(`[Purchase] - Initiating purchase of offerToken ${a}`).count(c,1,!1).count(`${c}_${l}`,1,!1),e({type:s.k.TriggerPurchase,payload:{offerToken:a,continueToken:i,refTag:n,gtiRedirect:o}})},d=({dispatch:e})=>e({type:s.k.PurchaseCancelled}),u=({dispatch:e,reload:t=!1})=>e({type:s.k.PurchaseFailed,payload:{reload:t}}),m=(e,t)=>a=>({logger:s})=>{var i;const c=t(),d=(0,n.G)(c);d||s.fatal("[Purchase] - No ongoing purchase found").count(`${r.EZ}_Purchase_refreshAfterDoneError`,1,!1).count(`${r.EZ}_Purchase_refreshAfterDoneError_${l}`,1,!1);const u=d&&d.details,m=u&&!(0,r.JQ)(u.offer.purchaseData.isSeasonPurchase)&&u.canonicalId||void 0,p=null===(i=c.requestContext)||void 0===i?void 0:i.queryParameters;return p&&(p.wpCode||p.wpTitleId)?((e,t,a)=>{const s="Retail"===a.domain?"/gp/video/watchparty":"/watchparty";e?window.location.assign(`${s}/${e}/ref=${(0,o.i)("atv_dp_wp_join_ap")}`):window.location.assign(`${s}/ref=${(0,o.i)("atv_dp_wp_create_ap")}?titleId=${t}`)})(p.wpCode&&p.wpCode[0],p.wpTitleId&&p.wpTitleId[0],c.requestContext):a(m)(e,t)};let p=null;const g=(e,t)=>a=>async({logger:s})=>{const{purchase:i}=t();if(!i)return;const{offerToken:n,continueToken:o,refTag:d}=i;n!==p?(p=n,await a()(e,t),c(e,s,n,o,d)):(s.fatal(`[Purchase] - CSRF Callback already called once for offerToken ${n}`).count(`${r.EZ}_Purchase_refreshCSRFError`,1,!1).count(`${r.EZ}_Purchase_refreshCSRFError_${l}`,1,!1),p=null,u({dispatch:e,logger:s,reload:!0}))}},"./src/widgets/DVWebNodeDetail/actions/refund.ts":(e,t,a)=>{"use strict";a.d(t,{C0:()=>d,H8:()=>l,YV:()=>c,dz:()=>o});var s=a("./node_modules/@amzn/dvui/dist/Block.js"),i=a("./src/widgets/DVWebNodeDetail/actions/constants.ts"),n=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=a("./src/widgets/DVWebNodeDetail/actions/banner.ts");const o=({dispatch:e})=>e({type:i.k.RefundCancelled}),l=({dispatch:e})=>{e({type:i.k.RefundFailed})},c=(e,t,a)=>{t.info(`Initiating refund of titleId ${a}`).count(`${n.EZ}_Refund_Purchase`,1,!1),e({type:i.k.TriggerRefund,payload:{titleId:a}})},d=(e,t,a)=>(i,n)=>async()=>{if(await a()(i,n),(((t||{}).clientContract||{}).taskData||{}).viewData){const{title:a,message:n}=t.clientContract.taskData.viewData;i((0,r.I)({type:"Success"===e?s.MessageTypes.success:s.MessageTypes.warning,string:n,heading:a}))}}},"./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx":(e,t,a)=>{"use strict";a.d(t,{k:()=>Y});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Spacer.js"),n=a("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),r=a("./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx"),o=a("./node_modules/react-redux/es/index.js"),l=a("./node_modules/@amzn/dvui/dist/Button.js"),c=a("./node_modules/@amzn/dvui/dist/Text.js"),d=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),m=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),p=a("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx"),g=a("./node_modules/classnames/index.js"),_=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),h=a("./node_modules/@amzn/dv-web-node-reftags/index.js");const b=(0,o.$j)((e=>({requestContext:(0,d.Iz)(e)})))((({svodWinners:e,forceDoubleHeight:t})=>{const a=e.metadata&&e.metadata.label,i=e.metadata&&e.metadata.refMarker||(0,h.i)("atv_unknown");return s.createElement(m.i,{modalId:"dvui-close-overlay-mwts",modalContent:s.createElement(p.M,{svodWinners:e}),toggle:({openModalClickHandler:e})=>s.createElement(_._,{refTag:i,className:u.Z.fullWidthPhablet},s.createElement(l.PurchaseButton,{"data-ux-click":!0,onClick:e,className:g(u.Z.fullWidthPhablet,"more-subscription-options-button"),forceDoubleHeight:t},s.createElement(c.Text,{string:a})))})}));var v=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),D=a("./src/shared/utils/utils.ts"),E=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),f=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),y=a("./src/util/api/WPSClient.ts"),w=a("./src/util/api/util.ts"),T=a("./src/util/utils/history.ts"),I=a("./node_modules/@amzn/dvui/dist/Spinner.js"),C=a("./src/widgets/DVWebNodeDetail/actions/constants.ts");var N=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx");const S="_1Rf__P",P="_3oazIf",x="_3u1od2",k="_2zZu7L",R="_1MF2EW",V="C-sHj4";var A=a("./node_modules/@amzn/dvui/dist/TextBlock.js"),W=a("./src/shared/player/index.tsx"),L=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),O=a("./src/util/utils/marketplace.ts"),B=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=new y.e,j=e=>s.createElement("div",{className:x},s.createElement("strong",null,e.title)),F=e=>s.createElement(A.TextBlock,{className:P},e.message),H=e=>s.createElement("div",null,e.requestInProgress?s.createElement("div",{className:R},s.createElement(i.Spacer,{space:i.spacerSpacing.xs},s.createElement(I.Spinner,null),s.createElement(c.Text,{tag:"div",className:V},e.requestInProgressMessage))):s.createElement("div",null,s.createElement(i.Spacer,{space:i.spacerSpacing.xs},s.createElement(_._,{refTag:(0,h.i)("atv_dp_ks_yes")},s.createElement(l.PrimaryButton,{name:"keep-subscription-now",onClick:()=>{e.onKeepSubscription()}},s.createElement(c.Text,{string:e.confirmationLabel}))),s.createElement(_._,{refTag:(0,h.i)("atv_dp_ks_no")},s.createElement(l.Button,{name:"keep-subscription-not-now",onClick:e.closeModal},s.createElement(c.Text,{string:e.cancellationLabel})))),e.requestFailed&&s.createElement("div",{className:k},s.createElement(N.H1,{stringID:"AVOD_DP_E_error_text"}))));class z extends s.Component{constructor(e){super(e),M(this,"keepSubscriptionUrlParam",void 0),M(this,"closeModal",(()=>{this.setState({isModalOpen:!1})})),M(this,"clearErrors",(()=>{this.setState({requestFailed:!1})})),M(this,"onKeepSubscription",(async()=>{this.setState({requestInProgress:!0}),this.clearErrors();const e=[O.HZ.US,O.HZ.JP];U.SetSubscriptionNextRenewal({__type:"atv.wps#SetSubscriptionNextRenewalInput",context:this.props.requestContext,enrollmentKey:this.props.enrollmentKey,renewEnabled:!0,token:this.props.token,allowsRecognized:e.includes(this.props.requestContext.marketplaceID)}).then((e=>{e.success?(this.closeModal(),this.props.updateShowCancellationWinback(!1)):this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})})).catch((e=>{if(e instanceof w.lY){var t=Object.assign({},this.props.requestContext.queryParameters);t[this.keepSubscriptionUrlParam]=["true"];const e=(0,L.P_)({parameters:t,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},this.props.pageTitleId,(0,h.i)("atv_dp_ks_sign_in")),a=(0,L.Md)({parameters:this.props.requestContext.queryParameters,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},(0,h.i)("atv_dp_ks_sign_in"),e);(0,W.c4)(a)}else this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})}))})),M(this,"validateProps",(()=>!!(this.props.message&&this.props.label&&this.props.token&&this.props.enrollmentKey&&this.props.cancellationLabel&&this.props.confirmationLabel))),this.state={isModalOpen:!1,requestInProgress:!1,requestFailed:!1},this.keepSubscriptionUrlParam="keepSubscription"}componentDidMount(){if(!this.state.isModalOpen&&!this.state.requestFailed&&this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam]&&"true"===this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam][0]){const e=new URL(window.location.href);e.searchParams.delete(this.keepSubscriptionUrlParam),(0,T.qA)(null,document.title,e.href),this.setState({isModalOpen:!0}),this.onKeepSubscription()}}render(){return this.validateProps()&&this.props.showCancellationWinback?s.createElement("div",{className:`${u.Z.stretchHeight} ${u.Z.fullWidthPhablet}`},s.createElement(m.i,{size:"s",isOpen:this.state.isModalOpen,modalId:"dvui-close-overlay-atf-keepSubscriptionModal",className:S,modalContent:()=>s.createElement(F,{message:this.props.message}),modalHeader:()=>s.createElement(j,{title:this.props.confirmationLabel}),onClose:this.closeModal,modalFooter:()=>s.createElement(H,{closeModal:this.closeModal,onKeepSubscription:this.onKeepSubscription,confirmationLabel:this.props.confirmationLabel,cancellationLabel:this.props.cancellationLabel,requestFailed:this.state.requestFailed,requestInProgress:this.state.requestInProgress,requestInProgressMessage:this.props.requestInProgressMessage,isDCSAnalyticsCallEnabled:this.props.isDCSAnalyticsCallEnabled}),toggle:()=>s.createElement(_._,{refTag:(0,h.i)("atv_dp_ks")},s.createElement(l.PurchaseButton,{"data-ux-click":!0,onClick:()=>{this.clearErrors(),this.setState({isModalOpen:!0})},forceDoubleHeight:!0,name:"keep-subscription",className:`${u.Z.fullWidth}`},s.createElement(c.Text,{string:this.props.label})))})):null}}const $=(0,o.$j)((e=>({requestContext:(0,d.Iz)(e).rawContext,pageTitleId:e.pageTitleId,showCancellationWinback:e.winback.showCancellationWinback,originalURI:(0,d.Iz)(e).originalURI,isRetail:(0,d.Iz)(e).isRetail,isDCSAnalyticsCallEnabled:(0,B.h8)(e)})),(e=>({updateShowCancellationWinback:t=>((e,t)=>{e({type:C.k.UpdateShowCancellationWinback,payload:{showCancellationWinback:t}})})(e,t)})))(z),q="Collapsed",G="Expanded",Z=({forceDoubleHeight:e,titleId:t,svodWinners:a})=>{if(!a)return[];switch(a.metadata&&a.metadata.behaviour){case q:return(0,f.Ic)(a)?[s.createElement(b,{key:"MsoButton",svodWinners:a,titleId:t,forceDoubleHeight:e})]:[];case G:return(0,E.$c)(a).filter((e=>(0,D.xb)(e.problems))).map(((t,a)=>s.createElement(r.R,{key:`SvodButton-${a}`,svodAction:t,forceDoubleHeight:e})));default:return[]}},Q=({tvodWinners:e,tvodButtonScope:t,svodWinnerChildrenExists:a})=>(0,E.YD)(e).map(((e,i)=>s.createElement(n.DA,{key:`TvodButton-${i}`,tvodAction:e,scope:t,svodWinnerChildrenExists:a}))),Y=({acquisitionActions:e,titleId:t,tvodButtonScope:a,forceDoubleHeight:n,tapsExperimentToken:r})=>{const o=(e=>{const t=e&&e.cancellationWinbackToken&&e.cancellationWinbackToken.cancellationWinbackStringInfo,a=e&&e.cancellationWinbackToken;return t&&s.createElement($,{label:t.label,message:t.modalMessage,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,enrollmentKey:a.enrollmentId,token:a.csrfToken})})(r);if(!e)return o?s.createElement(i.Spacer,{className:u.Z.fullWidthPhablet,alignItems:i.spacerAlignItems.top},o):null;const{tvodWinners:l,svodWinners:c}=e,d=(0,f.Ic)(c)&&(0,v.Db)(c.children),m=[o,...Z({forceDoubleHeight:n,titleId:t,svodWinners:c}),...Q({tvodWinners:l,tvodButtonScope:a,svodWinnerChildrenExists:d})].filter(Boolean);return(0,D.xb)(m)?null:s.createElement(i.Spacer,{className:u.Z.fullWidthPhablet,alignItems:i.spacerAlignItems.top},m)}},"./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx":(e,t,a)=>{"use strict";a.d(t,{M:()=>R,C:()=>k});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Alert.js"),n=a("./node_modules/@amzn/dvui/dist/Spacer.js"),r=a("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),o=a("./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx"),l=a("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx"),c=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),d=a("./src/shared/utils/utils.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),m=a("./src/util/utils/strings.ts");const p="_3FevTR",g="_18cEc-",_="BGWBAK",h="Fk_mk-",b="_20rKJm",v="_3VsqmF",D="xLG7dw",E="IcrXck",f="_3LqNN-",y="fVr7kD";var w=a("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),T=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),I=a("./src/shared/imageUtils/imageUtils.ts"),C=a("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx");function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},N.apply(this,arguments)}const S=({label:e,sequenceNumber:t})=>{const a=t&&t.toString()||"";return s.createElement("h3",{className:p},(0,m.VJ)(e,{episodeNumber:a}))},P={alt:"",baseValue:C.y7,baseType:I.rB.HEIGHT,format:I.GH.png},x=(e,t)=>s.createElement("div",{key:`actionGroup-${t}`,className:v},e.children.map(((e,t)=>{return(0,u.ok)(e)&&(0,d.xb)(e.problems)&&s.createElement("div",{className:D,key:`SvodButton-${t}`},e.image&&(a=s.createElement("div",null,s.createElement(T.t,N({},P,{src:e.image}))),(i=e.channelLink)?s.createElement("a",{href:i},a):a),e.message&&s.createElement("p",{className:g},e.message),s.createElement(o.R,{className:_,svodAction:e}));var a,i}))),k=({moreWaysToWatch:e,closeModal:t,sequenceNumber:a,toggleGiftCardModal:o})=>{if(!e)return null;const m=(0,c.$0)(e);return(0,d.xb)(m)?null:s.createElement("div",{className:`dv-mwtw-modal ${h}`},m.map(((e,o)=>(e=>e.children&&e.children[0]&&(0,u.ok)(e.children[0]))(e)?x(e,o):((e,t,a,o)=>s.createElement("div",{key:`actionGroup-${t}`,className:b},e.metadata&&e.metadata.label&&s.createElement(S,{label:e.metadata.label,sequenceNumber:a}),s.createElement(n.Spacer,{space:n.spacerSpacing.xs},s.createElement(w.y,{Tag:i.InfoAlert,messages:e.metadata.messages})),e.children.map(((t,a)=>(0,u.E2)(t)&&s.createElement("div",{key:`TvodButton-${a}`,className:E},s.createElement(n.Spacer,{space:n.spacerSpacing.xs,className:1==e.children.length?f:y},s.createElement(w.y,{Tag:i.InfoAlert,messages:t.displayMessages})),s.createElement(r.DA,{tvodAction:t,scope:r.b2.MORE_WAYS_TO_WATCH,closeModal:o}))))))(e,o,a,t))),s.createElement(l.h,{placement:"MWTW",closeModal:t,toggleGiftCardModal:o}))},R=({svodWinners:e})=>(0,d.xb)(e.children)?null:s.createElement("div",{className:`dv-mwts-modal ${h}`},x(e,0))},"./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx":(e,t,a)=>{"use strict";a.d(t,{R:()=>d});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Button.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js"),o=a("./node_modules/classnames/index.js"),l=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),c=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const d=(0,i.$j)((e=>({requestContext:(0,l.Iz)(e)})))((({svodAction:e,requestContext:{isRetail:t},className:a,forceDoubleHeight:i})=>{const l="PRIME"!==e.sType||t?n.PurchaseButton:n.PrimeButton;return s.createElement(l,{className:o({[a]:!!a},c.Z.fullWidthPhablet,"dv-signup-button"),href:e.signupLink,forceDoubleHeight:i},s.createElement(r.Text,{string:e.label}))}))},"./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx":(e,t,a)=>{"use strict";a.d(t,{DA:()=>E,b2:()=>D});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Button.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js"),o=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),c=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=a("./src/widgets/DVWebNodeDetail/actions/purchase.ts"),u=a("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),m=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),p=a("./node_modules/classnames/index.js");const g="_2kzSeI";var _=a("./src/shared/deeplink/index.ts"),h=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},b.apply(this,arguments)}const v=({hiddenInputs:e={},children:t,id:a,...i})=>s.createElement("form",b({},i,{id:a,method:"POST"}),t,Object.keys(e).map(((t,a)=>s.createElement("input",{key:`ActionFormImput-${a}`,type:"hidden",name:t,value:e[t]}))));let D;!function(e){e.ACTION_BOX="ab",e.EPISODE_LIST="el",e.MORE_WAYS_TO_WATCH="mw",e.MORE_WAYS_TO_SUBSCRIBE="mws",e.EPISODE_LIST_MORE_WAYS_TO_WATCH="el_mw"}(D||(D={}));const E=(0,l.n)((0,i.$j)(((e,t)=>{const a=(0,u.n)(e)[t.tvodAction.offerToken];return{requestContext:(0,o.Iz)(e),canonicalTitleId:a&&a.canonicalId,isMShop:(0,m.gK)(e),purchaseLaunchType:e.pageContext.purchaseLaunchType,offerClarityEnabled:e.pageContext.features&&"true"===e.pageContext.features.offerClarityEnabled,isDCSAnalyticsCallEnabled:(0,m.h8)(e)}}),((e,{logger:t})=>({triggerPurchase:(a,s)=>(0,d.lQ)(e,t,a,void 0,s)})))((({tvodAction:e,requestContext:{isRetail:t},scope:a,triggerPurchase:i,canonicalTitleId:o,closeModal:l,isMShop:d,purchaseLaunchType:u,offerClarityEnabled:m,isDCSAnalyticsCallEnabled:b,svodWinnerChildrenExists:E=!1})=>{const f=e&&e.purchaseData;if(!f)return null;const y=!m||E||l?((e="DEFAULT")=>"HIGHLIGHTED"===e.toUpperCase()?n.Purchase:n.Default)(e.style):n.Purchase;if("EMBEDDED"!==u){if(!f.appPurchaseUrl||"NONE"===u)return null;const t=`${f.appPurchaseUrl}&ref_=${e.refMarker}`,a=e=>{(0,_.b)(b)[u]({url:t,fallbackUrl:f.appFallbackUrl}),e.preventDefault()};return s.createElement(n.Button,{href:d?void 0:t,className:p(c.Z.fullWidthPhablet,"tvod-button"),onClick:a,use:y},s.createElement(r.Text,{string:e.label}))}{const{family:d,videoQuality:u="",offerType:m,nonJsPurchaseUrl:_}=f,b=e.refMarker,E=t?{refTag:b,offerToken:e.offerToken,csrfToken:e.csrfToken,asin:e.asin}:{offerToken:e.offerToken},w=async t=>{o&&((e,t)=>{const a=t===D.EPISODE_LIST||t===D.EPISODE_LIST_MORE_WAYS_TO_WATCH;if("function"!=typeof document.querySelector||!a)return;const s=document.querySelector(`[for="selector-${e}"]`);s&&("function"==typeof s.scrollIntoViewIfNeeded?s.scrollIntoViewIfNeeded(!1):"function"==typeof s.scrollIntoView&&s.scrollIntoView(!0))})(o,a),l&&l(),i(e.offerToken,b),t.preventDefault()},T=`${a}-${d}-${u}-${m}`.toLowerCase(),I=`tvod-btn-${T}`;return s.createElement(v,{id:I,action:_,className:`${c.Z.fullWidthPhablet} ${g}`,hiddenInputs:E,"data-automation-id":T},s.createElement(h._,{refTag:b},s.createElement(n.ConfirmButton,{onlyConfirmOnTouchDevices:!0,onClick:w,className:p("tvod-button",{"av-button":!e.style}),type:"submit",use:y},s.createElement(r.Text,{string:e.label}))),s.createElement("div",{dangerouslySetInnerHTML:{__html:`<script>\n              document.getElementById("${I}").addEventListener("submit",\n                function() {\n                  ue && ue.count('DVWebNodeDetail-PurchaseCoreExpJs', 1);\n                  return true;\n                }\n              )\n            <\/script>`}}))}})))},"./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx":(e,t,a)=>{"use strict";a.d(t,{Pz:()=>y});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Spacer.js"),n=a("./node_modules/@amzn/dvui/dist/Text.js"),r=a("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx"),o=a("./src/widgets/DVWebNodeDetail/components/refund/refund.tsx"),l=a("./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx"),c=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),d=a("./src/shared/utils/utils.ts"),u=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),m=a("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),p=a("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),g=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),_=a("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss"),h=a("./node_modules/classnames/index.js"),b=a("./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx"),v=a("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx"),D=a("./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx");const E=({acquisitionActions:e})=>{if(!e)return null;const t=(e=>{const t=(0,u.RE)(e);return t.length>0?t.map(((e,t)=>s.createElement(n.Text,{key:`tvod-inner-${t}`,string:e}))):(0,c.VF)((0,u.YD)(e).filter((e=>!(0,d.xb)(e.displayMessages))).map(((e,t)=>e.displayMessages.map(((e,a)=>s.createElement(n.Text,{key:`${t},${a}`,string:e}))))))})(e.tvodWinners);return(0,d.xb)(t)?null:s.createElement(i.Spacer,{alignItems:i.spacerAlignItems.stretch},t)},f=({watchPartyAction:e})=>{const t=s.useRef(null);return e?s.createElement("div",{className:h(g.Z.stretchHeight,_.Z.linkWrapper),ref:t},s.createElement("span",{className:_.Z.watchParty},s.createElement(D.vY,{watchPartyAction:e,buttonOrLinkProps:{buttonClassName:_.Z.linkWrapperTarget},containerRef:t}))):null};class y extends s.Component{constructor(e){var t,a,s;super(e),s=()=>{this.setState({giftCardModalIsVisible:!this.state.giftCardModalIsVisible})},(a="toggleGiftCardModal")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={giftCardModalIsVisible:!1}}render(){const{acquisitionActions:e,titleID:t,sequenceNumber:a,isPurchasing:n,isRefunding:c,rawContext:d,watchPartyAction:u}=this.props,D=e&&e.moreWaysToWatch,y=n||c;return s.createElement("div",{className:h({[_.Z.isProcessingTransaction]:y},_.Z.wrapper),"data-testid":"dp-btf-action-box"},s.createElement(b._,null,s.createElement(E,{acquisitionActions:e}),s.createElement(i.Spacer,{alignItems:i.spacerAlignItems.stretch},s.createElement("div",{className:h(_.Z.acquisition,g.Z.fullWidthPhablet)},s.createElement(l.k,{acquisitionActions:e,titleId:t,tvodButtonScope:m.b2.EPISODE_LIST,forceDoubleHeight:!1})),s.createElement(i.Spacer,{alignItems:i.spacerAlignItems.stretch},s.createElement(r.t,{titleId:t,sequenceNumber:a,moreWaysToWatch:D,toggleGiftCardModal:this.toggleGiftCardModal,componentClassName:_.Z.linkWrapper,linkClassName:_.Z.linkWrapperTarget}),s.createElement(f,{watchPartyAction:u})),s.createElement(o.N,{titleId:t})),y&&s.createElement(p.K2,null)),s.createElement(v.fs,{isOpen:this.state.giftCardModalIsVisible,onClose:this.toggleGiftCardModal,requestContext:d}))}}},"./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx":(e,t,a)=>{"use strict";a.d(t,{K2:()=>c,UQ:()=>d});var s=a("./node_modules/react/index.js"),i=a("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss"),n=a("./node_modules/@amzn/dvui/dist/Spinner.js"),r=a("./node_modules/classnames/index.js"),o=a.n(r),l=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");const c=({children:e=null,className:t=""})=>s.createElement("div",{className:[t,i.Z.disableOverlay].join(" ")},e),d=(0,l.QI)((({text:e,useSmallSpinner:t=!1,className:a=""})=>s.createElement(c,{className:a},s.createElement("div",{className:i.Z.messageWrapper},s.createElement("div",{className:t?i.Z.smallSpinnerWrapper:i.Z.spinnerWrapper},s.createElement(n.Spinner,{fillHeight:!0,testID:"dp-spinner"})),e&&s.createElement("div",null,e)))),(({text:e})=>s.createElement("div",{className:o()(i.Z.messageWrapperNextGen)},s.createElement("div",{className:i.Z.spinnerNextGen},s.createElement(n.Spinner,{fillHeight:!0,testID:"dp-spinner"})),e&&s.createElement("div",null,e))))},"./src/widgets/DVWebNodeDetail/components/badges/ad.tsx":(e,t,a)=>{"use strict";a.d(t,{Ad:()=>l});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Icon.js"),n=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const o="Ps5WvF",l=({isAd:e})=>{const{getString:t}=s.useContext(r.h);return(0,n.JQ)(e)&&s.createElement("span",{"data-automation-id":"ad-badge",className:o,title:t("DV_DP_ARIA_audio_description"),"aria-label":t("DV_DP_ARIA_audio_description"),role:"text"},s.createElement(i.Icon,{use:i.IconType.AUDIO_DESCRIPTION}))||null}},"./src/widgets/DVWebNodeDetail/components/badges/amazonRating.tsx":(e,t,a)=>{"use strict";a.d(t,{gC:()=>D,jn:()=>h});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Link.js"),n=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),r=a("./src/widgets/DVWebNodeDetail/utils/numberUtils.ts");const o="SSMUJf",l="_335x9u";var c=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),d=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),u=a("./src/shared/utils/analytics/recordReftag.tsx"),m=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),p=a("./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.tsx"),g=a("./node_modules/@amzn/dvui/dist/StarRating.js");const _="customer-review-badge",h="customer-review-section",b=`#${h}`,v=({titleId:e,useDetailsTab:t})=>s.createElement(i.Link,{href:t?b:`/review/create-review/ref=acr_dpinstantvideo_solicit?ie=UTF8&asin=${e}`,onClick:e=>{const a=(0,p.O1)();t&&a&&(e.preventDefault(),a.click())}},s.createElement(n.H1,{stringID:"DV_DP_first_review"})),D=({amazonRating:e,pageTitleId:t,isRetail:a,reviewsNotAllowed:i=!1,isCerberusChild:n,isFirestormReviewsEnabled:h,isReviewsSubmissionEnabled:D,checkReviewEligibility:E})=>{const{getString:f,clickStreamPageType:y,clickStreamSubPageType:w,refTagTitleId:T,isDCSAnalyticsCallEnabled:I}=s.useContext(d.h);if(!a&&!h)return null;const C=e&&e.value,N=e&&e.count,S=e&&e.countFormatted;if(!N||!C)return i||(0,c.JQ)(n)||h&&!D?null:s.createElement(v,{titleId:t,useDetailsTab:h||E});const P=f("DV_DP_ARIA_amazon_rating",{ratingValue:(0,r.d)(C,10).toString(),customerCount:N.toString()}),x=e=>{(0,u.XQ)((0,m.i)("atv_dp_cr_atf_rl"),y,w,T,void 0,void 0,I);const t=(0,p.O1)();t&&(e.preventDefault(),t.click())};return k=s.createElement("div",{className:o},s.createElement(g.StarRating,{rating:C,className:l}),s.createElement("span",null,"(",S,")")),(0,c.JQ)(n)?s.createElement("span",{"aria-label":P,"data-automation-id":_,role:"img"},k):s.createElement("a",{href:b,onClick:x,"aria-label":P,"data-automation-id":_},k);var k}},"./src/widgets/DVWebNodeDetail/components/badges/rating.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>_});var s=a("./node_modules/react/index.js"),i=a("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),n=a("./node_modules/@amzn/dvui/dist/MaturityRating.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js");const o="T2CIjV",l="_1bVHQ0";var c=a("./src/shared/utils/maturityRatings/ratingMap.ts"),d=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),u=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx");const m="DVWebNode::DetailPage::RatingBadge::TypeError",p=(e,t,a,i,d,u,m,p)=>{var g,_;const h="number"==typeof t?t.toString():t.toUpperCase(),b=p||m&&(null===(g=c.D[m])||void 0===g||null===(_=g[e])||void 0===_?void 0:_.url);return b?s.createElement("span",{role:"text","aria-label":u,className:o},s.createElement("img",{className:l,src:b,alt:a,title:a})):s.createElement("span",{role:"text","aria-label":u,className:o},s.createElement(n.MaturityRating,{rating:h,locale:i,title:a,"data-testid":"rating-badge"},d&&s.createElement(r.Text,{string:d})))},g=({id:e,displayText:t,description:a,localRatingLink:s,logoUrl:i},n,r)=>p(e,t,a,void 0,s,r||a,n,i),_=(0,u.n)((({ratingBadge:e,notRatedString:t,suitableForAriaLabel:a,logger:n})=>{var r;const o=s.useContext(d.h),l=null==o||null===(r=o.requestContext)||void 0===r?void 0:r.recordTerritory;if(!e)return null;if((0,i.j9)(e)){"number"==typeof e.displayText&&(null==n||n.count(`${m}::AMR`,1,!0));const s=e.description===t?e.description:a;return g(e,l,s)}return(0,i.nn)(e)?("number"==typeof e.displayText&&(null==n||n.count(`${m}::RegulatoryRating`,1,!0)),g(e,l)):(0,i.ws)(e)?("number"==typeof e.simplifiedId&&(null==n||n.count(`${m}::LocalRating`,1,!0)),(({id:e,countryCode:t,simplifiedId:a,description:s,localRatingLink:i,logoUrl:n},r)=>p(e,a,s,t.toLowerCase(),i,s,r,n))(e,l)):null}))},"./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx":(e,t,a)=>{"use strict";a.d(t,{r:()=>n});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Badge.js");const n=({runtime:e,ariaLabel:t})=>e&&s.createElement(i.Badge,{use:i.badges.TEXT},s.createElement("span",{role:"text","aria-label":t,"data-automation-id":"runtime-badge"},e))||null},"./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>l});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Icon.js");const n="_1dPCaP";var r=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),o=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const l=({subtitles:e,isClosedCaption:t})=>{const{getString:a}=s.useContext(o.h);return Boolean(e&&e.length||(0,r.JQ)(t))&&s.createElement("span",{"data-automation-id":"subtitles-badge","aria-label":a("DV_WEB_SETTINGS_HEAD_SUBTITLES"),role:"text"},s.createElement(i.Icon,{className:n,use:i.IconType.SUBTITLES}))||null}},"./src/widgets/DVWebNodeDetail/components/carousel/carousel.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>d});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Container.js"),r=a("./src/widgets/DVWebNodeDetail/selectors/carousel.ts"),o=a("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx"),l=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},c.apply(this,arguments)}const d=(0,i.$j)((e=>({showCarousels:(0,r.i)(e),carousels:(0,r.b)(e)})))((({carousels:e,showCarousels:t})=>t?s.createElement(n.Container,{className:l.Z.pageSection,testID:"caw-carousel-section"},e.map(((e,t)=>null===e?null:s.createElement(o.J,c({},e,{key:`carousel-collection-${e.index}-${t}`}))))):null))},"./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx":(e,t,a)=>{"use strict";a.d(t,{J:()=>G});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Carousel.js"),n=a("./node_modules/react-redux/es/index.js"),r=a("./node_modules/@amzn/dvui/dist/Badge.js"),o=a("./node_modules/@amzn/dvui/dist/Icon.js"),l=a("./node_modules/@amzn/dvui/dist/Packshot.js"),c=a("./src/util/utils/retryComponent.ts"),d=a("./src/util/utils/titleType.ts"),u=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");const m="_3nLd6J",p="_3Cq6JO",g="_32IiXp",_="_1qXSbl",h="_1EcvsB",b="mWsquZ",v="i7Ilo5",D="_2Pakoo",E="_1JCQut",f="_1yGQE6",y="XGzKjH",w="_2E_W5F",T="_1kj931",I="_3nGLRK",C="_2COy4O",N="_1mzYKQ";var S=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),P=a("./src/widgets/DVWebNodeDetail/utils/liveState.ts"),x=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),k=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),R=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),V=a("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),A=a("./src/widgets/Explore/Hover/utils.ts"),W=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),L=a("./src/widgets/Explore/ClientImpressions/ImpressionTracker.tsx"),O=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},B.apply(this,arguments)}function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=s.lazy((()=>(0,c.k)((()=>Promise.all([a.e(9351),a.e(2539),a.e(8584)]).then(a.bind(a,"./src/widgets/Explore/Hover/index.ts"))),"detail-hover",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:Hover",1)})).then((({Hover:e})=>({default:e}))))),j=s.lazy((()=>(0,c.k)((()=>a.e(8918).then(a.bind(a,"./src/widgets/Explore/EntitlementCue/EntitlementCue.tsx"))),"detail-entitlement",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:EntitlementCue",1)})).then((({EntitlementCue:e})=>({default:e}))))),F=({detail:e})=>{const t=e.liveState&&(0,x.JQ)(e.liveState.isLive),a=e.liveState&&e.liveState.text,i=e.liveState&&e.liveState.id,n=e.dateTimeBadge,o=t?r.badges.LIVE:r.badges.CRITICAL;return s.createElement("div",{className:f},(0,P.dn)(i)||t?a&&s.createElement("span",{className:y},s.createElement(r.Badge,{use:o},a)):n&&s.createElement("span",{className:y},s.createElement(r.Badge,{use:r.badges.WHITE},n)))};class H extends s.PureComponent{constructor(e){super(e),M(this,"elementRef",void 0),M(this,"setElementRef",(e=>{var t;const{impressionData:a,carouselIndex:s,idx:i,detail:n,requestContext:r,titleId:o,pageLink:l,impressionAnalytics:c}=this.props,d=null==n||null===(t=n.images)||void 0===t?void 0:t.covershot;this.elementRef=e,a&&d&&L.F.observe(this.elementRef,{collectionImpressionData:a,titleID:(r.isRetail?null==n?void 0:n.asin:null==n?void 0:n.gti)||o,carouselPosition:s,itemPosition:i,imageURL:d,refMarker:(0,L.$)(l),widgetType:"TitleCard",itemAnalytics:c},r.rawContext)})),this.state={isHoverReady:!1,entitlementCue:e.entitlementCue,hoverIsExpanded:!1}}componentDidMount(){this.state.isHoverReady||this.setState({isHoverReady:!0})}componentWillUnmount(){this.elementRef&&this.props.impressionData&&L.F.unobserve(this.elementRef)}render(){const{detail:e,imdb:t,titleId:a,idx:i,requestContext:n,pageContext:r,pageLink:c,watchlistAction:u,refTagPrefix:m,isElcano:p,enableAutoPlayingInBTF:b,resetFocusForCarousel:E,requestFocusForCarousel:f,impressionData:y}=this.props,{isHoverReady:w,entitlementCue:T}=this.state,I=n.isRetail;if(!e)return null;const C=(I?e.asin:e.compactGti)||a,N=(I?e.asin:e.gti)||(0,d.rM)(a)?a:void 0,P=m?`${m}${i+1}`:`atv_dp_sims_c_${i+1}`,R=(0,S.P_)({parameters:n.queryParameters,originalURI:n.originalURI,isRetail:I},C,P),W=r.features&&"true"===r.features.offerClarityEnabled,M=c||R,H=(I||p)&&(0,x.JQ)(e.isPrime)&&!W,z=e.images&&e.images.covershot,$={alt:e.title,src:z,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},q={url:M,alt:e.title,isPrime:H},G=N&&r.enableHover,Z=G?"dv-universal-hover-enabled":void 0,Q=s.createElement("div",{className:_},s.createElement(l.Packshot,B({},q,{className:Z,asin:N}),s.createElement("div",{className:g},s.createElement("div",{className:v},s.createElement(o.Icon,{use:o.IconType.SMILE})),z&&s.createElement(k.t,B({className:h,classNameContainer:h},$)))),w&&W&&T&&s.createElement(s.Suspense,{fallback:s.createElement(s.Fragment,null)},s.createElement(j,B({},T,{containerRef:this.props.carouselContainerRef,hoverIsExpanded:this.state.hoverIsExpanded,increaseZIndex:this.state.hoverIsExpanded,tooltip:this.state.hoverIsExpanded?T.tooltip:void 0}))),s.createElement(F,{detail:e})),Y=e.liveState&&(0,x.JQ)(e.liveState.isLive)?e.liveState.text:void 0,X=e.liveState||e.dateTimeBadge||e.location?{status:e.liveState&&e.liveState.id,label:e.liveState&&e.liveState.text,timeBadge:e.dateTimeBadge,venue:e.location}:void 0,K=e.ratingBadge,J=K?(0,V.ws)(K)?{rating:K.simplifiedId,locale:K.countryCode.toLowerCase(),title:K.description,link:K.localRatingLink}:{rating:K.displayText,title:K.description,link:K.localRatingLink}:void 0,ee=I?e.amazonRating:void 0,te=t&&t.scoreFormatted;return w&&G?s.createElement("div",{ref:this.setElementRef},s.createElement(s.Suspense,{fallback:Q},s.createElement("div",(0,A.Wx)((e=>w&&this.setState({hoverIsExpanded:e}))),s.createElement(O.h.Consumer,null,(({pageType:t,subPageType:a,clickstream:i,isDCSAnalyticsCallEnabled:n})=>s.createElement(U,{className:D,title:e.title,titleID:N,synopsis:e.synopsis,liveBadgeLabel:Y,imdbRating:te,releaseYear:e.releaseYear,runtime:e.runtime,hasSubtitles:(0,x.Db)(e.subtitles),showPrerollsInHover:b,watchlistAction:u,placementType:"DETAIL_BTF",url:M,customerReviews:ee,liveInfo:X,contentMaturityRating:J,onMouseOver:()=>f&&f(),onMouseLeave:()=>E&&E(),entitlementCue:T,prefetchOnVisible:W,onEnrich:e=>this.setState({entitlementCue:e.cardBundle&&e.cardBundle.entitlementCue}),signInTrailerURL:e.signInTrailerURL,isOnLastCarousel:this.props.isOnLastCarousel,isFirstCard:this.props.isFirst,impressionsRef:y?this.elementRef:void 0,carouselRefTag:(0,L.$)(c),pageType:t,subPageType:a,clickstream:i,isDCSAnalyticsCallEnabled:n},Q)))))):Q}}const z=(0,n.$j)(((e,t)=>({detail:e.detail[R.Xt][t.titleId],imdb:e.imdb[t.titleId],watchlistAction:e.hoverWatchlist[t.titleId],requestContext:(0,u.Iz)(e),pageContext:e.pageContext,pageLink:e.pageLink[t.titleId],isElcano:Boolean(e.features.isElcano),entitlementCue:e.entitlementCue[t.titleId],enableAutoPlayingInBTF:(0,W.VL)(e),impressionAnalytics:e.impressionAnalytics[t.titleId]})))(H);var $=a("./node_modules/classnames/index.js");function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class G extends s.PureComponent{constructor(e){super(e),q(this,"state",void 0),q(this,"containerRef",void 0),this.state={isCarouselFocused:!1},this.containerRef=s.createRef()}setFocusedCarousel(e){this.setState({isCarouselFocused:e===this.props.index})}resetFocusedCarousel(){this.setState({isCarouselFocused:!1})}componentDidUpdate(){if(!this.state.isCarouselFocused){const e=document.activeElement,t=this.containerRef&&this.containerRef.current;t&&e&&t.contains(e)&&e.blur()}}getCarouselCollectionItem(e,t,a){const{refTagPrefix:i,index:n,isLast:r,impressionData:o}=this.props;return s.createElement("div",{className:N},s.createElement(z,{key:`carousel-collection${a?`-${a}`:""}-${e}-${t}`,idx:t,titleId:e,refTagPrefix:i,requestFocusForCarousel:()=>this.setFocusedCarousel(n),resetFocusForCarousel:()=>this.resetFocusedCarousel(),carouselContainerRef:this.containerRef,isFirst:0==t,isOnLastCarousel:r,impressionData:o,carouselIndex:n}))}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:a,isLast:n}=this.props;return 0===t.length?null:s.createElement("div",{className:$(`dv-hover-packshot-container ${m}`,{[w]:1===a}),ref:this.containerRef},e&&s.createElement("h1",{className:p}," ",e," "),s.createElement(O.h.Consumer,null,(({formFactor:e})=>{const a=["Tablet","Phone"].includes(e);return s.createElement(i.Carousel,{className:$(b,{[T]:this.state.isCarouselFocused,[C]:n}),leftScrollButtonClassName:$(I,{[E]:a}),rightScrollButtonClassName:$(I,{[E]:a})},t.map(((e,t)=>this.getCarouselCollectionItem(e,t))))})))}}},"./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>G});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Icon.js"),r=a("./node_modules/@amzn/dvui/dist/Container.js"),o=a("./node_modules/@amzn/dvui/dist/Text.js"),l=a("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx");const c="_3MUwh1",d="_2qxCUH",u="_1EDVkk",m="_2cWRFD",p="BOWhoV",g="_2HvOya",_="_3A_0MI",h="_8Yq3WS",b="VSf1a7",v="p8Afly",D="_1DMa3P";var E=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),f=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),y=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),w=a("./node_modules/classnames/index.js"),T=a("./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts"),I=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),C=a("./src/util/wrappers/ArgsContext.tsx"),N=a("./src/util/wrappers/LoggersContext.tsx");const S="_2xP0Cm",P="_19bcWO",x="_1Ay6Wu",k="Dpi33q";var R=a("./src/util/api/WPSClient.ts"),V=a("./src/util/api/util.ts"),A=a("./src/util/types/wps/following.ts"),W=a("./node_modules/@amzn/dvui/dist/Callout.js");function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=({errorMessage:e})=>s.createElement(W.Callout,{use:"error",content:e,position:"bottom",startOpen:!0,size:"s",dismissSeconds:5});class B extends s.Component{constructor(e){super(e),L(this,"constructInput",(e=>{const{endpoint:t,context:a}=e,{query:s}=t,{tagValue:i,scopeValue:n,personIdValue:r,tokenValue:o,personNameValue:l}=this.getQueryValues(s);return{context:a,personId:r,personName:l,tag:i,scope:n,token:o}})),L(this,"onSubmit",(e=>{e.preventDefault(),this.submitForm()})),L(this,"updateErrorMessage",(e=>{this.setState({errorMessage:e})})),L(this,"submitForm",(()=>{const{logger:e,onSuccess:t,onFailureWithMessage:a,onUnexpectedFailure:s}=this.props;(new R.e).ToggleFollowing(this.constructInput(this.props)).then((e=>{(0,V.aP)(e.success)?t&&t(e):a?a(e):this.updateErrorMessage(e.message)})).catch((t=>{s&&s(t),e.error(t)}))})),L(this,"getQueryValues",(e=>({tagValue:e.tag,scopeValue:e.scope,personIdValue:e.personId,tokenValue:e.token,personNameValue:e.personName}))),L(this,"getButtonStyle",((e,t)=>{const a=t?x:P;switch(e){case"primary":default:return a;case"secondary":return P;case"undo-link":return k}})),this.state={errorMessage:e.errorMessage}}componentDidUpdate(e){e.errorMessage!==this.props.errorMessage&&this.updateErrorMessage(this.props.errorMessage)}render(){const{tag:e,buttonType:t,text:a,endpoint:i,className:n,enableErrorMessage:r}=this.props,{errorMessage:o}=this.state,l=e===A.Ou.Unfollow,{partialURL:c,query:d}=i,{tagValue:u,scopeValue:m,personIdValue:p,tokenValue:g,personNameValue:_}=this.getQueryValues(d),h=this.getButtonStyle(t||"primary",l),b=w(S,null!=n?n:"");return s.createElement("div",{className:b},s.createElement("form",{action:c,method:"POST",onSubmit:this.onSubmit},s.createElement("input",{name:"token",type:"hidden",value:g}),s.createElement("input",{name:"tag",type:"hidden",value:u}),s.createElement("input",{name:"scope",type:"hidden",value:m}),s.createElement("input",{name:"personId",type:"hidden",value:p}),_&&s.createElement("input",{name:"personName",type:"hidden",value:_}),s.createElement("button",{type:"submit",className:h},a)),r&&o&&s.createElement(O,{errorMessage:o}))}}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},M.apply(this,arguments)}const U=e=>{const{tag:t,text:a,endpoint:s}=e;return{tag:t,text:a,endpoint:s}};class j extends s.Component{constructor(e){var t,a,s;super(e),s=e=>{e.newAction&&this.setState({toggleFollowingAction:e.newAction})},(a="onToggleFollowingSuccess")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={toggleFollowingAction:U(e.toggleFollowingAction)}}render(){const{buttonType:e,className:t,enableErrorMessage:a,context:i,logger:n}=this.props,{toggleFollowingAction:r}=this.state;return s.createElement(B,M({},r,{context:i,logger:n,onSuccess:this.onToggleFollowingSuccess,buttonType:e,className:t,enableErrorMessage:a}))}}const F=(0,C.s6)((0,N.ty)(j));var H=a("./node_modules/@amzn/dvui/dist/Icons/LogoImdbOutline.js"),z=a.n(H);function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$.apply(this,arguments)}const q=({castMember:e,showCastImages:t,index:a,isLast:i})=>{const r={collectionType:"carousel",cardTitleIds:e.titles,totalEpisodeSize:e.titles.length,index:a,isLast:i},c=(e,t)=>t?`${e} - ${t}`:e,{imageUrl:D,name:E,role:y,personPageLink:T,personPageImageLink:I,personPageFollowingAction:C}=e.cast;return s.createElement(s.Fragment,null,s.createElement("div",{className:u},s.createElement("h3",{className:d},c(E,y)),T&&s.createElement(o.Text,{className:m,string:T,testID:"person-page-link"}),C&&s.createElement(F,{toggleFollowingAction:C,className:v,enableErrorMessage:!0})),s.createElement("div",{className:w(p,"cast-and-crew-member",{[g]:t})},t&&s.createElement("div",{className:`${h}`},((e,t,a)=>{const i={alt:"",src:e,baseValue:175,srcSizes:[{"max-phone-landscape":112}],isLazy:!0},r=e&&"\\N"!==e,o=s.createElement(s.Fragment,null,s.createElement("div",{className:b},s.createElement(n.Icon,{use:n.IconType.LOGO_PRIMEVIDEO})),r&&s.createElement(f.t,$({className:_},i)));return t?s.createElement("a",{href:t,"data-automation-id":"person-page-image-link",className:"personPageImageLink","aria-label":a}," ",o," "):o})(D,I,c(E,y))),s.createElement(l.J,r)))},G=(0,i.$j)((e=>({showCastAndCrew:(0,T.s)(e),castAndCrew:I.mZ.castAndCrew(e)})))((({castAndCrew:e,showCastAndCrew:t})=>{if(!t)return null;const a=e&&e.castAndCrews,i=!!a&&a.some((e=>e.cast.imageUrl&&"\\N"!==e.cast.imageUrl));return s.createElement(r.Container,{className:`${E.Z.pageSection} cast-and-crew-section`,testID:"cast-and-crew-section"},s.createElement("h2",{className:c},s.createElement(y.H1,{stringID:"DV_DP_CAST_CREW_HEADING"}),s.createElement("span",{className:D},s.createElement(y.H1,{stringID:"DV_DP_powered_by"})),s.createElement(z(),null)),a&&a.map(((e,t)=>s.createElement(q,{castMember:e,showCastImages:i,key:`cast-member-${t}`,index:t,isLast:t===a.length-1}))))}))},"./src/widgets/DVWebNodeDetail/components/collection/collection.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>V});var s=a("./node_modules/react/index.js"),i=a("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),n=a("./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx");const r="_2206LY",o="_3IGeF4",l="_1rz0dR",c="_1S1BHk",d="PKM0ed",u="_1YwDWW",m="_3mj4pS";var p=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),g=a("./node_modules/react-redux/es/index.js"),_=a("./node_modules/@amzn/dvui/dist/Badge.js"),h=a("./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx"),b=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),v=a("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),D=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),E=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),f=a("./src/widgets/DVWebNodeDetail/utils/liveState.ts"),y=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),w=a("./src/widgets/DVWebNodeDetail/selectors/player.ts"),T=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const I=({idx:e,detail:t,action:a,titleId:i,playerConfigData:n,isMShop:r})=>{if(o=a,!Boolean(o&&(0,b.MG)(o.playbackActions)))return s.createElement(s.Fragment,null,t.title);var o;const l={title:t.title,playbackActions:a&&a.playbackActions,entityType:t.entityType,playerConfigData:n,titleId:i,purchaseDetails:null,isRefunding:!1,isMShop:r};return s.createElement("div",{className:"js-sch-ep-playback-wrapper"},s.createElement("div",{"data-automation-id":`sch-ep-title-${e}`,className:`${v.t.playback} js-schedule-episode schedule-playback-wrapper`},s.createElement(h.s,l)))},C=({startTime:e,liveState:t})=>t?(0,f.Zz)(t.id)?s.createElement(s.Fragment,null,e):t.isLive?s.createElement("div",null," ",s.createElement(_.Badge,{use:_.badges.LIVE}," ",t.text," ")," "):(0,f.dn)(t.id)?s.createElement("div",null," ",s.createElement(_.Badge,{use:_.badges.CRITICAL}," ",t.text," ")," "):s.createElement("div",null," ",s.createElement(_.Badge,{use:_.badges.TEXT}," ",t.text," ")," "):null,N=(0,g.$j)(((e,t)=>({action:e.action[E.L5][t.titleId],playerConfigData:(0,w.UH)(e),detail:e.detail[y.Xt][t.titleId],requestContext:(0,D.Iz)(e),isMShop:(0,T.gK)(e)})))((({requestContext:{sessionID:e},playerConfigData:t,collectionType:a,idx:i,action:n,detail:u,titleId:m,isMShop:p})=>{const{liveState:g,startDate:_="",startTime:h=""}=u,b={sessionID:e,idx:i,detail:u,playerConfigData:t,action:n,titleId:m,isMShop:p},v=(e=>{var t,a;return null==e||null===(t=e.notificationActions)||void 0===t||null===(a=t.find((e=>"CRITICAL"===e.severity)))||void 0===a?void 0:a.shortMessage})(n);return s.createElement("li",{id:`av-ep-${a}${i}`,className:r},s.createElement("div",{className:o},s.createElement(I,b)),v?s.createElement("div",{className:`${o} ${l}`},v):s.createElement(s.Fragment,null,s.createElement("div",{className:`${o} ${c}`},_),s.createElement("div",{className:`${o} ${d}`},s.createElement(C,{startTime:h,liveState:g}))))})),S=(0,i.Y)((e=>{const{header:t,cardTitleIds:a,totalEpisodeSize:i,collectionType:n}=e;return 0===(a||[]).length?null:s.createElement("div",{className:p.Z.pageSection},t&&s.createElement("h1",{className:m}," ",t," (",i,")"," "),s.createElement("ol",{className:u},a.map(((e,t)=>s.createElement(s.Fragment,{key:`schedule-fragment-${e}-${t}`},s.createElement(N,{idx:t,key:`schedule-item-${e}-${t}`,collectionType:n,titleId:e}))))))})),P=(0,n.O3)(S);var x=a("./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx"),k=a("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx");const R=(0,i.Y)((e=>{switch(e.collectionType){case"schedule":return s.createElement(P,e);case"carousel":return s.createElement("div",{className:p.Z.pageSection},s.createElement(k.J,e));default:return s.createElement(x.kw,e)}})),V=(0,n.O3)(R)},"./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx":(e,t,a)=>{"use strict";a.d(t,{gK:()=>r,nx:()=>i,or:()=>o});var s=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const i=(0,s.bc)(["highlights","schedule","episodes","bonus","carousel"]),n=(0,s.bc)(["episodes","bonus"]),r=e=>i.includes(e),o=e=>n.includes(e)},"./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx":(e,t,a)=>{"use strict";a.d(t,{bG:()=>_,L8:()=>m,Z_:()=>g});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Pagination.js"),n=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const r=({currentOffset:e=0,totalItems:t,linkMaker:a,pageSize:s=10,paginationHardLimit:i=1e3,contextSize:r=1,strings:o})=>{const l=Math.floor((Math.min(t,i)-1)/s),c=e<0?0:e>=t?l*s:e;if(!(t>=0&&c>=0&&s>0&&i>0&&r>=0))return;if(t<=s)return;const d=Math.floor(c/s),u=(e,t)=>a(s*e,t),m=(e,t=!0)=>{const a=`${e+1}`;return{href:d===e?"":u(e,`pg_${a}`),title:o.page(a),type:"PaginatorPageNo",text:a,isOptional:t&&d!==e}},p=d>0&&{type:"PaginatorPrevious",href:u(d-1,"prv"),title:o.previous},g=d<l&&{type:"PaginatorNext",href:u(d+1,"nxt"),title:o.next},_=m(0,!1),[h,b]=d<=r?[1,1+2*r]:d>=l-r?[l-2*r,l]:[d-r,d+r],v=Math.max(1,h),D=Math.min(b,l),E=[p,_,v>1&&{type:"PaginatorGap"},...(0,n.w6)(v,D).map((e=>m(e))),g].filter(Boolean);return E.length<=6?E.map((e=>("PaginatorPageNo"===e.type&&(e.isOptional=!1),e))):E};var o=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),l=a("./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx"),c=a("./node_modules/react-redux/es/index.js"),d=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const m=200,p=l.nx.reduce(((e,t)=>({...e,[t]:`${t}From`})),{}),g=(e,t)=>{const a=p[t],s=e&&a&&e[a]&&e[a][0];return(0,n.e$)(s)},_=(0,c.$j)((e=>({requestContext:(0,d.Iz)(e),pageTitleId:e.pageTitleId})))((({totalEpisodeSize:e,requestContext:{queryParameters:t,makeUrl:a},collectionType:n,pageTitleId:l})=>{const{getString:c}=s.useContext(u.h);if(!["episodes","bonus"].includes(n))return null;const d={currentOffset:g(t,n),totalItems:e,pageSize:m,paginationHardLimit:1e4,linkMaker:(e,s)=>{const i={...(r=t,Object.keys(p).reduce(((e,t)=>{const a=p[t];return a&&r[a]&&(e[a]=r[a][0]),e}),{})),[p[n]]:`${e}`};var r;const c=`dv_dp_${n}_${s}`;return a((0,o.K1)(l),{get:i,refTag:c})},strings:{page:e=>c("DV_WEB_PAGINATION_PAGE",{pageNumber:e}),previous:c("DV_WEB_PAGINATION_PREVIOUS"),next:c("DV_WEB_PAGINATION_NEXT")}};return s.createElement(i.Pagination,{paginator:r(d)})}))},"./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx":(e,t,a)=>{"use strict";a.d(t,{GZ:()=>Ca});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=a("./src/widgets/DVWebNodeDetail/reducers/reviews.ts");const o="O4Kxlz",l="_2hFdht",c="_3AQ-tz",d="_1w2Mfb",u="eph53l",m="W27_oz",p="_3XbWV6",g="_2lZKCy",_="_3campH",h="_2dVGOh",b="_2jVHh-",v="_1vYcYX",D="_1OnCd3",E="_3zF9LN",f="_3BAKUi",y="_1dW6n4",w="C9h022",T="_1O9NWx",I="u_JfyW",C="_3gvi4K",N="_21cmh7",S="TtG3yR",P="cQzc0Q",x="_1ylCCx",k="ddqfkl",R="_1p1TF6",V="_3Z6a5Q";var A=a("./src/widgets/DVWebNodeDetail/components/badges/amazonRating.tsx"),W=a("./node_modules/@amzn/dvui/dist/Spacer.js"),L=a("./node_modules/@amzn/dvui/dist/Link.js");const O=e=>e.url?s.createElement("a",{href:e.url,className:e.className,"aria-label":e.ariaLabel,"data-automation-id":e.automationId,target:e.target},e.children):s.createElement("span",{"aria-label":e.ariaLabel,className:e.className,"data-automation-id":e.automationId,role:"img"},e.children);var B=a("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx"),M=a("./node_modules/classnames/index.js"),U=a.n(M),j=a("./node_modules/@amzn/dvui/dist/Icons/LinkArrow.js"),F=a.n(j),H=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),z=a("./node_modules/@amzn/dvui/dist/Container.js");const $="HEXDrZ",q="_2yoYLR",G="D9LaaU",Z="_3hGUnl",Q="Km2bko",Y="_3rWEr0",X="_2r1IO_",K="_2D1hub",J="_26VrVp",ee="KFiIwp",te="_3txQ2v",ae="oZ_Fl8",se="_1wTVMS",ie="_276_lE",ne="_6g7nQt",re="_3jXUWZ",oe="_37VAqj";var le=a("./node_modules/@amzn/dvui/dist/Button.js"),ce=a.n(le),de=a("./node_modules/@amzn/dvui/dist/Icon.js"),ue=a("./node_modules/@amzn/dvui/dist/StarRating.js"),me=a("./src/shared/utils/analytics/recordReftag.tsx"),pe=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),ge=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),_e=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),he=a("./node_modules/@amzn/dvui/dist/Text.js"),be=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),ve=a("./src/util/utils/hooks/useDebounce.tsx");const De="R1WOyM",Ee="_2fz2VR",fe="_1Eprhn",ye="_1cnOtx",we="_1hZk0r",Te="_2Zfa10",Ie="iJceYa",Ce="_22wNbf",Ne="LMMzLm",Se="_1yiEiK",Pe="_1ZVGCG",xe="_3RWny_",ke="_25m6au",Re="_2WPhMS",Ve="_3GBxxG",Ae="_1QGa1c",We="_3T_hpD",Le="_2pD8ZD",Oe="_3Dy9V6",Be="_3Zzfrt";var Me=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx");const Ue="_2J9xB9",je="_3OvXyf",Fe="_3Yf6pO",He="_1L4oZL",ze="_2IWcgA",$e="PpVn91",qe="ywwSly",Ge=({numStar:e,onMouseEnter:t,onMouseLeave:a,selectedRating:i,hoveredRating:n,onClick:r})=>{const o=`star-rating-selector-item-${e}`,l=s.useMemo((()=>n?n===e?"selected":n<e?"empty":"hovered":i<e?"empty":"selected"),[i,n,e]);return s.createElement("div",{onMouseEnter:()=>t(e),onMouseLeave:a,onFocus:()=>t(e),onClick:r,className:je,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||r()},"data-automation-id":o,"data-testid":o},s.createElement(de.Icon,{use:de.IconType.AMAZON_RATING,className:M(Fe,{[He]:"empty"===l,[ze]:"hovered"===l})}))},Ze=({ratingSavedText:e,rating:t,starRatingOnClick:a})=>{const[i,n]=s.useState(t&&Math.round(t)||0),[r,o]=s.useState(0),l=e=>o(e),c=()=>o(0),d=e=>()=>{n(e),a(e,i)};return s.createElement("div",{className:$e},s.createElement("div",{className:Ue},[1,2,3,4,5].map((e=>s.createElement(Ge,{numStar:e,onMouseEnter:l,onMouseLeave:c,hoveredRating:r,selectedRating:i,onClick:d(e),key:e})))),e&&s.createElement("p",{className:qe},e))};var Qe=a("./src/widgets/DVWebNodeDetail/utils/wps.ts"),Ye=a("./src/widgets/DVWebNodeDetail/actions/constants.ts"),Xe=a("./src/widgets/DVWebNodeDetail/data/normalize.ts");const Ke=s.createContext({}),Je="_2hHNJ_",et="_3qhzDI",tt="_2CM2Jx",at="_231yhh",st="_2iKiEU",it="_2L9jor",nt="_1S351v",rt="_3Zue2Q",ot="bSPXCp",lt="lXypfd";var ct=a("./node_modules/@amzn/dvui/dist/Expander.js"),dt=a("./node_modules/@amzn/dvui/dist/Spinner.js");const ut=(0,i.$j)(null,(e=>({setPublicName:(t,a)=>e(((e,t)=>(a,s)=>{a({type:Ye.k.UpdatePublicNameState,nextState:"inProgress",payload:{pageTitleId:t}}),(0,Qe.kZ)(e,(a=>({type:Ye.k.SetPublicName,input:e,output:a,payload:{pageTitleId:t}})))(a,s)})(t,a)),clearPublicNameState:t=>e((e=>t=>{t({type:Ye.k.UpdatePublicNameState,nextState:"idle",payload:{pageTitleId:e}})})(t))})))((({publicNameState:e,publicNameToken:t,setPublicName:a,clearPublicNameState:i})=>{const{requestContext:n,pageTitleId:r,getString:o}=s.useContext(ge.h),{publicName:l,state:c,isValidName:d}=e,[u,m]=s.useState({isEditing:!1}),[p,g]=s.useState(l);s.useEffect((()=>{switch(c){case"successful":m({isEditing:!1});break;case"unsuccessful":m({isEditing:!0,errorState:void 0===d||d?"serverError":"invalid"})}}),[c]);const _=()=>{m({isEditing:!1}),g(l),i(r)},h=()=>s.createElement("div",{className:st},s.createElement(ct.Expander,{numOfLines:1,uniqueId:"public-name-expander",testID:"public-name-container-display"},l));return s.createElement("form",{className:tt,onSubmit:e=>{e.preventDefault(),0===(null==p?void 0:p.trim().length)?m({isEditing:!0,errorState:"invalid"}):p===l?_():a({token:t,publicName:p,context:n},r)}},s.createElement("p",{className:at},`${o("DV_CR_public_name_rating_as")}:`),u.isEditing?s.createElement("div",{className:nt},s.createElement("input",{className:M(Je,rt),name:"publicNameInput",type:"text",onChange:e=>g(e.target.value),autoComplete:"off",value:p,maxLength:100,required:!0,dir:"auto","data-automation-id":"public-name-container-input","data-testid":"public-name-container-input"}),u.errorState&&s.createElement("div",{className:et,"data-automation-id":"public-name-failure"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,(()=>{switch(u.errorState){case"invalid":return o("DV_CR_public_name_failure");case"serverError":return o("DV_CR_review_submission_failure");default:return}})()))):s.createElement(h,null),u.isEditing&&"successful"!==c?"inProgress"===c?s.createElement(dt.Spinner,null):s.createElement("div",{className:ot},s.createElement(le.PrimaryButton,{className:lt,type:"submit",testID:"public-name-container-submit-button"},o("DV_CR_submission_submit")),s.createElement(ce(),{className:lt,onClick:()=>_(),testID:"public-name-container-cancel-button"},o("DV_common_cancel"))):s.createElement("button",{className:it,onClick:()=>{i(r),m({isEditing:!0})},"data-automation-id":"public-name-container-edit-button","data-testid":"public-name-container-edit-button"},o("DV_CR_public_name_change")))}));var mt=a("./src/widgets/DVWebNodeDetail/actions/banner.ts"),pt=a("./node_modules/@amzn/dvui/dist/Block.js"),gt=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts");const _t=({isOptional:e,text:t,optionalText:a})=>s.createElement("div",{className:We},s.createElement("p",null,t),e&&s.createElement("p",{className:Le},`(${a})`)),ht=(e,t)=>t?e.verifiedPurchaseLimit:e.unverifiedPurchaseLimit,bt=({closeModal:e,submitCustomerReview:t,createSuccessBanner:a})=>{var i,n,r,o;const{clickStreamPageType:l,clickStreamSubPageType:c,getString:d,isMobile:u,pageTitleId:m,requestContext:p,refTagTitleId:g,isDCSAnalyticsCallEnabled:_}=s.useContext(ge.h),{maybeDetailFragment:h,reviewSubmission:b,reviewTitleId:v}=s.useContext(Ke),{customerSubmittedReview:D,reviewSubmissionLimits:E,publicNameState:f,publicNameToken:y,reviewSubmissionToken:w,ratingState:T,reviewSubmissionState:I}=b,C=s.useRef(null),[N,S]=s.useState(Boolean(D)||u),[P,x]=s.useState((null==D||null===(i=D.customerSubmittedReviewContent)||void 0===i?void 0:i.reviewTitle)||""),[k,R]=s.useState((null==D||null===(n=D.customerSubmittedReviewContent)||void 0===n?void 0:n.reviewContent)||""),[V,A]=s.useState(),[W,L]=s.useState(),O=d("DV_CR_submission_optional"),B=Boolean(null==D?void 0:D.isVerifiedPurchase);s.useEffect((()=>{switch(T){case"successful":L(void 0),N||S(!0);break;case"unsuccessful":L(d("DV_CR_review_submission_failure"))}switch(I){case"successful":var t;A(void 0),a(),e(),null===(t=window)||void 0===t||t.scrollTo({left:0,top:0,behavior:"smooth"});break;case"unsuccessful":A("serviceFailure")}}),[T,I]);const U=s.useMemo((()=>({minimumCharactersLimit:ht(E.minimumCharacters,B)||1,maximumCharactersLimit:ht(E.maximumCharacters,B)||2e4,minimumWordLimit:ht(E.minimumWords,B)||1,maximumWordLimit:ht(E.maximumCharacters,B)||100})),[B]),j=(0,ve.N)(P,200),F=(0,ve.N)(k,200),H=e=>0===e.trim().length,z=s.useMemo((()=>!H(j)&&!H(F)),[j,F]),$=s.useMemo((()=>{var e,t;return B&&0===j.length&&0===F.length||z&&j===(null==D||null===(e=D.customerSubmittedReviewContent)||void 0===e?void 0:e.reviewTitle)&&F===(null==D||null===(t=D.customerSubmittedReviewContent)||void 0===t?void 0:t.reviewContent)}),[F,j,B]);if(!f.publicName)return null;const q=()=>{const{minimumCharactersLimit:e,maximumCharactersLimit:t,maximumWordLimit:a,minimumWordLimit:s}=U,i=k.split(/\b\W+\b/).length;if(k.length<e)A("minimumCharacters");else if(k.length>t)A("maximumCharacters");else if(i<s||H(k))A("minimumWords");else if(i>a)A("maximumWords");else{if(Boolean(D))return!0;A("ratingMissing")}return!1},G={alt:"",src:(null==h||null===(r=h.images)||void 0===r?void 0:r.covershot)||(null==h||null===(o=h.images)||void 0===o?void 0:o.packshot),baseValue:268,srcSizes:[{"max-phablet":148},{"min-desktop":268}],isLazy:!0},Z=(e,t,a)=>({context:p,titleID:v,ratingValue:e,token:w,reviewContent:t,reviewID:a});return s.createElement("div",{className:Ee},s.createElement(ut,{publicNameState:f,publicNameToken:y}),s.createElement("div",{className:fe},(null==h?void 0:h.images)&&s.createElement("div",{className:Ce},s.createElement(Me.t,G)),s.createElement("div",{className:Ne},h&&s.createElement("p",{className:Se},h.title),s.createElement("h1",null,d("DV_CR_submission_overall_rating")),s.createElement(Ze,{ratingSavedText:!u&&B?d("DV_CR_submission_rating_saved"):void 0,starRatingOnClick:(e,a)=>{var s;if(e!==a)if((0,me.XQ)((0,pe.i)("atv_dp_cr_sub_sr_{ratingNumber}",{ratingNumber:`${e}`}),l,c,g,void 0,void 0,_),Boolean(null==D?void 0:D.customerSubmittedReviewContent)){const{reviewID:a,reviewContent:s,reviewTitle:i}=null==D?void 0:D.customerSubmittedReviewContent;t(Z(e,{bodyText:s,titleText:i},a),m,!0)}else t((e=>({context:p,titleID:v,ratingValue:e,token:w}))(e),m,!0);null===(s=C.current)||void 0===s||s.focus()},rating:null==D?void 0:D.rating}),W&&s.createElement("div",{className:Oe},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,W)))),s.createElement("form",{className:N?we:ye,onSubmit:a=>{if(a.preventDefault(),(0,me.XQ)("atv_dp_cr_sub_rev",l,c,g,void 0,void 0,_),$)e();else if(q()){var s;const e=null==D||null===(s=D.customerSubmittedReviewContent)||void 0===s?void 0:s.reviewID,a={bodyText:k,titleText:P};t(Z(D.rating,a,e),m,!1)}},"data-automation-id":"submission-modal-form","data-testid":"submission-modal-form"},!u&&B&&s.createElement("p",{className:Pe},d("DV_CR_submission_add_more")),s.createElement(_t,{text:d("DV_CR_submission_add_headline"),isOptional:!u&&B,optionalText:O}),s.createElement("input",{placeholder:d("DV_CR_submission_headline_placeholder"),className:M(ke,xe),type:"text",name:"headline",id:"headline-input",onChange:e=>x(e.target.value),autoComplete:"off",value:P,maxLength:100,required:!$,ref:C,dir:P.length>0?"auto":""}),s.createElement(_t,{text:d("DV_CR_submission_add_written_review"),isOptional:!u&&B,optionalText:O}),s.createElement("textarea",{placeholder:d("DV_CR_submission_body_placeholder"),className:M(Re,xe,{[Ve]:Boolean(V)}),name:"body",id:"body-input",onChange:e=>R(e.target.value),autoComplete:"off",value:k,maxLength:U.maximumCharactersLimit,required:!$,dir:k.length>0?"auto":""}),V&&s.createElement("div",{className:Oe,"data-automation-id":"review-submission-failure"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,(e=>{const{minimumWordLimit:t,maximumWordLimit:a,minimumCharactersLimit:s,maximumCharactersLimit:i}=U;switch(e){case"maximumCharacters":return d("DV_CR_submission_max_chars",{count:`${i}`});case"minimumCharacters":return 1===s?d("DV_CR_submission_min_chars_one"):d("DV_CR_submission_min_chars",{count:`${s}`});case"maximumWords":return d("DV_CR_submission_max_words",{count:`${a}`});case"minimumWords":return 1===t?d("DV_CR_submission_min_chars_one"):d("DV_CR_submission_min_chars",{count:`${t}`});case"ratingMissing":return d("DV_CR_rating_missing");case"serviceFailure":return d("DV_CR_review_submission_failure")}})(V))),s.createElement(le.PrimaryButton,{className:Ae,type:"submit",testID:"submission-modal-submit-button"},d("DV_CR_submission_submit"))))},vt=({openModalClickHandler:e,buttonText:t,className:a,refTag:i,testID:n,updateReviewEligibility:r,createEligibilityBanner:o,createReviewLink:l,showButtonWithFailure:c=!1})=>{const{clickStreamPageType:d,clickStreamSubPageType:u,pageTitleId:m,requestContext:p,getString:g,refTagTitleId:_,isRetail:h,isDCSAnalyticsCallEnabled:b}=s.useContext(ge.h),{reviewSubmission:v,reviewTitleId:D}=s.useContext(Ke),[E,f]=s.useState("idle"),y="unsuccessful"===E?c:"inProgress"!==E;return s.createElement("div",{className:Ie},"inProgress"===E?s.createElement(dt.Spinner,{className:Be}):y&&s.createElement(ce(),{disabled:void 0!==v.isEligible&&!v.isEligible,className:a,role:"button","aria-live":"polite",onClick:t=>{if(Boolean(p.customerID)){var a;if((0,me.XQ)(i,d,u,_,void 0,void 0,b),v.isEligible)if(h)l&&(null===(a=window)||void 0===a||a.location.assign(l));else e(t);else f("inProgress"),(0,Qe.mx)(p,D,v.reviewSubmissionToken).then((a=>{var s,i;null!=a&&a.eligibilityResponse?(f("successful"),r(a,m),a.eligibilityResponse.isEligible?h?l&&(null===(s=window)||void 0===s||s.location.assign(l)):e(t):a.eligibilityResponse.eligibilityMessage&&(o(a.eligibilityResponse.eligibilityMessage),null===(i=window)||void 0===i||i.scrollTo({left:0,top:0,behavior:"smooth"}))):f("unsuccessful")})).catch((e=>{f("unsuccessful")}))}else{var s;const e=(0,gt.Z$)(p,m,"atv_dp_cr_sign_rev","atv_dp_cr_sign_rev");null===(s=window)||void 0===s||s.location.assign(e)}},"aria-label":t,"data-automation-id":n,"data-testid":n},t),"unsuccessful"===E&&s.createElement("div",{className:Oe,"data-automation-id":"review-eligibility-failure"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,g("DV_CR_review_submission_failure"))))},Dt=(0,i.$j)(null,(e=>({submitCustomerReview:(t,a,s)=>e(((e,t,a)=>(s,i)=>{s({type:a?Ye.k.UpdateRatingState:Ye.k.UpdateSubmissionState,nextState:"inProgress",payload:{pageTitleId:t}}),(0,Qe.rL)(e,(i=>{var n;return e.reviewContent&&!e.reviewID&&null!=i&&null!==(n=i.output)&&void 0!==n&&n.isSuccessful&&(0,Qe.Bt)(e.context,t,r.yR)(s),{type:Ye.k.SubmitCustomerReview,input:e,output:(0,Xe.s8)(e,i),isToUpdateRating:a,payload:{pageTitleId:t}}}))(s,i)})(t,a,s)),clearSubmissionState:t=>e((e=>t=>{t({type:Ye.k.ClearSubmissionStates,payload:{pageTitleId:e}})})(t)),updateReviewEligibility:(t,a)=>e(((e,t)=>a=>{a({type:Ye.k.FetchReviewEligibility,output:e,payload:{pageTitleId:t}})})(t,a)),createSuccessBanner:()=>e((0,mt.I)({type:pt.MessageTypes.success,stringId:"DV_CR_review_submission_processing",headingStringId:"DV_CR_review_submission_success",automationId:"review-submission-success"})),createEligibilityBanner:({header:t,body:a})=>e((0,mt.I)({type:pt.MessageTypes.info,heading:t.string,bodyDVString:a,automationId:"review-eligibility-banner"}))})))((({buttonText:e,refTag:t,className:a,testID:i,createSuccessBanner:n,submitCustomerReview:r,clearSubmissionState:o,updateReviewEligibility:l,showButtonWithFailure:c,createEligibilityBanner:d,createReviewLink:u})=>{const{getString:m,pageTitleId:p,clickStreamPageType:g,clickStreamSubPageType:_,refTagTitleId:h,isDCSAnalyticsCallEnabled:b}=s.useContext(ge.h),{reviewSubmission:v,isReviewsSubmissionEnabled:D}=s.useContext(Ke);if(!v||!D)return null;const E=m(null!=v&&v.customerSubmittedReview?"DV_CR_edit_review":"DV_CR_create_review");return s.createElement(be.i,{size:"m",className:De,modalHeader:s.createElement("p",{className:Te},E),modalContent:({closeModal:e})=>s.createElement(bt,{closeModal:e,createSuccessBanner:n,submitCustomerReview:r}),modalId:"reviews-submission-modal",toggle:({openModalClickHandler:n})=>s.createElement(vt,{testID:i,refTag:t,buttonText:e,openModalClickHandler:n,className:a,updateReviewEligibility:l,showButtonWithFailure:c,createEligibilityBanner:d,createReviewLink:u}),onClose:()=>{(0,me.XQ)("atv_dp_cr_sub_close",g,_,h,void 0,void 0,b),o(p)}})})),Et=({ratingsExplanationHeader:e,ratingsExplanationText:t})=>{const[a,i]=s.useState(!1),{clickStreamPageType:n,clickStreamSubPageType:r,refTagTitleId:o,isDCSAnalyticsCallEnabled:l}=s.useContext(ge.h);return s.createElement("button",{className:se,onClick:()=>{a||(0,me.XQ)((0,pe.i)("atv_dp_cr_rev_exp"),n,r,o,void 0,void 0,l),i(!a)},"data-automation-id":"ratings-explanation-expander",role:"button"},s.createElement(de.Icon,{className:oe,use:a?de.IconType.TOGGLE_COLLAPSE:de.IconType.TOGGLE_EXPAND}),s.createElement("div",{className:ie},s.createElement("p",{className:ne},e),a&&s.createElement("p",{className:re,"data-automation-id":"ratings-explanation-body"},t)))},ft=({ratingDisplayLabel:e,percentageDisplay:t})=>s.createElement("div",{className:K},s.createElement("span",{className:J},e),s.createElement("div",{className:te},s.createElement("span",{style:{width:t}})),s.createElement("span",{className:ee},t)),yt=({createReviewLink:e,writeReviewText:t})=>s.createElement(ce(),{className:ae,role:"button","aria-live":"polite","aria-label":t,testID:"write-review-button",href:e},t),wt=({reviewRatingInfo:e})=>{const{starCount:t,hasHalfStar:a,averageRatingLabel:i,totalReviewCountText:n}=e;return s.createElement("div",null,s.createElement(W.Spacer,{alignItems:W.spacerAlignItems.center,space:W.spacerSpacing.xs},s.createElement(ue.StarRating,{rating:t+(a?.5:0),className:G}),s.createElement("strong",{className:Z},i)),s.createElement("p",{className:Q},n))},Tt=e=>{const{reviewsAnalysisModel:t,createReviewLink:a,reviewsHistogramStrings:i,isRetail:n,checkReviewEligibility:r}=e,{ratingsHistogram:o,reviewRatingInfo:l}=t,{oneStar:c,twoStar:d,threeStar:u,fourStar:m,fiveStar:p}=o,g=s.useRef(null),_=[p,m,u,d,c];return s.createElement("div",{className:$,"data-automation-id":"reviews-histogram-container",ref:g},s.createElement("h1",{className:q},i.reviewsHeader),l&&"number"==typeof l.totalReviewCount&&l.totalReviewCount>0&&s.createElement(wt,{reviewRatingInfo:l}),s.createElement("ol",{className:Y},_.map(((e,t)=>{const{hoverText:a,ratingDisplayLabel:i,percentageDisplay:r,url:o}=e,l={url:o,ariaLabel:i,automationId:`histogram-row-${t}`,target:n?void 0:"_blank"},c={ratingDisplayLabel:i,percentageDisplay:r};return s.createElement("li",{key:t,className:X},a?s.createElement(_e.Tooltip,{content:s.createElement(he.Text,{tag:"span",string:a,testID:`review-histogram-tooltip-${t}`}),size:"s",id:"histogram-tooltip-id",containerRef:g},s.createElement(O,l,s.createElement(ft,c))):s.createElement(ft,c))}))),s.createElement(Et,i),n&&!r?s.createElement(yt,{writeReviewText:i.writeReviewText,createReviewLink:a}):s.createElement(Dt,{buttonText:i.writeReviewText,refTag:(0,pe.i)("atv_dp_cr_sub_open"),className:ae,testID:"histogram-submission-modal-button",createReviewLink:a,showButtonWithFailure:!0}))};var It=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),Ct=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),Nt=a("./src/util/utils/marketplace.ts");const St="_1O7K2I",Pt="_28lp9F",xt="_2W8dUp",kt="_1JSxwM",Rt="_2voCuO",Vt="_1ZRB-9",At="zfFfQG",Wt="_2zZQbA",Lt="_1IKrsj",Ot="_1OmNVz",Bt="GeQkE2",Mt="_2kTylK";var Ut=a("./src/widgets/DVWebNodeDetail/reducers/translatedReviews.ts");const jt=(e,t,a)=>({type:Ye.k.ChangeTranslatedReviewStatus,payload:{pageTitleId:e,reviewIDs:t,status:a}}),Ft=(e,t,a,s)=>({type:Ye.k.GetTranslatedReviews,input:t,output:(0,Xe.cT)(a,e),payload:{pageTitleId:a,isSingleReview:s}}),Ht=(e,t,a,s,i,n,r=0)=>{if(e&&e.translatedReviews){const l=(o=e.translatedReviews,Object.keys(o).filter((e=>{var t;return null===(t=o[e].translatedReviewItem)||void 0===t?void 0:t.isTranslationPending})));if(r<2){return((e,t,a,s,i,n=0)=>{e.reviewsToTranslate.length>0&&setTimeout((()=>{zt(e,t,a,n+1)(s,i)}),1e3)})({...t,reviewsToTranslate:t.reviewsToTranslate.filter((e=>l.includes(e.reviewID)))},a,s,i,n,r+1),Ft(e,t,a,s)}{l.length>0&&i(jt(a,l,Ut.X.Unsuccessful));const n=Object.keys(e.translatedReviews).filter((e=>!l.includes(e))).reduce(((t,a)=>({...t,[a]:e.translatedReviews[a]})),{}),r={...e,translatedReviews:n};return Ft(r,t,a,s)}}return((e,t,a)=>({type:Ye.k.TranslatedReviewsFailed,payload:{isSingleReview:a,pageTitleId:t,failedReviewIDs:e.reviewsToTranslate.map((e=>e.reviewID))}}))(t,a,s);var o},zt=(e,t,a,s=0)=>(i,n)=>{(0,Qe.Cd)(e,(r=>Ht(r,e,t,a,i,n,s)))(i,n)};const $t=(0,a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts").P)(n.mZ.translatedReviews,(e=>null==e?void 0:e.reviewIdToTranslatedReview));var qt=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),Gt=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");const Zt=({requestContext:e,onSuccess:t,reviewID:a,reviewItemStrings:i,titleID:n,buttonLabel:r,testID:o,interactionType:l,interactionValue:c,token:d})=>{const{clickStreamPageType:u,clickStreamSubPageType:m,refTagTitleId:p,isDCSAnalyticsCallEnabled:g}=s.useContext(ge.h),[_,h]=s.useState("idle"),{inProgressLabel:b,successfulMessage:v,unsuccessfulMessage:D}=i;s.useEffect((()=>{h("idle")}),[a]);const E=()=>{if(e.isRecognizedCustomer)h("inProgress"),(0,me.XQ)((0,pe.i)("Helpful"===l?"atv_dp_cr_helpful":"atv_dp_cr_rep"),u,m,p,void 0,void 0,g),(0,Qe.yf)(e.rawContext,n,a,l,c,d).then((e=>{h(e.isSuccessful?"successful":"unsuccessful"),e.isSuccessful&&t&&t()})).catch((e=>{h("unsuccessful")}));else{var s;const t=(0,gt.Z$)(e.rawContext,n,"atv_dp_cr_sign_vote","atv_dp_cr_sign_vote_dp");null===(s=window)||void 0===s||s.location.assign(t)}};switch(_){case"inProgress":return s.createElement("p",{className:Mt},b);case"successful":return s.createElement("div",{className:Wt,"data-automation-id":"review-interaction-success"},s.createElement(de.Icon,{use:de.IconType.ALERT_SUCCESS}),s.createElement("p",null,v));case"unsuccessful":return s.createElement("div",{className:Wt,"data-automation-id":"review-interaction-failure"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,D));default:return s.createElement(ce(),{className:At,role:"button","aria-live":"polite","aria-label":r,testID:o,textAlign:"center",onClick:E},r)}},Qt=({reviewItemStrings:e,reviewListIndex:t,reviewInteractionButtonProps:a})=>{const{reportAbuseMessage:i,reportAbuseText:n}=e,{clickStreamPageType:r,clickStreamSubPageType:o}=s.useContext(ge.h);return s.createElement(be.i,{size:"xs",modalHeader:s.createElement("p",{className:xt},n),modalContent:({closeModal:e})=>(e=>{const t={...a,onSuccess:()=>setTimeout(e,2e3)};return s.createElement("div",{className:kt},s.createElement("p",{className:Rt},i),s.createElement(Zt,t))})(e),modalId:"report-abuse-modal",toggle:({openModalClickHandler:e})=>s.createElement(Gt._,{refTag:(0,pe.i)("atv_dp_cr_rep_open"),className:Pt,pageType:r,subPageType:o},s.createElement("button",{id:"reportAbuseTrigger",className:St,"aria-label":n,"data-automation-id":`report-abuse-link-${t}`,onClick:e},n))})},Yt=(0,i.$j)((e=>({reviewIdToTranslatedReview:$t(e),isFirestormReviewsEnabled:(0,qt.xu)(e),isReviewsTranslationEnabled:(0,qt.Kv)(e)})),(e=>({changeTranslatedReviewStatus:(t,a,s)=>e(jt(t,a,s)),fetchTranslatedReviews:(t,a)=>e(zt(t,a,!0))})))((({reviewListIndex:e,titleID:t,reviewID:a,requestContext:i,translationToken:n,reviewMarketplace:r,versionNumber:o,reviewLanguage:l,localeLanguage:c,reviewIdToTranslatedReview:d,reviewItemStrings:u,isFirestormReviewsEnabled:m,isReviewsTranslationEnabled:p,changeTranslatedReviewStatus:g,fetchTranslatedReviews:_})=>{var h;const{getString:b,clickStreamPageType:v,clickStreamSubPageType:D,refTagTitleId:E,isDCSAnalyticsCallEnabled:f}=s.useContext(ge.h);if(!m||!p||l==c)return null;const{showOriginalReviewLabel:y,translationErrorMessage:w,translatingMessage:T}=u,I=b("DV_CR_translate_single_review",{targetLanguage:c}),C=()=>{var e;(0,me.XQ)("atv_dp_cr_trans_single",v,D,E,void 0,void 0,f);if(null==d||null===(e=d[a])||void 0===e?void 0:e.translation)g(t,[a],Ut.X.Translated);else{g(t,[a],Ut.X.Translating);const e={token:n,reviewsToTranslate:[{reviewID:a,reviewMarketplaceId:r,versionNumber:o}],context:i.rawContext};_(e,t)}};switch(null==d||null===(h=d[a])||void 0===h?void 0:h.status){case Ut.X.Translated:const i=b("DV_CR_translated_review",{originalLanguage:d[a].translation.originLanguage});return s.createElement("div",{className:Lt},s.createElement("span",{className:Bt},i),s.createElement("button",{id:"showOriginReview",className:St,"aria-label":y,"data-automation-id":`show-origin-review-${e}`,onClick:()=>{(0,me.XQ)("atv_dp_cr_show_ori_single",v,D,E,void 0,void 0,f),g(t,[a],Ut.X.Origin)}},y));case Ut.X.Unsuccessful:return s.createElement("div",{className:U()(Lt,Ot),"data-automation-id":"review-translation-unsuccessful"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,w));case Ut.X.Translating:return s.createElement("div",{className:Lt},s.createElement("span",null,T));default:return s.createElement("div",{className:Lt},s.createElement("button",{id:"getReviewTranslation",className:St,"aria-label":I,"data-automation-id":`review-translation-link-${e}`,onClick:C},I))}})),Xt=({reviewItemStrings:e,requestContext:t,reviewID:a,reviewListIndex:i,titleID:n,token:r,translationToken:o,reviewLanguage:l,reviewMarketplace:c,versionNumber:d,localeLanguage:u,enableInteractionActions:m})=>{const p=(s,i,o,l,c)=>({reviewItemStrings:e,requestContext:t,titleID:n,reviewID:a,buttonLabel:s,onSuccess:c,testID:i,interactionType:o,interactionValue:l,token:r}),g=p(e.helpfulButtonText,`helpful-button-${i}`,"Helpful",1),_={reviewItemStrings:e,reviewListIndex:i,reviewInteractionButtonProps:p(e.confirmLabel,`confirm-report-abuse-${i}`,"Inappropriate",1)},h={reviewItemStrings:e,reviewListIndex:i,requestContext:t,titleID:n,reviewID:a,translationToken:o,reviewLanguage:l,reviewMarketplace:c,versionNumber:d,localeLanguage:u};return s.createElement("div",{className:Vt},m&&s.createElement(Zt,g),m&&s.createElement(Qt,_),s.createElement(Yt,h))},Kt="_11vbpI",Jt="_26lnXE",ea="_3tuFnQ",ta="_1ax4B5",aa="_3prPK1",sa="_2xtnTD",ia="_3fUewt",na="_1aDu4R",ra="_1_nj5Y";let oa;!function(e){e.Idle="Idle",e.InProgress="InProgress",e.Successful="Successful",e.Unsuccessful="unsuccessful"}(oa||(oa={}));const la=(0,i.$j)((e=>({requestContext:(0,Ct.Iz)(e)})),(e=>({deleteCustomerReview:t=>e((e=>t=>{t({type:Ye.k.DeleteCustomerReview,payload:{pageTitleId:e}})})(t))})))((({closeModal:e,deleteCustomerReview:t,requestContext:a})=>{const{getString:i,clickStreamPageType:n,clickStreamSubPageType:r,pageTitleId:o,refTagTitleId:l,isDCSAnalyticsCallEnabled:c}=s.useContext(ge.h),{reviewSubmission:d,reviewTitleId:u}=s.useContext(Ke),[m,p]=[d.customerSubmittedReview.customerSubmittedReviewContent.reviewID,d.reviewSubmissionToken],[g,_]=s.useState(oa.Idle),h=i("DV_common_yes"),b=i("DV_common_no"),v=()=>{_(oa.InProgress),(0,me.XQ)((0,pe.i)("atv_dp_cr_del_rev"),n,r,l,void 0,void 0,c),(0,Qe.Gw)(a.rawContext,u,m,p).then((e=>{_(e.isSuccessful?oa.Successful:oa.Unsuccessful),e.isSuccessful&&setTimeout((()=>t(o)),2e3)})).catch((e=>{_(oa.Unsuccessful)}))};switch(g){case oa.InProgress:return s.createElement("p",{className:na},i("DV_CR_review_deleting"));case oa.Successful:return s.createElement("div",{className:ra,"data-automation-id":"review-deletion-success"},s.createElement(de.Icon,{use:de.IconType.ALERT_SUCCESS}),s.createElement("p",null,i("DV_CR_review_deleted")));case oa.Unsuccessful:return s.createElement("div",{className:ra,"data-automation-id":"review-deletion-failure"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,i("DV_CR_review_submission_failure")));default:return s.createElement(s.Fragment,null,s.createElement("p",{className:sa},i("DV_CR_delete_review_warning")),s.createElement("div",{className:ea},s.createElement(ce(),{className:ta,role:"button","aria-live":"polite","aria-label":h,testID:"delete-review-yes-button",textAlign:"center",onClick:v},h),s.createElement(ce(),{className:ta,role:"button","aria-live":"polite","aria-label":b,testID:"delete-review-no-button",textAlign:"center",onClick:e},b)))}})),ca=()=>{const{getString:e,clickStreamPageType:t,clickStreamSubPageType:a,refTagTitleId:i,isDCSAnalyticsCallEnabled:n}=s.useContext(ge.h),r=e("DV_common_delete");return s.createElement(be.i,{size:"xs",modalHeader:s.createElement("p",{className:aa},e("DV_CR_delete_review")),modalContent:({closeModal:e})=>(e=>s.createElement("div",{className:ia},s.createElement(la,{closeModal:e})))(e),modalId:"delete-review-modal",toggle:({openModalClickHandler:e})=>s.createElement(Gt._,{refTag:(0,pe.i)("atv_dp_cr_delete_review_open"),pageType:t,subPageType:a},s.createElement(ce(),{className:Jt,role:"button","aria-live":"polite","aria-label":r,testID:"delete-review-button",textAlign:"center",onClick:e},r)),onClose:()=>(0,me.XQ)("atv_dp_cr_delete_review_close",t,a,i,void 0,void 0,n)})},da=()=>{const{getString:e}=s.useContext(ge.h);return s.createElement("div",{className:Kt},s.createElement(Dt,{buttonText:e("DV_common_edit"),refTag:(0,pe.i)("atv_dp_cr_edit"),className:Jt,testID:"edit-review-button",showButtonWithFailure:!1}),s.createElement(ca,null))};var ua=a("./src/shared/utils/utils.ts");const ma=({width:e,height:t,className:a})=>s.createElement("svg",{viewBox:`0 0 ${e} ${t}`,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,width:e,height:t,className:a},s.createElement("path",{fill:"none",d:"M0.316 0.123H219.316V219.123H0.316z"}),s.createElement("clipPath",{id:"a"},s.createElement("path",{d:"M0.316 0.123H219.316V219.123H0.316z"})),s.createElement("g",{clipPath:"url(#a)"},s.createElement("circle",{cx:110.316,cy:117.993,r:93.61,fill:"url(#_Linear2)"}),s.createElement("path",{d:"M40.927 110.193a2.463 2.463 0 011.571 1.132l14.997 24.881 29.112-2.848a2.464 2.464 0 012.088 4.083L69.44 159.264 81.085 185.8a2.463 2.463 0 01-3.213 3.26l-26.926-11.35-21.96 19.277a2.464 2.464 0 01-4.079-2.078l2.663-28.856-25.164-14.621a2.464 2.464 0 01.691-4.532l28.52-6.498 6.366-28.345a2.464 2.464 0 012.944-1.864z",fill:"url(#_Linear3)"}),s.createElement("path",{d:"M182.027 110.59c.572.355.973.927 1.112 1.585l5.994 28.426 28.433 6.871a2.464 2.464 0 01.631 4.542l-25.353 14.289 2.284 28.888a2.465 2.465 0 01-4.106 2.025l-21.705-19.563-27.073 10.996a2.465 2.465 0 01-3.17-3.303l11.991-26.381-18.966-22.073a2.464 2.464 0 012.141-4.055l29.073 3.229 15.321-24.682a2.464 2.464 0 013.393-.794z",fill:"url(#_Linear4)"}),s.createElement("path",{d:"M112.239 40.341a3.928 3.928 0 012.169 2.194L131.414 85.6l46.51 3.207a3.927 3.927 0 012.204 6.967l-36.022 29.22 11.299 44.782a3.928 3.928 0 01-5.911 4.277l-39.326-24.945-39.603 24.504a3.927 3.927 0 01-5.863-4.343l11.8-44.652-35.693-29.621a3.926 3.926 0 012.281-6.943l46.543-2.687 17.486-42.872a3.928 3.928 0 015.12-2.153z",fill:"url(#_Linear5)"})),s.createElement("defs",null,s.createElement("linearGradient",{id:"_Linear2",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 42.603 68.34) scale(187.794)"},s.createElement("stop",{offset:0,stopColor:"#050709"}),s.createElement("stop",{offset:1,stopColor:"#0f171e"})),s.createElement("linearGradient",{id:"_Linear3",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(0 142.46 -142.46 0 110.316 84.83)"},s.createElement("stop",{offset:0,stopColor:"#2a4761"}),s.createElement("stop",{offset:.56,stopColor:"#1d3041"}),s.createElement("stop",{offset:1,stopColor:"#182633"})),s.createElement("linearGradient",{id:"_Linear4",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(0 142.46 -142.46 0 110.316 84.83)"},s.createElement("stop",{offset:0,stopColor:"#2a4761"}),s.createElement("stop",{offset:.56,stopColor:"#1d3041"}),s.createElement("stop",{offset:1,stopColor:"#182633"})),s.createElement("linearGradient",{id:"_Linear5",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(66.704 23.26 59.668) scale(226.6303)"},s.createElement("stop",{offset:0,stopColor:"#19b8ef"}),s.createElement("stop",{offset:1,stopColor:"#017ca6"}))));function pa(){return pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pa.apply(this,arguments)}const ga=["byCQScore1Descending","bySubmissionDateDescending"],_a=["byRankDescending","bySubmissionDateDescending"],ha={byRankDescending:"atv_dp_cr_srt_mh",byCQScore1Descending:"atv_dp_cr_srt_mh",bySubmissionDateDescending:"atv_dp_cr_srt_mr"},ba={byRankDescending:"DV_CR_sorting_top_reviews",byCQScore1Descending:"DV_CR_sorting_top_reviews",bySubmissionDateDescending:"DV_CR_sorting_most_recent"},va=({rating:e,reviewTitle:t,hoverText:a,testId:i,containerRef:n})=>s.createElement(W.Spacer,{className:v,alignItems:W.spacerAlignItems.center,space:W.spacerSpacing.xs},s.createElement(_e.Tooltip,{content:s.createElement(he.Text,{tag:"span",string:a,testID:i}),size:"s",containerRef:n},s.createElement(ue.StarRating,{rating:e,className:D})),s.createElement("strong",{dir:"auto"},t)),Da=(0,i.$j)(null,(e=>({changeTranslatedReviewStatus:(t,a,s)=>e(jt(t,a,s)),fetchTranslatedReviews:(t,a)=>e(zt(t,a,!1)),updatedBatchTranslationStatus:(t,a)=>e(((e,t)=>({type:Ye.k.UpdatedBatchTranslationStatus,payload:{pageTitleId:e,status:t}}))(t,a))})))((({reviewIdToReview:e,reviewIdToTranslatedReview:t,reviewItemStrings:a,pageTitleId:i,requestContext:n,localeLanguage:r,batchTranslationStatus:o,changeTranslatedReviewStatus:l,fetchTranslatedReviews:c,updatedBatchTranslationStatus:d})=>{const{getString:u,clickStreamPageType:m,clickStreamSubPageType:p,refTagTitleId:g,isDCSAnalyticsCallEnabled:_}=s.useContext(ge.h),{showOriginalReviewLabel:h,translationErrorMessage:b,translatingMessage:v}=a,D=Object.keys(e),E=u("DV_CR_translate_all_reviews",{targetLanguage:r}),f=()=>{(0,me.XQ)("atv_dp_cr_trans_all",m,p,g,void 0,void 0,_);const a=D.filter((e=>{var a;return Boolean(null==t||null===(a=t[e])||void 0===a?void 0:a.translation)})),s=D.filter((e=>{var a;return!Boolean(null==t||null===(a=t[e])||void 0===a?void 0:a.translation)}));if(0==s.length)d(i,Ut.X.Translated),l(i,a,Ut.X.Translated);else{d(i,Ut.X.Translating),l(i,a,Ut.X.Translated),l(i,s,Ut.X.Translating);const t=s.map((t=>({reviewID:t,reviewMarketplaceId:e[t].reviewMarketplaceID,versionNumber:e[t].versionNumber}))),r={token:e[s[0]].getTranslationsToken,reviewsToTranslate:t,context:n};c(r,i)}};switch(o){case Ut.X.Translated:return s.createElement("div",{className:R},s.createElement("button",{id:"showOriginalReviews","aria-label":h,"data-automation-id":"show-origin-reviews",onClick:()=>{(0,me.XQ)("atv_dp_cr_show_ori_all",m,p,g,void 0,void 0,_),d(i,Ut.X.Origin),l(i,D,Ut.X.Origin)}},h));case Ut.X.Unsuccessful:return s.createElement("div",{className:R,"data-automation-id":"reviews-translation-unsuccessful"},s.createElement(de.Icon,{use:de.IconType.ALERT_CRITICAL}),s.createElement("p",null,b));case Ut.X.Translating:return s.createElement("div",{className:R},s.createElement("span",null,v));default:return s.createElement("div",{className:R},s.createElement("button",{id:"getReviewsTranslation","aria-label":E,"data-automation-id":"reviews-translation-link",onClick:f},E))}})),Ea=({submissionRecord:e,ariaLabel:t,isRetail:a,automationId:i,pendingApprovalLabel:n,isPendingApproval:r})=>{const{customerProfile:o,submittedOnText:l}=e,c={url:o.profileUrl,ariaLabel:t,automationId:i,className:N,target:a?void 0:"_blank"};return s.createElement(W.Spacer,{className:v,alignItems:W.spacerAlignItems.center,space:W.spacerSpacing.xs},s.createElement(O,c,s.createElement("img",{className:w,"aria-label":t,loading:"lazy",src:o.avatarUrl,alt:""}),s.createElement("span",{className:o.profileUrl?T:I},o.customerName)),s.createElement("span",{className:C},l),r&&s.createElement("span",{className:V},n))},fa=({htmlContent:e,uniqueId:t})=>s.createElement(ct.Expander,{numOfLines:4,uniqueId:t,className:E},s.createElement("div",{dangerouslySetInnerHTML:{__html:e},dir:"auto"})),ya=({fallbackMessage:e,buttonText:t})=>s.createElement("div",{className:c},s.createElement(ma,{width:220,height:220,className:d}),s.createElement("p",{className:k},e),s.createElement(Dt,{buttonText:t,refTag:(0,pe.i)("atv_dp_cr_sub_open_fb"),className:x,testID:"fallback-submission-modal-button",showButtonWithFailure:!0})),wa=({reviewListIndex:e,reviewModel:t,reviewItemStrings:a,pageTitleId:i,requestContext:n,isInternational:r,localeLanguage:o,translatedReviewModel:l,verifiedPurchaseLink:c})=>{const{reviewContent:d,helpfulVotes:u}=t,m=s.useRef(null),p=t.submissionRecord.customerProfile.isCurrentCustomer,g={reviewItemStrings:a,reviewListIndex:e,requestContext:n,titleID:i,reviewID:t.reviewID,token:t.postReviewInteractionToken,translationToken:t.getTranslationsToken,reviewLanguage:t.reviewLanguage,reviewMarketplace:t.reviewMarketplaceID,versionNumber:t.versionNumber,localeLanguage:o,enableInteractionActions:!p&&!r},_=l&&l.status,b=l&&l.translation,v=_===Ut.X.Translated&&b?b.textTranslation:d,D=_===Ut.X.Translated&&b?b.titleTranslation:t.reviewTitle,E=c?s.createElement(L.Link,{target:"_blank","aria-label":a.verifiedPurchaseLabel,"data-automation-id":"review-verified-purchase-link",href:c,className:f},a.verifiedPurchaseLabel):s.createElement("span",{className:f},a.verifiedPurchaseLabel);return s.createElement("div",{key:e,className:h,"data-automation-id":`review-item-${e}`,ref:m},s.createElement(Ea,{submissionRecord:t.submissionRecord,ariaLabel:a.profileAriaLabel,automationId:`customer-profile-link-${e}`,isRetail:n.isRetail}),s.createElement(va,{rating:t.rating,reviewTitle:D,hoverText:t.hoverText,testId:`review-rating-tooltip-${e}`,containerRef:m}),t.isVerifiedPurchase&&E,s.createElement(fa,{htmlContent:v,uniqueId:`review-expander-${e}`}),u.helpfulVotesText&&s.createElement("span",{className:y},u.helpfulVotesText),s.createElement(Xt,g))},Ta=({submittedReview:e,reviewItemStrings:t,requestContext:a,isFirestormReviewsEnabled:i,isReviewsSubmissionEnabled:n})=>{const r=s.useRef(null);if(!i||null==e||!e.customerSubmittedReviewContent)return null;const{rating:o,isVerifiedPurchase:l,isUnprocessed:c}=e,{reviewContent:d,reviewTitle:u,reviewID:m,hoverText:p,submissionRecord:g,helpfulVotes:_}=null==e?void 0:e.customerSubmittedReviewContent;return s.createElement("div",{className:M(h,b),"data-automation-id":"user-submitted-review",ref:r},s.createElement(Ea,{submissionRecord:g,ariaLabel:t.profileAriaLabel,isRetail:a.isRetail,automationId:"current-customer-profile-link",isPendingApproval:c,pendingApprovalLabel:t.pendingApprovalLabel}),s.createElement(va,{rating:o,reviewTitle:u,hoverText:p,testId:"current-customer-review-rating-tooltip",containerRef:r}),l&&s.createElement("span",{className:f},t.verifiedPurchaseLabel),s.createElement(fa,{htmlContent:d,uniqueId:`review-expander-${m}`}),_.helpfulVotesText&&s.createElement("span",{className:y},_.helpfulVotesText),n&&s.createElement(da,null))},Ia=({reviewIds:e,isInternational:t,reviewIdToReview:a,reviewItemStrings:i,pageTitleId:n,requestContext:r,localeLanguage:o,reviewIdToTranslatedReview:l,verifiedPurchaseLink:c})=>s.createElement(s.Fragment,null,e.map(((e,d)=>{const u=a[e],m=null==l?void 0:l[e];if(!u||u.submissionRecord.customerProfile.isCurrentCustomer)return null;const p={reviewModel:u,reviewListIndex:d,reviewItemStrings:i,pageTitleId:n,requestContext:r,isInternational:t,localeLanguage:o,translatedReviewModel:m,verifiedPurchaseLink:c};return s.createElement(wa,pa({},p,{key:d}))}))),Ca=(0,i.$j)((e=>({reviews:n.mZ.reviews(e),translatedReviews:n.mZ.translatedReviews(e),requestContext:(0,Ct.Iz)(e),pageTitleId:e.pageTitleId,isFirestormReviewsEnabled:(0,qt.xu)(e),isReviewsTranslationEnabled:(0,qt.Kv)(e),maybeDetailFragment:n.mZ.moreDetails(e),reviewSubmission:n.mZ.reviewSubmission(e),isReviewsSubmissionEnabled:(0,qt.nV)(e),checkReviewEligibility:(0,qt.hu)(e),enableCQS1DescSorting:Boolean(e.features.enableCQS1DescSorting)})),(e=>({fetchReviews:(t,a,s)=>e((0,Qe.Bt)(t,a,s))})))((({reviews:e,requestContext:t,pageTitleId:a,isFirestormReviewsEnabled:i,maybeDetailFragment:n,isReviewsTranslationEnabled:d,translatedReviews:h,fetchReviews:b,reviewSubmission:v,isReviewsSubmissionEnabled:D,checkReviewEligibility:E,enableCQS1DescSorting:f})=>{var y,w;const{getString:T,clickStreamPageType:I,clickStreamSubPageType:C,refTagTitleId:N}=s.useContext(ge.h),[x,k]=s.useState((0,r.JJ)(f));if(!e)return null;const R=null==h?void 0:h.reviewIdToTranslatedReview,V=null==h?void 0:h.status,{reviewIdToReview:W,reviewsOrdering:O,internationalReviewsOrdering:U,localeLanguage:j,reviewTitleId:$,verifiedPurchaseLink:q}=e,G=(0,r.fp)(x),Z=(O[G]||[]).filter((e=>!W[e].submissionRecord.customerProfile.isCurrentCustomer)),Q=Boolean(null==v||null===(y=v.customerSubmittedReview)||void 0===y?void 0:y.customerSubmittedReviewContent),Y=T(t.isRetail?"DV_CR_write_review_label":"DV_CR_write_review_label_other"),X={reviewsHeader:T("DV_CR_reviews_header"),ratingsExplanationHeader:T("DV_CR_reviews_explanation_header"),ratingsExplanationText:T("DV_CR_reviews_explanation_text"),writeReviewText:Y},K={helpfulButtonText:T("DV_CR_helpful_button_label"),reportAbuseText:T("DV_CR_report_abuse_label"),reportAbuseMessage:T("DV_CR_report_abuse_message",{site:(0,Nt.c3)(t.rawContext.marketplaceID)}),profileAriaLabel:T("DV_CR_profile_aria_label"),successfulMessage:T("DV_CR_thank_you_feedback"),unsuccessfulMessage:T("DV_CR_vote_unsuccessful"),confirmLabel:T("DV_CR_confirm_label"),inProgressLabel:T("DV_CR_sending_feedback"),verifiedPurchaseLabel:T("DV_CR_verified_purchase"),showOriginalReviewLabel:T("DV_CR_show_original_review"),translationErrorMessage:T("DV_CR_translation_error"),translatingMessage:T("DV_CR_translating_review"),pendingApprovalLabel:T("DV_CR_approval_pending")},J={reviewsAnalysisModel:e.reviewsAnalysisModel,createReviewLink:e.createReviewLink,isRetail:t.isRetail,reviewsHistogramStrings:X,checkReviewEligibility:E},ee=!(0,ua.xb)(Z)||x!==(0,r.JJ)(f),te=null===(w=e.reviewsAnalysisModel)||void 0===w?void 0:w.reviewRatingInfo,ae=te?T("DV_CR_fallback_with_ratings",{ratingCount:`${te.totalReviewCount}`}):T("DV_CR_fallback_no_ratings"),se=T(te?"DV_CR_first_to_review":"DV_CR_first_to_rate");if((0,ua.xb)(U)&&!ee)return s.createElement(Ke.Provider,{value:{reviewSubmission:v,maybeDetailFragment:n,isReviewsSubmissionEnabled:D,reviewTitleId:$}},s.createElement(z.Container,{className:M(H.Z.pageSection,o),testID:A.jn},s.createElement(Tt,J),s.createElement("div",{className:l},s.createElement(Ta,{submittedReview:null==v?void 0:v.customerSubmittedReview,reviewItemStrings:K,requestContext:t,isFirestormReviewsEnabled:i,isReviewsSubmissionEnabled:D}),i?!Q&&s.createElement(ya,{buttonText:se,fallbackMessage:ae}):s.createElement("div",{id:A.jn,className:c},s.createElement("p",{className:u},ae)))));const ie=T(ba[x]),ne=t.isRetail?T((()=>{switch(t.rawContext.marketplaceID){case Nt.HZ.UK:return"UK_DV_CR_sorting_header";case Nt.HZ.DE:return"DE_DV_CR_sorting_header";case Nt.HZ.JP:return"JP_DV_CR_sorting_header";default:return"US_DV_CR_sorting_header"}})(),{sortingType:ie}):ie,re=e=>()=>{const s=(0,r.fp)(e);O[s]||b(t.rawContext,a,e),e!==x&&(0,me.XQ)((0,pe.i)(ha[e]),I,C,N),k(e)},oe=(e=>e?ga:_a)(f).map((e=>{const t=e===x,a=T(ba[e]),i=`dropList-option-${e}`;return{id:i,name:e,text:s.createElement("span",{className:M({[_]:t})},a),isHighlighted:t,onClick:re(e),ariaLabel:a,testID:i}})),le=()=>Object.keys(W).some((e=>W[e].reviewLanguage!=j))&&d&&i?s.createElement(Da,{reviewIdToReview:W,pageTitleId:a,requestContext:t.rawContext,reviewIdToTranslatedReview:R,reviewItemStrings:K,localeLanguage:j,batchTranslationStatus:V}):null,ce=()=>s.createElement(s.Fragment,null,s.createElement("div",{className:g},s.createElement("span",null,`${T("DV_CR_sorted_by")}:`),s.createElement(B.x,{links:oe,customDropListID:"reviews-sorting-droplist",isCustomTrigger:!0,right:!1,customText:ie})),s.createElement("p",{className:m},ne),s.createElement(le,null),s.createElement(Ia,{reviewIds:Z,reviewIdToReview:W,requestContext:t,isInternational:!1,pageTitleId:a,reviewItemStrings:K,localeLanguage:j,reviewIdToTranslatedReview:R,verifiedPurchaseLink:q}),!O[G]&&s.createElement(dt.Spinner,{className:P}),s.createElement(L.Link,{className:S,href:e.allReviewsLink,testID:"see-all-reviews-link",target:t.isRetail?void 0:"_blank"},s.createElement(It.H1,{stringID:"DV_CR_see_all_reviews"}),s.createElement(F(),null)));return s.createElement(Ke.Provider,{value:{reviewSubmission:v,maybeDetailFragment:n,isReviewsSubmissionEnabled:D,reviewTitleId:$}},s.createElement(z.Container,{className:M(H.Z.pageSection,o),testID:A.jn},s.createElement(Tt,J),s.createElement("div",{id:A.jn,className:l},s.createElement(Ta,{submittedReview:null==v?void 0:v.customerSubmittedReview,reviewItemStrings:K,requestContext:t,isFirestormReviewsEnabled:i,isReviewsSubmissionEnabled:D}),ee?s.createElement(ce,null):!Q&&s.createElement(ya,{buttonText:se,fallbackMessage:ae}),U&&s.createElement(s.Fragment,null,s.createElement("p",{className:p},s.createElement(It.H1,{stringID:"DV_CR_other_countries_header"})),!ee&&s.createElement(le,null),s.createElement(Ia,{reviewIds:U,reviewIdToReview:W,requestContext:t,isInternational:!0,pageTitleId:a,reviewItemStrings:K,localeLanguage:j,reviewIdToTranslatedReview:R,verifiedPurchaseLink:q})))))}))},"./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx":(e,t,a)=>{"use strict";a.d(t,{v:()=>n});var s=a("./node_modules/react/index.js"),i=a("./src/util/utils/htmlEncode.ts");const n=({string:e,dir:t})=>{const a=(0,i.l_)(e);return t?s.createElement("div",{dir:t},a):s.createElement(s.Fragment,null,a)};n.displayName="DecodedText"},"./src/widgets/DVWebNodeDetail/components/episode/episode.tsx":(e,t,a)=>{"use strict";a.d(t,{IH:()=>Ke,Di:()=>Xe});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Icon.js"),r=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),o=a("./node_modules/classnames/index.js"),l=a("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),c=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),d=a("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx"),u=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),m=a("./src/widgets/DVWebNodeDetail/components/badges/rating.tsx"),p=a("./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx"),g=a("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx"),_=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),h=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),b=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts");const v="_1m3vYN",D="_3AyX4X",E="_1xmStQ",f="_2_tMJv",y="_1mqoy0",w="_1lv3_I",T="_8zva7N",I="_5z10t5",C="_18-IMw",N="_3rBDNv",S="_2ylebW",P="_1AeKJC",x="_183II6",k="_3H_upi",R="_3AYzRc",V="_25ms-X",A="_3rGz9Q",W="_37BttJ",L="Nv3Xop",O="_32ofHT",B="_1bMF2Z",M="_3O8f6g",U="D_eUDh",j="_1DaMEm",F="_1DcCXQ",H="_3HWCZi",z="_1oG1O2",$="_1sJL4w",q="_2t47xc",G="_22aV2Q",Z="_2LTqX6",Q="_8uOACN",Y="_2_ujMf",X="_1vaxaA",K="_1BaXP2",J="U98H7I";var ee=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),te=a("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),ae=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),se=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),ie=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),ne=a("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),re=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),oe=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),le=a("./src/widgets/DVWebNodeDetail/selectors/player.ts"),ce=a("./src/shared/SPA/downloadButton/DownloadButton.tsx"),de=a("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts"),ue=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),me=a("./src/shared/deeplink/index.ts"),pe=a("./src/util/api/util.ts"),ge=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),_e=a("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts"),he=a("./node_modules/@amzn/dvui/dist/Alert.js"),be=a("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),ve=a("./src/shared/SPA/SpaContext.tsx"),De=a("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx");const Ee="YdzgWD",fe="_2VUbAU",ye="_2gXf-f",we="_2wijuy",Te=({progress:e,resumeTime:t})=>s.createElement("div",{className:we},t&&s.createElement("div",{className:Ee,"data-automation-id":"dv-progress-resume-text"},t),s.createElement("div",{className:fe},s.createElement("div",{className:ye,style:{width:`${e}%`}}))),Ie="_6OzeJK",Ce="_1Tp1Im",Ne="_28GUUV",Se="_1ksgDL";var Pe=a("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx"),xe=a("./src/shared/player/integration/playbackArea.tsx"),ke=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts");const Re=({playbackActions:e,sequenceNumber:t,isBonus:a=!1,progress:i,isMShop:n})=>{const r=(0,b.MG)(e);if(!r)return null;const o=r.playbackID,l=(0,ke.D)(r),c={signInUrl:r.signInURL,playbackUrl:r.playbackURL,fallbackUrl:r.fallbackURL,sequenceNumber:t,isBonus:a,contentConfig:{asin:o,trailer:!1,position:r.resumeTime,ref:r.playerRefMarker,videoType:r.videoMaterialType,useFullView:!0,playbackEnvelope:l},subscriptionName:r.subscriptionName,triggerLocation:"EpisodeList",refMarker:r.refMarker};return s.createElement(xe.ET.Consumer,null,(({onPlay:e})=>s.createElement(Pe.JM,{isStartOver:100===i,href:n?void 0:r.playbackURL,onPlayButtonClick:t=>{e(c),t.preventDefault()}})))};var Ve=a("./node_modules/@amzn/dvui/dist/Text.js"),Ae=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),We=a("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx");const Le="-M9Hul",Oe="_2xfMBG",Be="S4388s",Me="_99C2kw",Ue="_1xW9KC",je=({episodeNumber:e,episodeName:t})=>s.createElement("div",{className:Le},s.createElement(Ve.Text,{string:"E"+e}),s.createElement(Ve.Text,{className:Oe,string:" - "}),s.createElement(Ve.Text,{className:Be,string:t})),Fe=({notificationActions:e})=>s.createElement(s.Fragment,null,(e||[]).filter((({severity:e})=>!e||["CRITICAL","ERROR"].includes(e))).map(((e,t)=>s.createElement(Ve.Text,{key:`nt-action-message-${t}`,className:Ue,string:e.message})))),He=({messages:e})=>e&&e.length>0?s.createElement("span",null,e.map(((e,t)=>s.createElement(Ve.Text,{string:e,key:`pb-action-message-${t}`})))):null,ze=({title:e,sequenceNumber:t,isBonus:a,entityType:i})=>(0,Ae.Z4)(i)||!t&&!a?s.createElement(l.v,{string:e}):s.createElement(je,{episodeName:a?"Bonus":e,episodeNumber:t}),$e=({title:e,sequenceNumber:t,isBonus:a=!1,entityType:i,playbackActions:n,notificationActions:r})=>s.createElement(s.Fragment,null,s.createElement("div",{className:Le},e&&s.createElement(ze,{title:e,sequenceNumber:t,isBonus:a,entityType:i})),s.createElement("div",{className:Me},s.createElement(Fe,{notificationActions:r}),s.createElement(He,{messages:(0,b.D8)(n)}))),qe=(0,ve.cG)((e=>{const{playbackActions:t,purchaseDetails:a,isRefunding:i}=e,n=(0,b.MG)(t),r=Boolean(n),o=Boolean(a)||i;return s.createElement("div",null,!o&&s.createElement($e,e),o&&s.createElement(We.UQ,{text:r?"":a&&a.details&&a.details.offer.purchaseData.text||"",useSmallSpinner:!0}))}));var Ge=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");function Ze(){return Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ze.apply(this,arguments)}const Qe=(e,t,a,i)=>{const n=s.createElement(c.H1,{stringID:e}),o=s.createElement(s.Fragment,null,s.createElement("div",{className:q},n),s.createElement("span",{className:G},s.createElement(l.v,{string:t,dir:"auto"})));return s.createElement(r.Tooltip,{content:o,position:"top",size:"m",tabIndex:0,id:a,containerRef:i},n)};const Ye=(0,Ge.QI)((function({packshotUrl:e,isWatched:t}){if(!e)return s.createElement("div",{className:`${O} ${B}`},s.createElement(n.Icon,{use:n.IconType.SMILE}));const a={alt:"",src:e,baseValue:268,srcSizes:[{"max-phablet":148},{"min-desktop":268}],isLazy:!0},i=o(O,{[M]:t});return s.createElement("div",{className:i,"data-is-watched":t},s.createElement(u.t,a))}),(({packshotUrl:e,progress:t,runTime:a})=>{if(!e)return s.createElement("div",{className:Ie},s.createElement("div",{className:`${Ce} ${Se}`},s.createElement(n.Icon,{use:n.IconType.SMILE})));const i=100===t,r=a&&t?(e=>{if(!e)return"";const t=Math.floor(e/3600);let a=e/60%60;a=a<1&&a>0?1:Math.floor(a);let s="";return t&&(s+=`${t} h`,s+=" "),a&&(s+=`${a} ${a>1?"mins":"min"}`),s+=" left",s})(((e,t)=>t*(100-e)/100)(t,a)):void 0,l={alt:"",src:e,baseValue:289,isLazy:!0},c=o(Ce,{[Ne]:i});return s.createElement("div",{className:Ie},s.createElement("div",{className:c,"data-is-watched":i},s.createElement(u.t,l),!!t&&s.createElement(Te,{progress:t,resumeTime:r})))})),Xe=(e,t)=>{const a=(0,ne.G)(e);return!a||a.details&&a.details.canonicalId!==t&&!(0,pe.aP)(a.details.offer.purchaseData.isSeasonPurchase)?null:a},Ke=(0,i.$j)(((e,t)=>({playerConfigData:(0,le.UH)(e),action:e.action[re.L5][t.titleId],detail:e.detail[oe.Xt][t.titleId],requestContext:(0,ie.Iz)(e),pageTitleId:e.pageTitleId,purchaseDetails:Xe(e,t.titleId),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),isMShop:(0,ue.gK)(e),downloadLaunchType:e.pageContext.downloadLaunchType,metadata:e.metadata[t.titleId]})))((0,ve.cG)((0,Ge.QI)((e=>{const{getString:t,isDCSAnalyticsCallEnabled:a}=s.useContext(ge.h),i=s.useRef(null),{playerConfigData:r,detail:l,action:c,titleId:u,epListIndex:v,isFirstEpisode:D,isBonus:E,pageTitleId:f,requestContext:{rawContext:y},purchaseDetails:w,isRefunding:T,isMShop:I,downloadLaunchType:C,downloads:N,metadata:S}=e,{title:P,subtitles:x,audioTracks:k,playbackTracks:O,images:B,releaseDate:M,runtime:q,synopsis:G}=l,ie=c&&c.playbackActions,ne=c&&c.downloadActions,re=c&&c.notificationActions,oe=c&&c.watchPartyAction,le=c&&c.acquisitionActions,ue=(0,b.MG)(ie),pe=(0,de.Lu)(ne),ve=Boolean(ue),Ee=l&&l.episodeNumber,fe=(0,_e.O)(re),ye=(0,_e.X)(re),we=(null==S?void 0:S.maturityRating)||l.ratingBadge,Te={title:P,playbackActions:ie,playerConfigData:r,sequenceNumber:Ee,notificationActions:re,entityType:l&&l.entityType,isBonus:E,titleId:u,purchaseDetails:w,isRefunding:T,duration:l&&l.duration,isMShop:I},Ie="NONE"===C||"EMBEDDED"===C?void 0:e=>{e.preventDefault(),(0,me.b)(a)[C]({url:pe.downloadURL,fallbackUrl:pe.fallbackURL})},Ce=(0,de.Tg)(pe,[]),Ne=pe&&{...pe,isMovie:!1,episodeNumber:Ee,onClick:Ie,downloadURL:I?void 0:pe.downloadURL,playbackTracks:O,title:P,titlesRentalMetadata:Ce}||N&&N[u]&&{label:"",downloadURL:"",titleID:u,episodeNumber:l.episodeNumber,isMovie:"Movie"===l.entityType,onClick:Ie,playbackTracks:O,title:P,titlesRentalMetadata:Ce},Se={packshotUrl:B&&B.packshot,isWatched:Boolean(ue&&(0,_.Nw)(ue.progress))},Pe=t("DV_comma_separator"),xe=(x||[]).join(Pe),ke=(k||[]).join(Pe),Re=(0,ae.YD)(le&&le.tvodWinners).map((e=>e.asin||null)).filter(Boolean),Ve=(0,ae.c0)(le&&le.moreWaysToWatch).map((e=>(0,se.bd)(e)&&e.asin||null)).filter(Boolean),Ae=Array.from(new Set([...Ve,...Re])),We=Boolean(Ne),Le=o(R,"js-node-episode-container",{[Z]:ve,[Q]:We}),Oe={notificationActions:re,acquisitionActions:le,sequenceNumber:Ee,pageTitleId:f,titleID:u,isPurchasing:Boolean(w),isRefunding:T,rawContext:y,watchPartyAction:oe},Be=`av-ep-${v}`;return s.createElement("li",{id:Be,"data-aliases":Ae.join(","),className:Le,ref:i},s.createElement("input",{id:`selector-${u}`,name:"highlight-list-selector",className:V,type:"checkbox",defaultChecked:D&&!E}),s.createElement("label",{className:L,htmlFor:`selector-${u}`}),s.createElement("label",{className:W,htmlFor:`selector-${u}`},s.createElement(n.Icon,{use:n.IconType.BREADCRUMB_CHEVRON,className:A})),s.createElement("div",{"data-automation-id":`ep-title-${e.epListIndex}`,className:j},s.createElement(p.s,Te),We&&s.createElement(ce.o6,Ze({},Ne,{containerRef:i,id:`download-ep-${Be}`}))),s.createElement("div",{className:o(F,Y)},M&&s.createElement("div",null,M),q&&s.createElement("div",null,q),s.createElement("div",{className:H},s.createElement(m.i,{ratingBadge:we})),(0,h.Db)(x)&&s.createElement("div",{className:z},Qe("DV_TW_title_subtitles",xe,`subt-${Be}`,i)),(0,h.Db)(k)&&s.createElement("div",{className:$},Qe("DV_TW_title_languages",ke,`lang-${Be}`,i))),s.createElement("div",{className:Y},s.createElement(Ye,Se)),s.createElement("div",{className:o(U,Y)},s.createElement(d.GR,{synopsis:String(G),numOfLines:2,expanderId:`synopsis-${u}`})),s.createElement("div",{className:o(te.t.offers,X,ee.Z.fullWidth,Y)},s.createElement(g.Pz,Oe)),(0,h.Db)(fe)&&s.createElement("div",{className:o(Y,J)},s.createElement(be.y,{Tag:he.WarningAlert,messages:fe})),(0,h.Db)(ye)&&s.createElement("div",{className:K},s.createElement(De.Kr,{messages:ye})))}),(e=>{const{isDCSAnalyticsCallEnabled:t}=s.useContext(ge.h),a=s.useRef(null),{playerConfigData:i,detail:n,action:r,titleId:l,epListIndex:c,isFirstEpisode:u,isBonus:p,pageTitleId:R,requestContext:{rawContext:V},purchaseDetails:A,isRefunding:W,isMShop:L,downloadLaunchType:O,downloads:B,metadata:M}=e,{title:U,playbackTracks:j,images:F,releaseDate:H,runtime:z,synopsis:$}=n,q=r&&r.playbackActions,G=r&&r.downloadActions,Z=r&&r.notificationActions,Q=r&&r.watchPartyAction,Y=r&&r.acquisitionActions,X=(0,b.MG)(q),K=(0,de.Lu)(G),J=n&&n.episodeNumber,ie=(0,_e.O)(Z),ne=(0,_e.X)(Z),re=(null==M?void 0:M.maturityRating)||n.ratingBadge,oe={title:U,playbackActions:q,playerConfigData:i,sequenceNumber:J,notificationActions:Z,entityType:n&&n.entityType,isBonus:p,titleId:l,purchaseDetails:A,isRefunding:W,duration:n&&n.duration,isMShop:L},le="NONE"===O||"EMBEDDED"===O?void 0:e=>{e.preventDefault(),(0,me.b)(t)[O]({url:K.downloadURL,fallbackUrl:K.fallbackURL})},ue=(0,de.Tg)(K,[]),pe=K&&{...K,isMovie:!1,episodeNumber:J,onClick:le,downloadURL:L?void 0:K.downloadURL,playbackTracks:j,title:U,titlesRentalMetadata:ue}||B&&B[l]&&{label:"",downloadURL:"",titleID:l,episodeNumber:n.episodeNumber,isMovie:"Movie"===n.entityType,onClick:le,playbackTracks:j,title:U,titlesRentalMetadata:ue},ve=X?(0,_.fZ)(B,X.playbackID,n.duration):0,Ee=Math.max(ve,(0,_._y)(null==X?void 0:X.progress)),fe={packshotUrl:F&&F.packshot,progress:Ee,runTime:null==X?void 0:X.runTime},ye=(0,ae.YD)(Y&&Y.tvodWinners).map((e=>e.asin||null)).filter(Boolean),we=(0,ae.c0)(Y&&Y.moreWaysToWatch).map((e=>(0,se.bd)(e)&&e.asin||null)).filter(Boolean),Te=Array.from(new Set([...we,...ye])),Ie=Boolean(pe),Ce={notificationActions:Z,acquisitionActions:Y,sequenceNumber:J,pageTitleId:R,titleID:l,isPurchasing:Boolean(A),isRefunding:W,rawContext:V,watchPartyAction:Q},Ne=`av-ep-${c}`;return s.createElement("li",{id:Ne,"data-aliases":Te.join(","),className:v,ref:a},s.createElement("div",{className:D},s.createElement("input",{id:`selector-${l}`,name:"highlight-list-selector",className:f,type:"checkbox",defaultChecked:u&&!p}),s.createElement("div",{className:w},s.createElement("div",{className:T},s.createElement(Re,Ze({},oe,{progress:Ee}))),s.createElement("div",{className:I},s.createElement("label",{className:E,htmlFor:`selector-${l}`}),s.createElement(qe,oe)),Ie&&s.createElement(ce.o6,Ze({},pe,{containerRef:a,id:`download-ep-${Ne}`}))),s.createElement("div",{className:o(y,P)},s.createElement(Ye,fe)),s.createElement("div",{className:o(N,P)},H&&s.createElement("div",null,H),z&&s.createElement("div",null,z),s.createElement(m.i,{ratingBadge:re})),s.createElement("div",{className:o(S,P)},s.createElement(d.GR,{synopsis:String($),numOfLines:2,expanderId:`synopsis-${l}`})),s.createElement("div",{className:o(te.t.offers,C,ee.Z.fullWidth,P)},s.createElement(g.Pz,Ce)),(0,h.Db)(ie)&&s.createElement("div",{className:o(P,k)},s.createElement(be.y,{Tag:he.WarningAlert,messages:ie})),(0,h.Db)(ne)&&s.createElement("div",{className:x},s.createElement(De.Kr,{messages:ne}))))}))))},"./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx":(e,t,a)=>{"use strict";a.d(t,{mO:()=>S,kw:()=>L});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Link.js"),n=a("./node_modules/@amzn/dvui/dist/Spinner.js"),r=a("./src/widgets/DVWebNodeDetail/components/episode/episode.tsx"),o=a("./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx");const l="y2P7qQ",c="XR0d6P",d="_2LDRL1",u="_19o-TA",m="ObkQ-7",p="_1kuDbg",g="gbhO61",_="_1xQD-Q";var h=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),b=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),v=a("./src/widgets/DVWebNodeDetail/utils/wps.ts"),D=a("./node_modules/react-redux/es/index.js"),E=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),f=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),y=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts"),w=a("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx"),T=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),I=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),C=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),N=a("./src/shared/utils/analytics/recordReftag.tsx");const S=0;let P;!function(e){e.EpisodeNumberAscending="EpisodeNumberAscending",e.EpisodeNumberDescending="EpisodeNumberDescending",e.Available="Available"}(P||(P={}));const x={EpisodeNumberAscending:"DV_DP_EPISODE_NUM_ASCENDING",EpisodeNumberDescending:"DV_DP_EPISODE_NUM_DESCENDING",Available:"DV_DP_EPISODE_AVAILABLE"},k={EpisodeNumberAscending:(0,T.i)("atv_dp_ep_ena"),EpisodeNumberDescending:(0,T.i)("atv_dp_ep_end"),Available:(0,T.i)("atv_dp_ep_av")},R={EpisodeNumberAscending:e=>e,EpisodeNumberDescending:e=>[...e].reverse(),Available:(e,t)=>[...e.filter((e=>t[e])),...e.filter((e=>!t[e]))]},V=[P.EpisodeNumberAscending,P.EpisodeNumberDescending,P.Available],A=(e,t)=>t?x[e]:"DV_DP_EPISODE_SORT_BY";class W extends s.Component{constructor(e){var t,a,s;super(e),s=(e,t,a,s,i)=>n=>{const{requestContext:r,pageTitleId:o,isElcano:l,totalEpisodeSize:c,cardTitleIds:d,requestEpisodes:u}=this.props;n.preventDefault(),s&&this.state.sortingState===s||(0,N.XQ)(s?k[s]:(0,T.i)("atv_dp_ep_exp"),t,a,i,void 0,void 0,e),this.setState((e=>s&&e.sortingState===s?e:{episodesHidden:!1,sortingState:s||e.sortingState,sortingChanged:e.sortingChanged||void 0!==s})),d.length<c&&u(r.rawContext,o,l,y.Wq,c-y.Wq)},(a="onClickHandler")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={episodesHidden:e.cardTitleIds.length<e.totalEpisodeSize,sortingState:P.EpisodeNumberAscending,sortingChanged:!1}}componentDidMount(){const{requestContext:e,pageTitleId:t,isElcano:a,collectionType:s,totalEpisodeSize:i,cardTitleIds:n,episodesSeen:r,requestEpisodes:o}=this.props;"episodes"===s&&n.length<i&&r>=y.Wq&&(o(e.rawContext,t,a,y.Wq,i-y.Wq),this.setState({episodesHidden:!1}))}shouldComponentUpdate(e,t){return e.cardTitleIds!==this.props.cardTitleIds||t.sortingState!==this.state.sortingState||t.episodesHidden!==this.state.episodesHidden}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:a,collectionType:b,pageTitleId:v,requestContext:D,titleIdToAvailable:f}=this.props,{episodesHidden:T,sortingState:C,sortingChanged:N}=this.state,P=t.length<a;if(!b)return null;const k="episodes"!==b||P?t:R[C](t,f);return s.createElement(I.h.Consumer,null,(({getString:t,clickStreamPageType:f,clickStreamSubPageType:I,refTagTitleId:R,isDCSAnalyticsCallEnabled:W})=>{const L=k.map(((e,t)=>{const a={titleId:e,collectionType:b,epListIndex:`${b}-${t}`,isFirstEpisode:0===t,isBonus:"bonus"===b};return s.createElement(s.Fragment,{key:`episode-${e}-${t}`},s.createElement(r.IH,a))}));if(0===(L||[]).length)return null;const O=V.map((e=>{const a=e===C,i=x[e];return{id:e,name:e,text:s.createElement("span",{className:a?_:""},s.createElement(h.H1,{stringID:i})),isHighlighted:a,onClick:this.onClickHandler(W,f,I,e,R),ariaLabel:t(i)}})),B={get:{episodeListSize:`${a}`}},M=D.makeUrl((0,E.K1)(v),B);if("episodes"===b)return s.createElement("div",{className:l},s.createElement("div",{className:g},e&&s.createElement("h1",{className:p},e," (",a,")"),s.createElement(w.x,{links:O,customDropListID:"sorting-droplist",isCustomTrigger:!0,right:!0,customText:t(A(C,N))})),s.createElement("ol",{className:c},L.slice(S,y.Wq),s.createElement("span",{className:T?d:""},P?s.createElement("div",{className:m},s.createElement(n.Spinner,null)):L.slice(y.Wq))),T&&s.createElement(i.Link,{className:u,href:M,onClick:this.onClickHandler(W,f,I,void 0,R),"data-automation-id":"ep-expander","data-testid":"ep-expander",ariaLabel:t("DV_DP_EPISODE_EXPANDER",{episodeCount:`${a}`})},s.createElement(h.H1,{stringID:"DV_DP_EPISODE_EXPANDER",replace:{episodeCount:`${a}`}})));{const t={totalEpisodeSize:a,collectionType:b};return s.createElement("div",{className:l},e&&s.createElement("h1",{className:p},e," (",a,")"),s.createElement("ol",{className:c},L),s.createElement(o.bG,t))}}))}}const L=(0,C.n)((0,D.$j)((e=>({requestContext:(0,b.Iz)(e),pageTitleId:e.pageTitleId,isElcano:Boolean(e.features.isElcano),episodesSeen:(0,f.C9)(e),titleIdToAvailable:(0,f.ZA)(e)})),(e=>({requestEpisodes:(t,a,s,i,n)=>e((0,v.P_)(t,a,s,i,n))})))(W))},"./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx":(e,t,a)=>{"use strict";a.d(t,{s:()=>A});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Text.js"),n=a("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx"),r=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),l=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),c=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts");const d="_1d-Ol9",u="_2Hg1l0",m="_1WPBbu",p="_13U24C",g="_3YGDrM",_="_26nAHL",h="_2M-myL",b="_3Kqcn7",v="_2t8khh";var D=a("./node_modules/classnames/index.js"),E=a("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),f=a("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),y=a("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),w=a("./src/shared/player/integration/playbackArea.tsx"),T=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),I=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),C=a("./src/shared/SPA/SpaContext.tsx");function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},N.apply(this,arguments)}const S=({notificationActions:e})=>s.createElement(s.Fragment,null,(e||[]).filter((({severity:e})=>!e||["CRITICAL","ERROR"].includes(e))).map((e=>s.createElement("span",{className:_},s.createElement(i.Text,{string:e.message}))))),P=({messages:e})=>e&&e.length>0?s.createElement("span",{className:_},e.map(((e,t)=>s.createElement(x,{key:`pb-action-message-${t}`,message:e})))):null,x=({message:e})=>s.createElement("span",{className:h},s.createElement(i.Text,{string:e})),k=({title:e,sequenceNumber:t,isBonus:a,entityType:i})=>e?(0,o.Z4)(i)||!t&&!a?s.createElement(E.v,{string:e}):a?s.createElement(r.H1,{stringID:"DV_DP_EL_bonus_title_template",replace:{episodeTitle:e},shouldDecode:!0,dir:"auto"}):s.createElement(r.H1,{stringID:"DV_DP_EL_episode_title_template",replace:{sequenceNumber:t?t.toString():"",episodeTitle:e},shouldDecode:!0,dir:"auto"}):null,R=({title:e,purchaseDetails:t,sequenceNumber:a,isBonus:i=!1,entityType:n,playbackActions:r,notificationActions:o,inProgress:l})=>s.createElement("div",{className:`dv-episode-noplayback-title ${g}`},s.createElement("div",{className:D({[u]:l,[m]:Boolean(t)},d)},s.createElement(k,{title:e,sequenceNumber:a,isBonus:i,entityType:n})),s.createElement(S,{notificationActions:o}),s.createElement(P,{messages:(0,c.D8)(r)})),V=({title:e,playbackActions:t,sequenceNumber:a,isBonus:i=!1,entityType:r,downloads:o,duration:d,isMShop:u})=>{const{getString:m}=s.useContext(T.h),p=(0,c.MG)(t);if(!p)return null;const g=e?a?m("DV_DP_ARIA_watch_episode",{episodeNumber:a.toString(),episodeTitle:e}):m("DV_DP_ARIA_watch_title",{title:e}):void 0,_=p.playbackID,h=(0,I.D)(p),D={signInUrl:p.signInURL,playbackUrl:p.playbackURL,fallbackUrl:p.fallbackURL,sequenceNumber:a,isBonus:i,contentConfig:{asin:_,trailer:!1,position:p.resumeTime,ref:p.playerRefMarker,videoType:p.videoMaterialType,useFullView:!0,playbackEnvelope:h},subscriptionName:p.subscriptionName,triggerLocation:"EpisodeList",refMarker:p.refMarker},E=Math.max((0,l.fZ)(o,_,d),(0,l._y)(p.progress));return s.createElement(s.Fragment,null,s.createElement("div",{className:`dv-episode-playback-title ${b}`},s.createElement(w.ET.Consumer,null,(({onPlay:t})=>s.createElement(n.oe,{progress:E,ariaLabel:g,href:u?void 0:p.playbackURL,onClick:e=>{t(D),e.preventDefault()}},s.createElement("div",{className:`js-episode-title-name ${v}`},s.createElement(k,{title:e,sequenceNumber:a,isBonus:i,entityType:r})))))))},A=(0,C.cG)((e=>{const{playbackActions:t,purchaseDetails:a,isRefunding:i}=e,n=(0,c.MG)(t),r=Boolean(n),o=Boolean(a)||i;return s.createElement("div",{className:`js-eplist-episode ${y.t.playback}`},n?s.createElement(V,e):s.createElement(R,N({},e,{inProgress:o})),o&&s.createElement(f.UQ,{className:p,text:r?"":a&&a.details&&a.details.offer.purchaseData.text||"",useSmallSpinner:!0}))}))},"./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx":(e,t,a)=>{"use strict";a.d(t,{O3:()=>l});var s=a("./node_modules/react/index.js");const i="fOnUwr";var n=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),r=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");const o=(0,a("./node_modules/react-redux/es/index.js").$j)((e=>({requestContext:(0,r.Iz)(e)})))((0,n.n)((e=>{const{requestContext:{isInternal:t},error:a,logger:n}=e,r=`Fatals found in Data: ${a}`;return n.error(r),t?s.createElement("div",{className:i},r):null}))),l=e=>t=>function(e){return!!e&&Boolean(e.error)}(t)?s.createElement(o,t):s.createElement(e,t)},"./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx":(e,t,a)=>{"use strict";a.d(t,{yv:()=>se,fs:()=>te});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Link.js"),n=a("./node_modules/@amzn/dvui/dist/Modal.js");const r="_3_bHuL",o="_1FQbVE",l="_3dszrE",c="lrbuQZ",d="_91sNtF",u="_1ZKUqX",m="_2Oq2gR",p="_8Lzlfe",g="RfL6Kw",_="_2ihM3u",h="rzhTkT",b="bODh2p",v="_1YYz9r",D="_1ud7G5";var E=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),f=a("./node_modules/@amzn/dvui/dist/Block.js"),y=a("./node_modules/@amzn/dvui/dist/Spinner.js");const w=({balances:e})=>e&&e.length?s.createElement("table",{className:m},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",null,s.createElement(E.H1,{stringID:"DV_DP_GC_balance_type_heading"})),s.createElement("th",null,s.createElement(E.H1,{stringID:"DV_DP_GC_balance_amount_heading"}))),e&&e.map((e=>s.createElement("tr",{key:e.label.string},s.createElement("td",null,e.label.string),s.createElement("td",null,e.displayAmount)))))):null;var T=a("./node_modules/@amzn/dvui/dist/Spacer.js"),I=a("./node_modules/@amzn/dvui/dist/Button.js"),C=a("./node_modules/@amzn/dvui/dist/Input.js"),N=a("./src/widgets/DVWebNodeDetail/utils/wps.ts"),S=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),P=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),x=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),k=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},R.apply(this,arguments)}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const A="DVWebNodeDetail-RedeemCode",W="/videohelp",L={video_support_website_url:{href:W}};var O=0,B=1,M=2;class U extends s.Component{constructor(e){super(e),V(this,"handleInput",(e=>{this.setState({code:e.target.value,formStatus:O})})),V(this,"onDismiss",(()=>{this.setState({formStatus:O})})),V(this,"handleSubmit",(e=>{e.preventDefault(),this.setState({disableInputs:!0}),this.redeemCode()})),V(this,"redeemCode",(async()=>{try{const e={context:this.props.requestContext,csrfToken:this.props.csrfToken,code:this.state.code},t=await N.py.RedeemCode(e);(0,S.JQ)(t.success)?(this.setState({formStatus:M}),t.balanceType&&await this.props.updateBalance([t.balanceType])):this.setState({formStatus:B})}catch(e){this.props.logger.error(`${A} - RedeemCode request failed`,e).count(A,1,!1),this.setState({formStatus:B})}this.setState({disableInputs:!1})})),this.state={disableInputs:!1,code:"",formStatus:O}}render(){const{csrfToken:e,hideInput:t}=this.props,{formStatus:a,code:i,disableInputs:n}=this.state,r=!e||n;return s.createElement(s.Fragment,null,!t&&s.createElement("form",{onSubmit:this.handleSubmit},s.createElement("label",{htmlFor:"dv-gc-input",className:v},s.createElement(E.H1,{stringID:"DV_DP_UB_GC_enter_code"})),s.createElement("div",{className:_},s.createElement(x.h.Consumer,null,(({getString:e})=>s.createElement(C.Input,{className:h,type:"text",placeholder:e("DV_DP_GC_code_input_placeholder"),autoComplete:"off",id:"dv-gc-input",value:i,onChange:this.handleInput,required:!0,disabled:r}))),s.createElement("div",{className:b},s.createElement(k._,{refTag:"atv_dp_apply_gcpc"},s.createElement(I.Button,{textAlign:"center",use:I.Purchase,type:"submit",className:T.spacerAlignItems.center,disabled:r},s.createElement(E.H1,{stringID:"DV_DP_UB_GC_popup_apply"})))))),s.createElement(F,{formStatus:a,onDismiss:this.onDismiss}))}}const j={className:`${p} ${D}`,heading:"",dismissable:!0},F=({formStatus:e,onDismiss:t})=>{switch(e){case B:return s.createElement("div",{id:"codeFailedBlock"},s.createElement(f.MessageBlock,R({type:f.MessageTypes.warning},j,{onDismiss:t}),s.createElement(E.H1,{stringID:"DV_DP_GC_wrong_code",dvStringAttrs:L})));case M:return s.createElement("div",{id:"codeSuccessBlock"},s.createElement(f.MessageBlock,R({type:f.MessageTypes.success},j),s.createElement(E.H1,{stringID:"DV_DP_UB_GC_success_message"})));default:return null}},H=(0,P.n)(U);function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},z.apply(this,arguments)}const $="DVWebNodeDetail-GetGiftCard",q={url:{href:W}};var G=0,Z=1,Q=2;class Y extends s.Component{constructor(e){var t,a,s;super(e),s=async e=>{try{const t={context:this.props.requestContext,balanceTypes:e};this.setState({balanceStatus:Z});const a=await N.py.GetGiftCard(t),{giftCardContent:s}=this.state,i=ee(s&&s.balanceMap,a&&a.balances);this.setState({balanceStatus:G,giftCardContent:{csrfToken:a&&a.csrfToken,balanceMap:i}})}catch(e){this.props.logger.error("DVWebNodeDetail-GetGiftCard - GetGiftCard request failed",e).count($,1,!1),this.setState({balanceStatus:Q,giftCardContent:void 0})}},(a="updateBalance")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={balanceStatus:Z}}componentDidMount(){this.updateBalance(["GiftCard","Promotion"])}render(){const{requestContext:e}=this.props,{giftCardContent:t,balanceStatus:a}=this.state;return s.createElement("div",null,s.createElement(H,{csrfToken:t&&t.csrfToken,requestContext:e,updateBalance:this.updateBalance,hideInput:a===Q}),s.createElement("p",{className:c},s.createElement(E.H1,{stringID:"AVOD_DP_GC_promotion_message"})," ",s.createElement(i.Link,{href:"/help/video/giftcard",target:"_blank"},s.createElement(E.H1,{stringID:"AVOD_DP_GC_toc_learn_more"}))),s.createElement("h3",{className:d},s.createElement(E.H1,{stringID:"DV_DP_DV_GCPC_window_title"})),a!==Q&&s.createElement("p",{className:u},s.createElement(E.H1,{stringID:"DV_DP_GC_balances_explanation"})),s.createElement("div",{className:g},s.createElement(J,{balanceStatus:a,balances:t&&t.balanceMap&&Object.values(t.balanceMap)})))}}const X=(0,P.n)(Y),K={className:p,heading:"",dismissable:!1},J=({balanceStatus:e,balances:t})=>{switch(e){case G:return s.createElement(w,{balances:t});case Z:return s.createElement(y.Spinner,null);case Q:return s.createElement("div",{id:"balanceUpdateFailedBlock"},s.createElement(f.MessageBlock,z({type:f.MessageTypes.warning},K),s.createElement(E.H1,{stringID:"DV_DP_GC_balance_update_failed",dvStringAttrs:q})));default:return null}},ee=(e,t)=>{const a=e?{...e}:{};return t&&t.forEach((e=>a[e.balanceType]=e)),a},te=({requestContext:e,isOpen:t,onClose:a})=>s.createElement(s.Fragment,null,t&&s.createElement(n.Modal,{className:r,isVisible:!0,onClose:a,header:s.createElement(ae,null),modalId:"giftCardModal",size:"s"},s.createElement(X,{requestContext:e}))),ae=()=>s.createElement("div",{id:"giftCardModalHeader"},s.createElement("h3",{className:o},s.createElement("strong",null,s.createElement(E.H1,{stringID:"DV_DP_GC_widget_heading"})))),se=({openModal:e})=>s.createElement(k._,{refTag:"dv-gcp-modal"},s.createElement(i.Link,{className:l,onClick:e},s.createElement(E.H1,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"})))},"./src/widgets/DVWebNodeDetail/components/heroVideo/draperStatus.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>s});var s={NotStarted:0,BeforePlaying:1,Playing:2,Stopped:3,Cancelled:4}},"./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx":(e,t,a)=>{"use strict";a.d(t,{t:()=>v});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/classnames/index.js"),r=a.n(n),o=a("./src/shared/imageUtils/imageUtils.ts"),l=a("./src/util/utils/useInteractionObserver.tsx"),c=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const d="_3AGscX",u="Zk8aEm",m="_1Asy_o",p="_3Ey1L9";function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},g.apply(this,arguments)}const _=e=>{const{src:t,baseValue:a,format:i,baseType:n,srcSizes:r,skipStripTags:l,className:c,classNameContainer:m,alt:g}=e,{src:_,srcSet:h,sizes:b}=(0,o.Ro)({src:t,baseValue:a,baseType:n,srcSizes:r,format:i,skipStripTags:l}),[v,D]=s.useState(!1),E=(0,o.Ro)({src:t,baseValue:50,baseType:o.rB.WIDTH,format:i}).src;return s.createElement(s.Fragment,null,s.createElement(s.Fragment,null,s.createElement("noscript",null,s.createElement("img",{src:t,className:c,alt:g}),s.createElement("style",null,`.${d}{display:none;}`)),s.createElement("div",{className:`${d} ${m}`,dangerouslySetInnerHTML:{__html:`\n      <script>document.body.classList.remove("atfimgloaded")<\/script>\n      <img id="atf-thumb" class="${p}" src="${E}"/>\n      <img id="atf-full" class="${u} ${c}" src="${_}" srcSet="${h}" sizes="${b}" alt="${g}" onload="document.body.classList.add('atfimgloaded')"/>\n            `}})))},h=e=>{const{src:t,baseValue:a,format:i,baseType:n,srcSizes:c,skipStripTags:p,className:_,classNameContainer:h,alt:b,isLazyImageSupported:v}=e,D=s.useRef(null),[E,f]=s.useState(!1),[y,w]=s.useState(!1),T=s.useCallback((([{isIntersecting:e}],t)=>{e&&(w(!0),D.current&&t.unobserve(D.current))}),[]);return(0,l.S)({enabled:v,target:D,rootMargin:"200px",onIntersect:T}),s.createElement(s.Fragment,null,s.createElement("noscript",null,s.createElement("img",{src:t,className:_,alt:b}),s.createElement("style",null,`.${d}{display:none;}`)),s.createElement("div",{ref:D,className:r()(d,h)},y&&s.createElement("img",g({},(0,o.Ro)({src:t,baseValue:a,baseType:n,srcSizes:c,format:i,skipStripTags:p}),{loading:"lazy",onLoad:()=>{f(!0)},alt:b,className:r()(u,_,{[m]:E})}))))},b=e=>{const{src:t,baseValue:a,format:i,baseType:n,srcSizes:r,skipStripTags:l,isLazy:c=!1,className:d,alt:u,isAtfMainImage:m,isLazyImageSupported:p}=e;return t&&a?p&&m?s.createElement(_,e):p&&c?s.createElement(h,e):s.createElement("img",g({},(0,o.Ro)({src:t,baseValue:a,baseType:n,srcSizes:r,format:i,skipStripTags:l}),{className:d,alt:u})):null},v=(0,i.$j)((e=>({isLazyImageSupported:!(0,c._n)(e)})))(s.memo(b))},"./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx":(e,t,a)=>{"use strict";a.d(t,{H1:()=>H,xU:()=>F});var s=a("./node_modules/react/index.js"),i=a("./src/util/utils/strings.ts"),n=a("./node_modules/@amzn/dvui/dist/Text.js"),r=a("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const o={bundles:[r.R.ATF,r.R.BTF],strings:["DV_TW_title_starring","DV_TW_title_actors","DV_TW_title_producers","DV_TW_title_genres","DV_TW_title_subtitles","DV_TW_title_languages","DV_TW_title_directors","DV_TW_title_studio","DV_TW_title_network","DV_TW_title_seasonyear","DV_TW_title_amr","DV_TW_title_content_descriptors","DV_DP_learn_more","DV_DP_ARIA_learn_more_amr","DV_comma_separator","DV_TW_title_purchaserights","DV_TW_title_devices","DV_TW_data_available_to_watch_devices","DV_TW_data_purchaserights_streaming","DV_TW_Detail_text","DV_TW_title_format","DV_TW_data_format_streaming","DV_TW_title_mpaarating","DV_TW_title_bbfcrating","DV_TW_title_fskrating","DV_TW_title_eirinrating","DV_DP_more_details","DV_DP_more_items","DV_brand_av","DV_WEB_DP_popover_purchase_rights","DV_DP_none_available"]},l={bundles:[r.R.ATF,r.R.BTF],strings:["DV_MWTW_TITLE","DV_MWTW_TITLE_MAIN"]},c={bundles:[r.R.ATF,r.R.BTF],strings:["DV_RBB_CANCEL_PURCH_MODAL_HEADER","DV_RBB_CANCEL_PURCH_MODAL_SUBMIT","DV_AB_CANCEL_ACCIDENTAL_PURCHASE","DV_DP_you_multiple_orders_for_this_title","DV_DP_choose_order_to_cancel"]},d={bundles:[r.R.BTF],strings:["DV_DP_EL_episode_title_template","DV_DP_EL_bonus_title_template","DV_comma_separator"]},u={bundles:[r.R.ATF,r.R.BTF],strings:["AVOD_DP_redeem_gift_card_or_promotion"]},m={bundles:[r.R.BTF],strings:["DV_DP_unavailable_episode_list_message"]},p={bundles:[r.R.BTF],strings:["DV_DP_live_badge_text"]},g={bundles:[r.R.ATF],strings:["AVOD_DP_season_selector"]},_={bundles:[r.R.ATF,r.R.BTF],strings:["DV_DP_first_review","DV_DP_ARIA_amazon_rating","DV_DP_ARIA_imdb_rating","DV_DP_ARIA_watch_episode","DV_DP_ARIA_watch_title","DV_DP_ARIA_audio_description","DV_DP_ARIA_release_year","DV_WEB_SETTINGS_HEAD_SUBTITLES","DV_DP_ARIA_runtime","DV_DP_ARIA_scheduled","DV_DP_ARIA_located","DV_DP_ARIA_suitable_for","DV_TW_amr_nr_text"]},h={bundles:[r.R.ATF],strings:["AVOD_DP_season_selector","DV_DP_Watchlist_toggle_label","DV_DP_WL_removeMovie","DV_DP_WL_removeTv","DV_DP_WL_addMovie","DV_DP_WL_addTv","DV_DP_WL_addTvProcessing","DV_DP_WL_removeTvProcessing","AVOD_WL_error_msg","DV_DP_WL_watchlist"]},b={bundles:[r.R.ATF],strings:["DV_WEB_FEEDBACK__send_us_feedback","DV_WEB_FEEDBACK_feedback","DV_WEB_FEEDBACK_select_related_device","DV_WEB_FEEDBACK_select_option_dropdown_menu","DV_WEB_FEEDBACK_dropdown_prompt","DV_WEB_FEEDBACK_submit_button","DV_WEB_FEEDBACK_no_device_website","DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"]},v={bundles:[r.R.ATF],strings:["DV_DP_see_more"]},D={bundles:[r.R.ATF],strings:["DV_DP_unavailable_page_message","DV_DP_unavailable_live_page_message","DV_DP_only_playback_available_in_gen4_message"]},E={bundles:[r.R.BTF],strings:["DV_WEB_PAGINATION_PAGE","DV_WEB_PAGINATION_PREVIOUS","DV_WEB_PAGINATION_NEXT"]},f={bundles:[r.R.ATF],strings:["DV_DP_COMING_SOON_MESSAGE","DV_DP_COMING_SOON_TBC_DATE","DV_DP_COMING_IN_YEAR_MESSAGE"]},y={bundles:[r.R.ATF,r.R.BTF],strings:["AVOD_DP_E_error_text","AVOD_DP_E_error_ok"]},w={bundles:[r.R.BTF],strings:["DV_DP_CAST_CREW_HEADING","DV_DP_powered_by"]},T={bundles:[r.R.BTF],strings:["DV_DP_see_full_series","DV_DP_kindle_edition","DV_DP_book_series","DV_DP_by","DV_DP_volume_in_series","DV_DP_available_on_kindle","DV_DP_volume_expander","DV_DP_view_details"]},I={bundles:[r.R.ATF],strings:["DV_WEB_LIVE_NOT_SUPPORTED_BODY","DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING"]},C={bundles:[r.R.BTF],strings:["DV_DP_CL_other_formats_title"]},N={bundles:[r.R.BTF],strings:["DV_DP_EPISODE_EXPANDER","DV_DP_EPISODE_NUM_ASCENDING","DV_DP_EPISODE_NUM_DESCENDING","DV_DP_EPISODE_AVAILABLE","DV_DP_EPISODE_SORT_BY"]},S={bundles:[r.R.ATF,r.R.BTF],strings:["DV_DP_GC_widget_heading","DV_DP_UB_GC_success_message","DV_DP_DV_GCPC_window_title","DV_DP_UB_GC_popup_apply","DV_DP_UB_GC_enter_code","AVOD_DP_GC_promotion_message","DV_DP_GC_balances_explanation","AVOD_DP_GC_toc_learn_more","DV_DP_GC_balance_type_heading","DV_DP_GC_balance_amount_heading","DV_DP_GC_code_input_placeholder","DV_DP_GC_wrong_code","DV_DP_GC_balance_update_failed"]},P={bundles:[r.R.BTF],strings:["DV_DP_TAB_episodes","DV_DP_TAB_explore","DV_DP_TAB_extras","DV_DP_TAB_related","DV_DP_TAB_details","DV_DP_TAB_shop"]},x={bundles:[r.R.ATF,r.R.BTF],strings:["DV_DP_CREATE_WATCH_PARTY","DV_DP_WATCH_PARTY_TOOLTIP","DV_DP_WATCH_PARTY_FTUE_HEADER","DV_DP_WATCH_PARTY_FTUE_BODY"]},k={bundles:[r.R.ATF],strings:["DV_DP_WP_ERROR_HEADING","DV_DP_WP_ERROR","DV_DP_WP_END_HEADING","DV_DP_WP_END","DV_DP_WP_STREAM_ENDED","DV_DP_WP_CREATE_INELIGIBLE_HEADING","DV_DP_WP_CREATE_INELIGIBLE","DV_DP_WP_CREATE_INELIGIBLE_TVOD","DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD","DV_DP_WP_JOIN_INELIGIBLE_HEADING","DV_DP_WP_JOIN_INELIGIBLE","DV_DP_WP_JOIN_INELIGIBLE_TVOD","DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD","DV_DP_WP_GEO_RESTRICTION_HEADING","DV_DP_WP_GEO_RESTRICTION","DV_DP_WP_UNSUPPORTED_BROWSER_HEADING","DV_DP_WP_UNSUPPORTED_BROWSER","DV_DP_WP_UNSUPPORTED_CHAT_HEADING","DV_DP_WP_UNSUPPORTED_CHAT","DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING","DV_DP_WP_BANNED_SPECIFIC_CHAT","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY","DV_CR_review_submission_processing","DV_CR_review_submission_success"]},R={bundles:[r.R.ATF],strings:["DV_DP_trailer__AV"]},V={bundles:[r.R.ATF],strings:["AVOD_DP_E_error_text"]},A={bundles:[r.R.BTF],strings:["DV_CR_sorted_by","DV_CR_see_all_reviews","DV_CR_sorting_top_reviews","DV_CR_sorting_most_recent","DV_CR_profile_aria_label","DV_CR_helpful_button_label","DV_CR_report_abuse_label","DV_CR_reviews_header","DV_CR_write_review_label","DV_CR_write_review_label_other","DV_CR_vote_unsuccessful","DV_CR_thank_you_feedback","DV_CR_report_abuse_message","DV_CR_confirm_label","DV_CR_sending_feedback","DV_CR_reviews_explanation_header","DV_CR_reviews_explanation_text","DV_CR_fallback_with_ratings","DV_CR_fallback_no_ratings","DV_CR_verified_purchase","DE_DV_CR_sorting_header","JP_DV_CR_sorting_header","US_DV_CR_sorting_header","UK_DV_CR_sorting_header","DV_CR_other_countries_header","DV_CR_first_to_rate","DV_CR_first_to_review","DV_CR_show_original_review","DV_CR_translation_error","DV_CR_translated_review","DV_CR_translate_single_review","DV_CR_translate_all_reviews","DV_CR_translating_review","DV_CR_submission_overall_rating","DV_CR_submission_headline_placeholder","DV_CR_submission_add_headline","DV_CR_submission_body_placeholder","DV_CR_submission_add_more","DV_CR_submission_add_written_review","DV_CR_submission_rating_saved","DV_CR_submission_submit","DV_CR_submission_optional","DV_CR_submission_max_chars","DV_CR_submission_min_chars","DV_CR_submission_max_words","DV_CR_submission_min_words","DV_CR_submission_min_chars_one","DV_CR_submission_min_words_one","DV_common_cancel","DV_CR_public_name_change","DV_CR_public_name_rating_as","DV_CR_public_name_failure","DV_CR_review_submission_failure","DV_CR_create_review","DV_CR_edit_review","DV_CR_rating_missing","DV_CR_delete_review","DV_common_yes","DV_common_no","DV_common_edit","DV_common_delete","DV_CR_delete_review_warning","DV_CR_review_deleting","DV_CR_review_deleted","DV_CR_rating_missing","DV_CR_approval_pending"]},W={bundles:[r.R.ATF],strings:["DV_DP_CHART_TOP_TEN"]},L={bundles:[r.R.ATF],strings:["DV_DP_download_upsell_banner"]},O={bundles:[r.R.BTF],strings:["DV_DP_prioritize_chat_header"]};var B=a("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),M=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const U=[o,l,d,u,m,p,E,y,w,T,C,N,S,P,x,g,_,h,v,c,D,f,I,b,k,R,V,A,W,L,O],j=e=>[].concat(...U.filter((t=>t.bundles.includes(e))).map((e=>e.strings))),F=(e,t)=>({context:e,ids:j(t)}),H=({stringID:e,replace:t,dvStringAttrs:a,shouldDecode:r=!1,dir:o,className:l=""})=>{const{getString:c}=s.useContext(M.h),d=c(e,t),u=(0,i.e6)(d,a||{}),m=r?s.createElement(B.v,{string:u.string}):s.createElement(n.Text,{string:u,className:l});return o?s.createElement("span",{dir:o}," ",m," "):m}},"./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts":(e,t,a)=>{"use strict";a.d(t,{R:()=>s});var s={ATF:0,BTF:1}},"./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx":(e,t,a)=>{"use strict";a.d(t,{t:()=>_,T:()=>g});var s=a("./node_modules/react/index.js"),i=a("./node_modules/classnames/index.js"),n=a("./node_modules/@amzn/dvui/dist/Link.js"),r=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=a("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),l=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const c="_3F8f9L";var d=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),u=a("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx"),m=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),p=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");const g=e=>!!e&&(e.children||[]).length>0,_=(0,o.Y)((({moreWaysToWatch:e,sequenceNumber:t,titleId:a,toggleGiftCardModal:o,componentClassName:_,linkClassName:h})=>{if(!g(e)||!a)return null;const b=e&&e.metadata&&e.metadata.refMarker||(0,m.i)("atv_dp_mpo_el");return s.createElement("div",{className:i(l.Z.stretchHeight,_)},s.createElement(d.i,{size:"m",modalId:"dvui-close-overlay-btf-mwtw",modalContent:({closeModal:a})=>s.createElement(u.C,{closeModal:a,moreWaysToWatch:e,sequenceNumber:t,toggleGiftCardModal:o}),toggle:({openModalClickHandler:e})=>s.createElement(p._,{refTag:b},s.createElement(n.Link,{className:i(c,h),"data-ux-click":!0,onClick:e},s.createElement(r.H1,{stringID:"DV_MWTW_TITLE"})))}))}))},"./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx":(e,t,a)=>{"use strict";a.d(t,{D:()=>g});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Text.js"),r=a("./node_modules/@amzn/dvui/dist/Button.js");const o="_3gXPVg",l="_1a0uyP";var c=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),u=a("./node_modules/@amzn/dvui/dist/Container.js"),m=a("./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts"),p=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const g=(0,i.$j)((e=>({showOtherFormats:(0,m.$)(e),otherFormats:p.mZ.otherFormats(e)})))((({otherFormats:e,showOtherFormats:t})=>{const{getString:a}=s.useContext(d.h);return t&&e?s.createElement(u.Container,{className:c.Z.pageSection},s.createElement("div",{"data-automation-id":"other-formats"},s.createElement("h1",{className:o}," ",a("DV_DP_CL_other_formats_title")," "),e.actions.map(((e,t)=>s.createElement("div",{className:l,key:`other-format-${t}`},s.createElement(r.PrimaryButton,{href:e.link,forceDoubleHeight:!0},s.createElement(n.Text,{tag:"span",string:e.text}))))))):null}))},"./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx":(e,t,a)=>{"use strict";a.d(t,{oe:()=>U,JM:()=>M,n7:()=>H,eP:()=>z});var s=a("./node_modules/@amzn/dvui/dist/Button.js"),i=a("./node_modules/@amzn/dvui/dist/Icon.js"),n=a("./node_modules/react/index.js");const r="_2UD9Ud",o="_2tr-LP",l="_2t5M7h",c="_1aRTKf",d="_31IoAh",u="TKV4YL",m="TdIcBN",p="_1fbq7T",g="_1cjcqN",_="_1b1ljL",h="_3JtJT0",b="fk_b7h",v="_2eDsro",D="_2IcXI4",E="_1Lu9Pi",f="_1DS9nN",y="_3rLd2g",w="_22ybEZ",T="_1wlb9h";var I=a("./node_modules/classnames/index.js"),C=a("./node_modules/@amzn/dvui/dist/Icons/PlayArrow.js"),N=a.n(C),S=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),P=a("./node_modules/@amzn/dvui/dist/Icons/Trailer.js"),x=a.n(P),k=a("./node_modules/@amzn/dvui/dist/Icons/PlayButton.js"),R=a("./node_modules/@amzn/dvui/dist/Icons/StartOver.js"),V=a("./node_modules/@amzn/dvui/dist/Icons/TrailerIcon.js"),A=a.n(V),W=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),L=a("./src/shared/CS/components/IconButton/IconButton.tsx");function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},O.apply(this,arguments)}const B="34px",M=({href:e,onPlayButtonClick:t,className:a,isStartOver:s})=>{const i=e?"a":"button";return n.createElement("div",{className:y},n.createElement(i,{href:e,onClick:t,className:I(w,a),"data-testid":"play"},n.createElement("div",{className:I(T)},s?n.createElement(R.StartOver,{width:"100%",height:"100%"}):n.createElement(k.PlayButton,{width:"100%",height:"100%"}))))},U=({progress:e=0,isLarge:t=!1,isStartOver:a=!1,isSeeThrough:s=!1,ariaLabel:u,onClick:m,onKeyDown:p,href:g,className:D,children:E})=>{const f=I(_,{[b]:!0===t},t?b:h,D);return n.createElement("a",O({href:g,onClick:m,"aria-label":u,className:f,tabIndex:0},p&&{onKeyDown:p}),n.createElement("span",{className:I(r,s?l:o)},n.createElement(i.Icon,{use:a?i.IconType.START_OVER:i.IconType.PLAY_BUTTON_ARROW,className:I(c,{[d]:a})})),n.createElement("span",{className:v},E,n.createElement(j,{progress:e})))};U.displayName="PlayButton";const j=({progress:e=0})=>e>0?n.createElement("span",{className:m,"data-automation-id":"progress-bar"},n.createElement("span",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":e,className:g,role:"progressbar",style:{width:`${e}%`}})):null,F=n.createElement("span",{className:D},n.createElement(N(),{height:B,width:B})),H=({progress:e=0,isStartOver:t,className:a,children:r,useFreeButton:o,...l})=>n.createElement(s.Button,O({},l,{use:t?s.Default:o?s.Free:s.Playback},o?{icon:F}:{useIcon:t?i.IconType.START_OVER:i.IconType.PLAY_ARROW},{className:I(u,{[a]:Boolean(a)},{[p]:o})}),n.createElement("span",null,r),n.createElement(j,{progress:e}));H.displayName="SquarePlayButton";const z=(0,W.QI)((({isPrimaryButton:e=!1,...t})=>e?n.createElement(s.Button,O({role:"button",useIcon:i.IconType.TRAILER,testID:"trailer-button"},t)):n.createElement(S.Tooltip,{position:"top",size:"s",content:t.tooltipText||"",className:f,id:"dv-dp-node-trailer-tooltip",containerRef:t.containerRef},n.createElement(s.Button,O({role:"button",testID:"trailer-button",className:E},t),n.createElement("span",{className:c},n.createElement(x(),null))))),(({isPrimaryButton:e=!1,...t})=>n.createElement(L.h,{icon:n.createElement(A(),null),ariaLabel:t.tooltipText||"",label:"Trailer"})));z.displayName="TrailerButton"},"./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx":(e,t,a)=>{"use strict";a.d(t,{Kr:()=>C,y7:()=>T,Pd:()=>S});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Alert.js"),n=a("./node_modules/@amzn/dvui/dist/Icon.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js");const o="NgssYl",l="zNwind",c="_2DUDiN",d="_2uG3bk",u="_3IwZL4",m="_3GDbaV",p="_2L84tL",g="_3pCHEe",_="_1jE1N6",h="_12_PQb";var b=a("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),v=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),D=a("./src/shared/imageUtils/imageUtils.ts"),E=a("./node_modules/classnames/index.js"),f=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),y=a("./node_modules/@amzn/dvui/dist/Icons/Clock.js");function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},w.apply(this,arguments)}const T=35,I=({message:e})=>e?s.createElement("p",{className:c},s.createElement(n.Icon,{use:n.IconType.LOCK,className:d}),s.createElement(r.Text,{string:e})):null,C=({messages:e})=>s.createElement(s.Fragment,null,null==e?void 0:e.map((e=>s.createElement("span",{className:h},s.createElement(y.Clock,null),s.createElement(r.Text,{className:_,string:e}))))),N=({preorder:e})=>{if(!e)return null;const{body:t,cancelOrderText:a,title:i,displayMessages:n}=e;return s.createElement("div",{className:`${m} ${f.Z.enablePointerEvents}`},s.createElement("h2",null,i),s.createElement(r.Text,{string:t,tag:"p"}),n.map((e=>s.createElement(r.Text,{string:e,tag:"p"}))),s.createElement(r.Text,{string:a,tag:"p"}))},S=({acceptedPreorder:e,notificationWarnings:t,subProblemMessages:a,infoAlertMessages:n,messagesWithLogo:c,topLevelTvodMessages:d,comingLeavingSoonMessages:m,maturityLockText:_,tapsExperimentToken:h,showCancellationWinback:y})=>s.createElement("div",{className:E(o,l,f.Z.fullWidth,"av-playback-messages")},s.createElement(b.y,{Tag:i.ErrorAlert,messages:a}),s.createElement(I,{message:_}),s.createElement(N,{preorder:e}),s.createElement(C,{messages:m}),s.createElement(b.y,{Tag:i.WarningAlert,messages:t}),s.createElement(b.y,{Tag:i.InfoAlert,messages:n}),s.createElement(b.y,{Tag:i.InfoAlert,messages:d}),(({messagesWithLogo:e,tapsExperimentToken:t,showCancellationWinback:a})=>e?e.filter((e=>Boolean(e&&e.text&&e.text.string))).map(((e,n)=>{const o=s.createElement(r.Text,{string:e.text});if(o&&!e.logo)return s.createElement(i.InfoAlert,{key:`message-logo-alert-${n}`,className:p},o);const l={alt:"",src:e.logo,baseValue:T,baseType:D.rB.HEIGHT,format:D.GH.png},c=t&&t.cancellationWinbackToken,d=c&&c.cancellationWinbackStringInfo&&c.cancellationWinbackStringInfo.playbackLabel,m=s.createElement(v.t,w({className:u},l));return s.createElement("p",{key:`message-logo-${n}`,className:p},e.channelLogoURL?s.createElement("a",{"data-automation-id":"channelLogo-link",href:e.channelLogoURL},m):m,s.createElement("strong",null,o,d&&a&&[s.createElement("br",null),s.createElement("span",{className:g},d)]))})):null)({messagesWithLogo:c,tapsExperimentToken:h,showCancellationWinback:y}))},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx":(e,t,a)=>{"use strict";a.d(t,{W:()=>g});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.tsx"),r=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),o=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),l=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),c=a("./node_modules/@amzn/dvui/dist/Container.js"),d=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),u=a("./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts");function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},m.apply(this,arguments)}const p=e=>[...e?[n.sr.Directors]:[],n.sr.Producers,n.sr.Studios,n.sr.Amr,n.sr.ContentDescriptors,n.sr.Actors],g=(0,i.$j)((e=>({productDetails:o.mZ.moreDetails(e),contentDescriptors:(0,u._6)(e),maturityRating:(0,u.BK)(e),requestContext:(0,r.Iz)(e)})))((({productDetails:e,contentDescriptors:t,maturityRating:a,requestContext:i})=>{if(e){const o=(0,d.xw)(e);return s.createElement(c.Container,{className:l.Z.pageSection},s.createElement(n.rB,m({},e,{ratingBadge:a||e.ratingBadge,contentDescriptors:t||e.contentDescriptors,fields:i.isRetail?(r=o,[...r?[n.sr.Directors]:[],n.sr.Actors,n.sr.Producers,n.sr.ReleaseYear,n.sr.Studios,n.sr.RegRating,n.sr.ContentDescriptors,n.sr.PurchaseRights,n.sr.Format,n.sr.Devices]):p(o),showHeader:!0,expandedItemsCount:5,id:"btf-product-details"})))}return null;var r}))},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.tsx":(e,t,a)=>{"use strict";a.d(t,{rB:()=>j,sr:()=>w});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/classnames/index.js"),r=a("./node_modules/@amzn/dvui/dist/Link.js"),o=a("./node_modules/@amzn/dvui/dist/MoreContent.js"),l=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),c=a("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),d=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),u=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.module.scss"),m=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),p=a("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),g=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),_=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),h=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),b=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),v=a("./src/shared/utils/utils.ts"),D=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),E=a("./src/util/utils/marketplace.ts"),f=a("./src/widgets/DVWebNodeDetail/selectors/productDetails.ts");const y=3;let w;!function(e){e[e.Directors=0]="Directors",e[e.Starring=1]="Starring",e[e.Genres=2]="Genres",e[e.Subtitles=3]="Subtitles",e[e.AudioTracks=4]="AudioTracks",e[e.Actors=5]="Actors",e[e.Producers=6]="Producers",e[e.ReleaseYear=7]="ReleaseYear",e[e.Studios=8]="Studios",e[e.RegRating=9]="RegRating",e[e.ContentDescriptors=10]="ContentDescriptors",e[e.PurchaseRights=11]="PurchaseRights",e[e.Format=12]="Format",e[e.Amr=13]="Amr",e[e.Devices=14]="Devices"}(w||(w={}));const T={[w.Subtitles]:2,[w.AudioTracks]:2},I=(e,t,a)=>[s.createElement(r.Link,{key:`type-content-link-${a}`,text:e,href:t})],C=(e,t)=>[s.createElement(s.Fragment,{key:`type-content-text-${t}`},e)];function N(e){switch(e&&e.toUpperCase()){case"US":return s.createElement(l.H1,{stringID:"DV_TW_title_mpaarating"});case"UK":return s.createElement(l.H1,{stringID:"DV_TW_title_bbfcrating"});case"DE":return s.createElement(l.H1,{stringID:"DV_TW_title_fskrating"});default:return s.createElement(l.H1,{stringID:"DV_TW_title_eirinrating"})}}function S(e,t,a,s){return{header:e,items:a&&a.length>0?a.map(((e,a)=>t(e,a))):null,stylingClasses:s}}function P(e,t,a){return{header:e,items:t&&t.length>0?[t]:null,stylingClasses:a}}const x=(e,t)=>I(s.createElement(p.v,{string:e.name}),e.searchLink,t),k=(e,t)=>C(s.createElement(p.v,{string:e.name}),t),R=(e,t)=>I(s.createElement(p.v,{string:e.text}),e.searchLink,t),V=(e,t)=>C(s.createElement(p.v,{string:e.text}),t),A=(e,t)=>e.link?I(s.createElement(p.v,{string:e.text}),e.link,t):C(s.createElement(p.v,{string:e.text}),t),W=(e,t)=>C(s.createElement(p.v,{string:e.text}),t),L=(e,t)=>{const a=0===t?`${e.charAt(0).toUpperCase()}${e.slice(1)}`:e;return C(s.createElement(p.v,{string:a}),t)},O=(e,t)=>C(s.createElement(p.v,{string:e}),t),B=e=>{return[[s.createElement(l.H1,{stringID:"DV_TW_data_purchaserights_streaming",key:0})," ",(t=s.createElement("div",{className:`${u.Z.modalWrapper}`},s.createElement(l.H1,{stringID:"DV_WEB_DP_popover_purchase_rights",dvStringAttrs:{compatibleDeviceLink:{href:e("/ontv/devices",{refTag:"atv_dp_hd_dev"})},touLink:{href:e("/dv/tou",{refTag:"atv_dp_tou",isShortUrl:!0})},learnDownloading:{href:e("/gp/help/customer/display.html?nodeId=201460820",{refTag:"atv_dp_learn_download",isShortUrl:!0})}}})),a=s.createElement(l.H1,{stringID:"DV_TW_Detail_text"}),i=1,s.createElement(_.i,{modalContent:t,toggle:({openModalClickHandler:e})=>s.createElement(r.Link,{onClick:e},a),key:`type-content-modal-${i}`}))]];var t,a,i},M=e=>[[C(s.createElement(l.H1,{stringID:"DV_TW_data_available_to_watch_devices",dvStringAttrs:{supportedDevicesLink:{href:e("/watchAnywhere",{refTag:"atv_dp_watch_anywhere",isShortUrl:!0})}}}),0)]],U=({header:e,items:t,moreString:a,type:i,expandedItemsCount:r,stylingClasses:c})=>{let d=(e=>{const[t,...a]=e;return[t,...a.reduce(((e,t,a)=>[...e,s.createElement("span",{"aria-hidden":!0,key:`separator-${a}`},s.createElement(l.H1,{stringID:"DV_comma_separator"})),...t]),[])]})(t);const u=2*r;if(d.length>u){const e=d.slice(0,u),t=d.slice(u);d=[s.createElement(o.MoreContent,{visible:e,hidden:t,key:"more-content",moreString:a,index:i})]}const m=c?n(c):void 0;return s.createElement("dl",{key:`dl-${i}`,className:m},s.createElement("dt",null,e),s.createElement("dd",null,d))},j=(0,i.$j)((e=>({requestContext:(0,g.Iz)(e),isPurchaseRestricted:(0,h.Tr)(e),isCerberusChild:(0,h.Io)(e),questLinksEnabled:(0,f._)(e)})))((e=>{const{getString:t}=s.useContext(D.h),{fields:a,showHeader:i=!1,expandedItemsCount:o=y,id:p}=e,g=t("DV_DP_more_items"),_=(({ratingBadge:e,titleType:t,contributors:a,genres:i,subtitles:n,enhancedSubtitles:o,audioTracks:m,studios:p,releaseYear:g,isPurchaseRestricted:_,contentDescriptors:h,entityType:D,requestContext:{makeUrl:f,rawContext:y},isCerberusChild:T,questLinksEnabled:I},U)=>{const j=(0,c.j9)(e)&&e,F=(0,c.nn)(e)&&e,H=t&&"MOVIE"===t.toUpperCase(),z=U("DV_brand_av"),$=U("DV_DP_ARIA_learn_more_amr"),q=U("DV_DP_none_available"),G=(0,v.xb)(n)&&!(0,E.D1)(y.marketplaceID)?[q]:n,Z=(0,v.xb)(o)&&!(0,E.D1)(y.marketplaceID)?[{text:q}]:o,Q=(0,b.JQ)(T)?k:x,Y=(0,b.JQ)(T)?V:R,X=(0,b.JQ)(T)?W:A;return{[w.Directors]:S(s.createElement(l.H1,{stringID:"DV_TW_title_directors"}),Q,a&&a.directors),[w.Producers]:S(s.createElement(l.H1,{stringID:"DV_TW_title_producers"}),Q,a&&a.producers),[w.Actors]:S(s.createElement(l.H1,{stringID:"DV_TW_title_actors"}),Q,a&&a.supportingActors),[w.Starring]:S(s.createElement(l.H1,{stringID:"DV_TW_title_starring"}),Q,a&&a.starringActors),[w.Genres]:S(s.createElement(l.H1,{stringID:"DV_TW_title_genres"}),Y,i),[w.Subtitles]:I?S(s.createElement(l.H1,{stringID:"DV_TW_title_subtitles"}),X,Z,[u.Z.breakWords]):S(s.createElement(l.H1,{stringID:"DV_TW_title_subtitles"}),O,G,[u.Z.breakWords]),[w.AudioTracks]:S(s.createElement(l.H1,{stringID:"DV_TW_title_languages"}),O,m,[u.Z.breakWords]),[w.Studios]:S(H?s.createElement(l.H1,{stringID:"DV_TW_title_studio"}):s.createElement(l.H1,{stringID:"DV_TW_title_network"}),O,p),[w.Amr]:P(s.createElement(l.H1,{stringID:"DV_TW_title_amr"}),j&&(K=j&&j.displayText,J=j&&(0,c.jF)(j)&&j.description||"",ee=s.createElement(l.H1,{stringID:"DV_DP_learn_more"}),te="/amr/ref=atv_hp_dp_amr",ae=0,se=$,[s.createElement("span",{key:`amr-span-${ae}`,dir:"ltr"},K)," ",J," ",s.createElement(r.Link,{key:`amr-link-${ae}`,text:ee,href:te,ariaLabel:se})])||[]),[w.RegRating]:P(F&&N(F.countryCode),H&&F&&F.description&&C(F.description,0)||[]),[w.ContentDescriptors]:S(s.createElement(l.H1,{stringID:"DV_TW_title_content_descriptors"}),L,h,[u.Z.breakWords]),[w.ReleaseYear]:P(s.createElement(l.H1,{stringID:"DV_TW_title_seasonyear"}),!H&&g&&C(g,0)||[]),[w.PurchaseRights]:P(s.createElement(l.H1,{stringID:"DV_TW_title_purchaserights"}),!_&&B(f)||[]),[w.Format]:P(s.createElement(l.H1,{stringID:"DV_TW_title_format"}),C(s.createElement(l.H1,{stringID:"DV_TW_data_format_streaming",replace:{brand:z}}),0)),[w.Devices]:P(s.createElement(l.H1,{stringID:"DV_TW_title_devices"}),D&&!_&&!(0,d.Z4)(D)&&M(f)||[])};var K,J,ee,te,ae,se})(e,t),h=a.map(((e,t)=>{const a=T[e]||o,i=_[e];return i&&i.items&&i.items.length>0&&s.createElement(U,{key:`row-${p}-${t}`,header:i.header,items:i.items,moreString:g,type:e,expandedItemsCount:a,stylingClasses:i.stylingClasses})})),f=i&&h&&h.filter(Boolean).length?s.createElement(l.H1,{stringID:"DV_DP_more_details"}):null;return s.createElement("div",{className:n(m.Z.fullWidth,u.Z.productMetaInfo),id:p,"data-automation-id":p},f&&s.createElement("h1",null," ",f," "),s.createElement("div",{className:u.Z.info},h))}))},"./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>_});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Link.js"),r=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),l=a("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx"),c=a("./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts"),d=a("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx");const u="_3WZMgk";var m=a("./node_modules/classnames/index.js");const p=({titleID:e,parameters:t,originalURI:a,isRetail:i})=>{const l=(0,o.P_)({parameters:t,originalURI:a,isRetail:i},e,"dv_dp_gc_sign_in"),c=(0,o.Md)({parameters:t,originalURI:a,isRetail:i},"dv_dp_gc_sign_in",l);return s.createElement(n.Link,{href:c},s.createElement(r.H1,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"}))},g=(...e)=>{e.forEach((e=>e&&e()))},_=(0,i.$j)((e=>(0,c.KL)(e)))((({isRedeemAndPromoRestricted:e,hasTvodWinnerOffer:t,titleID:a,moreWaysToWatch:i,placement:n,closeModal:r,requestContext:{isRecognizedCustomer:o,queryParameters:c,originalURI:_,isRetail:h},toggleGiftCardModal:b})=>!h||e||"ActionBox"===n&&(!t||(0,l.T)(i))?null:s.createElement("div",{className:m(u,"dv-gift-card-wrapper")},o?s.createElement(d.yv,{openModal:()=>g(r,b)}):s.createElement(p,{titleID:a,parameters:c,originalURI:_,isRetail:h}))))},"./src/widgets/DVWebNodeDetail/components/refund/refund.tsx":(e,t,a)=>{"use strict";a.d(t,{N:()=>C});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js"),n=a("./node_modules/@amzn/dvui/dist/Alert.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js");const o="D4QHzV",l="Z0BNXi",c="_3coi4u",d="_2JPOKx",u="_37IQB2";var m=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),p=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),g=a("./src/widgets/DVWebNodeDetail/actions/refund.ts"),_=a("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),h=a("./node_modules/@amzn/dvui/dist/Button.js"),b=a("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx"),v=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),D=a("./node_modules/classnames/index.js"),E=a("./node_modules/@amzn/dvui/dist/Link.js"),f=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=(e,t,a)=>({string:t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),attrs:{cancelLink:{href:e,...a}}});class T extends s.Component{constructor(e){super(e),y(this,"updateSelected",((e,t)=>{this.setState({selectedLink:e,selectedIdx:t})})),y(this,"convertRefundOrdersToLinks",(e=>e.map(((e,t)=>({text:e.description,isHighlighted:this.state.selectedIdx===t,href:`#${t}`,onClick:a=>{this.updateSelected(e.singleRefundLink,t),a.preventDefault()}}))))),y(this,"addReturnUrl",(e=>`${e}&return_to=/dp/${this.props.pageTitleId}`)),this.state={selectedIdx:0,selectedLink:e.refundableOrders[0].singleRefundLink}}render(){const{refundableOrders:e,getString:t}=this.props;if(1===e.length)return s.createElement(r.Text,{string:w(e[0].singleRefundLink,t)});{const a=s.createElement("strong",null," ",t("DV_RBB_CANCEL_PURCH_MODAL_HEADER")," "),i=s.createElement(s.Fragment,null,s.createElement("div",{className:`${l}`}," ",t("DV_DP_you_multiple_orders_for_this_title")," "),s.createElement("div",null," ",t("DV_DP_choose_order_to_cancel")," "),s.createElement("div",{className:`${c}`,"data-automation-id":"refund-drop-list"},s.createElement(b.x,{links:this.convertRefundOrdersToLinks(e),customDropListID:"av-atf-multiple-refund"})),s.createElement(h.PrimeButton,{href:this.addReturnUrl(this.state.selectedLink),className:u,"data-automation-id":"refund-submit-button"},t("DV_RBB_CANCEL_PURCH_MODAL_SUBMIT")));return s.createElement(_.i,{size:"xs",className:`${d}`,modalHeader:a,modalContent:i,toggle:({openModalClickHandler:e})=>s.createElement(I,{triggerRefund:e,getString:t})})}}}const I=({triggerRefund:e,getString:t})=>{const a=t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),i="{link|cancelLink}",n="{end}",r=a.indexOf(i),o=a.indexOf(n),l=a.substring(0,r),c=a.substring(r+i.length,o),d=a.substring(o+n.length);return s.createElement(s.Fragment,null,l&&s.createElement("span",null,l),s.createElement(E.Link,{href:"#",onClick:t=>e(t)},c),d&&s.createElement("span",null,d))},C=(0,v.n)((0,i.$j)(((e,{titleId:t})=>({refundFragment:e.refund.fragments[t],isRetail:(0,p.Iz)(e).isRetail,pageTitleId:t})),((e,{logger:t,titleId:a})=>({triggerRefund:()=>(0,g.YV)(e,t,a)})))((({refundFragment:e,isRetail:t,pageTitleId:a,triggerRefund:i})=>{const{getString:r}=s.useContext(f.h);return e&&e.refundableOrders&&0!==e.refundableOrders.length?s.createElement("div",{className:D(o,m.Z.fullWidth,"refund-alert")},s.createElement(n.InfoAlert,null,s.createElement("span",{className:m.Z.enablePointerEvents},t?s.createElement(T,{refundableOrders:e.refundableOrders,pageTitleId:a,getString:r}):s.createElement(I,{triggerRefund:i,getString:r})))):null})))},"./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx":(e,t,a)=>{"use strict";a.d(t,{nW:()=>h,GR:()=>_,Lx:()=>b});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Expander.js"),n=a("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),r=a("./node_modules/@amzn/dvui/dist/Modal.js");const o="-dmR1h",l="_1XdgZK",c="_3fuIyl",d="_2c4dTP",u="_1muO3R",m="_16wNxC",p="_3MWctc";var g=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const _=({synopsis:e,numOfLines:t=3,expanderId:a="synopsisExpander"})=>e?s.createElement("div",{className:`${g.Z.fullWidth} ${c}`,"data-automation-id":a},s.createElement(i.Expander,{className:o,numOfLines:t,uniqueId:a},s.createElement(n.v,{string:e,dir:"auto"}))):null,h=({synopsis:e})=>e?s.createElement("div",{className:`${g.Z.fullWidth} dv-dp-node-synopsis`,"data-automation-id":"atf-synopsis"},s.createElement("div",{className:l},s.createElement(_,{synopsis:e,numOfLines:4,expanderId:"atfSynopsisExpander"}))):null,b=({synopsis:e,modalId:t,header:a})=>{if(!e)return null;const i=s.createRef();return s.createElement(s.Fragment,null,s.createElement("div",{className:u,onClick:()=>{var e;null===(e=i.current)||void 0===e||e.open()}},s.createElement("p",{className:m},e)),s.createElement(r.Modal,{className:d,ref:i,header:s.createElement("h2",{className:p},a),modalId:t},s.createElement("p",null,e)))}},"./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.tsx":(e,t,a)=>{"use strict";a.d(t,{Qy:()=>Ct,O1:()=>yt});var s=a("./node_modules/react/index.js"),i=a("./node_modules/react-redux/es/index.js");const n="hBc1NK",r="_2nfUkY",o="_2uJdr2",l="_2YmrGh",c="_3OTZsy",d="_2N6OB_",u="KCxdj6",m="_1I_NdJ",p="_1VEBQV",g="_1rhvY-",_="_2XXIkJ",h="QX0gHi";var b=a("./node_modules/@amzn/dv-web-node-reftags/index.js"),v=a("./node_modules/@amzn/dvui/dist/Container.js"),D=a("./node_modules/classnames/index.js"),E=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),f=a("./src/shared/utils/utils.ts"),y=a("./src/widgets/DVWebNodeDetail/components/collection/collection.tsx"),w=a("./src/widgets/DVWebNodeDetail/selectors/collections.ts");function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},T.apply(this,arguments)}const I=(0,i.$j)((e=>({showTabCollections:(0,w.gy)(e),collections:(0,w.s6)(e)})))((({collections:e,showTabCollections:t})=>{if(!t)return null;const a=e.map(((e,t)=>s.createElement(y.F,T({},e,{key:`collection-${e.index}-${t}`}))));return s.createElement(v.Container,null,a)}));var C=a("./src/widgets/DVWebNodeDetail/components/carousel/carousel.tsx"),N=a("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx"),S=a("./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.tsx"),P=a("./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx"),x=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),k=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const R=(0,x.P)(k.bS.pageTitleId,k.bS.extras,((e,t)=>(0,w.KN)(t[e]))),V=(0,x.P)(R,(e=>Boolean(null==e?void 0:e.length)));var A=a("./node_modules/@amzn/dvui/dist/Carousel.js"),W=a("./node_modules/@amzn/dvui/dist/Icon.js"),L=a("./node_modules/@amzn/dvui/dist/Packshot.js"),O=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");const B="_3g0WlT",M="ROp-tf",U="_lKdJJ",j="_3g93Un",F="Rrkogn",H="_3fKOS8",z="_2emfkv",$="_1VOMz_",q="_28m62t",G="_1fs8wE",Z="_3kpEBJ",Q="_3NSDON",Y="_3p-Unh",X="_3O66SI";var K=a("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),J=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),ee=a("./node_modules/@amzn/dvui/dist/Beard.js"),te=a("./src/widgets/DVWebNodeDetail/components/badges/rating.tsx"),ae=a("./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.tsx"),se=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),ie=a("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx"),ne=a("./src/widgets/DVWebNodeDetail/components/episode/episode.tsx"),re=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),oe=a("./src/widgets/DVWebNodeDetail/components/badges/ad.tsx"),le=a("./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx"),ce=a("./src/shared/player/integration/playbackArea.tsx"),de=a("./src/util/utils/strings.ts");const ue="_3kXILr";var me=a("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),pe=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),ge=a("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx");const _e=({playbackActionData:e,isMShop:t,index:a,sequenceNumber:i})=>{const{onPlay:n}=s.useContext(ce.ET);if(!e)return null;const r=(0,de.VJ)(e.label,{lineBreak:", "}),o={contentConfig:{asin:e.playbackID,trailer:!1,position:e.resumeTime,ref:e.playerRefMarker,videoType:e.videoMaterialType,useFullView:!0,playbackEnvelope:(0,pe.D)(e)},signInUrl:e.signInURL,playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,sequenceNumber:i,isBonus:!0,subscriptionName:e.subscriptionName,triggerLocation:"Extras",refMarker:e.refMarker};return s.createElement(me._,{refTag:`atv_dp_extras_pb_${a}`},s.createElement("span",{"data-automation-id":"extras-playbutton"},s.createElement(ge.oe,{className:ue,href:t?void 0:e.playbackURL,isSeeThrough:!0,isLarge:!1,ariaLabel:r,onClick:e=>{n(o),e.preventDefault()}})))};var he=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),be=a("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),ve=a("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx");function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},De.apply(this,arguments)}const Ee=(0,i.$j)(((e,t)=>({detail:e.detail[J.Xt][t.titleId],action:e.action[se.L5][t.titleId],requestContext:(0,O.Iz)(e),isMShop:(0,re.gK)(e),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),purchaseDetails:(0,ne.Di)(e,t.titleId)})))((e=>{var t;const{detail:a,action:i,titleId:n,requestContext:r,purchaseDetails:o,isMShop:l,idx:c,isRefunding:d,carouselIndex:u}=e;if(!a)return null;const m=(r.isRetail?a.asin:a.gti)||n,p=null===(t=a.images)||void 0===t?void 0:t.covershot,g=null==a?void 0:a.episodeNumber,_=(0,he.MG)(null==i?void 0:i.playbackActions),h=Boolean(o),b=h||d,v={alt:a.title,src:p,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},E={playbackActionData:_,isMShop:l,index:c,sequenceNumber:g},y={alt:a.title,className:j,overlay:b?s.createElement(be.UQ,{className:G,useSmallSpinner:!0}):s.createElement(_e,E)},w=null==a?void 0:a.ratingBadge,T={subtitles:null==a?void 0:a.subtitles,isClosedCaption:a.isClosedCaption},I=Boolean((null==i?void 0:i.acquisitionActions)&&!(0,f.xb)(Object.keys(i.acquisitionActions))),C={acquisitionActions:null==i?void 0:i.acquisitionActions,sequenceNumber:g,titleID:n,isPurchasing:h,rawContext:r.rawContext,isRefunding:d},N={synopsis:null==a?void 0:a.synopsis,modalId:`extras-synopsis-${u}-${c}`,header:a.title},S={title:a.title,secondLine:s.createElement("div",null,s.createElement("div",{className:H},s.createElement("div",{className:z},s.createElement(ae.B,T)),s.createElement("div",{className:z},s.createElement(le.r,{runtime:a.runtime})),s.createElement("div",{className:z},s.createElement(oe.Ad,{isAd:a.isAd})),s.createElement("div",{className:z},s.createElement(te.i,{ratingBadge:w}))),s.createElement(ve.Lx,N),s.createElement("div",{className:$},s.createElement(ie.Pz,C)))};return s.createElement(ee.Beard,De({className:D({[Z]:I},Q)},S),s.createElement(L.Packshot,De({},y,{asin:m}),s.createElement("div",{className:U},s.createElement("div",{className:Y},s.createElement(W.Icon,{use:W.IconType.SMILE})),p&&s.createElement(K.t,De({className:F,classNameContainer:F},v)))))}));var fe=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const ye=e=>{const{cardTitleIds:t,index:a,impressionData:i,header:n}=e;if((0,f.xb)(t))return null;const r=t.map(((e,t)=>((e,t,n)=>s.createElement(Ee,{key:`extras-carousel-collection${n?`-${n}`:""}-${e}-${t}`,idx:t,titleId:e,impressionData:i,carouselIndex:a}))(e,t)));return s.createElement("div",{className:B},n&&s.createElement("h1",{className:M}," ",n," "),s.createElement(fe.h.Consumer,null,(({formFactor:e})=>{const t=["Tablet","Phone"].includes(e);return s.createElement(A.Carousel,{className:q,leftScrollButtonClassName:D({[X]:t}),rightScrollButtonClassName:D({[X]:t})},r)})))};var we=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");function Te(){return Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Te.apply(this,arguments)}const Ie=(0,i.$j)((e=>({showExtrasTab:V(e),extrasCollections:R(e)})))((({extrasCollections:e,showExtrasTab:t})=>{if(!t)return null;const a=e.map(((e,t)=>s.createElement("div",{className:we.Z.pageSection},s.createElement(ye,Te({},e,{key:`extras-collection-${e.index}-${t}`})))));return s.createElement(v.Container,null,a)}));var Ce=a("./src/widgets/DVWebNodeDetail/selectors/carousel.ts"),Ne=a("./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts"),Se=a("./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts"),Pe=a("./src/widgets/DVWebNodeDetail/selectors/productDetails.ts"),xe=a("./node_modules/react-dom/index.js"),ke=a("./src/widgets/DVWebNodeDetail/selectors/shared.ts");const Re=(0,x.P)([ke.k7,re.op,k.bS.exploreTabContent],((e,t,a)=>"true"!==t.disableExploreTab&&Boolean(e&&a&&a.staticPageContent)));var Ve=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),Ae=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),We=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),Le=a("./src/util/csm/csm.tsx");const Oe="StarlightPlayRequest",Be=({content:e,showExploreTab:t,requestContext:a,titleId:i,logger:n})=>{const{onPlay:r}=s.useContext(ce.ET),{isRecognizedCustomer:o,queryParameters:l,originalURI:c,isRetail:d}=a,u=()=>{const e="dv_dp_explore_sign_in",t=(0,We.P_)({parameters:l,originalURI:c,isRetail:d},i,e);return(0,We.Md)({parameters:l,originalURI:c,isRetail:d},e,t)};return s.useEffect((()=>{if(t&&e){(0,Le._U)("pv-starlight-detail-page");const e=({detail:e})=>{e&&(n.count(`${Ve.EZ}_Starlight_Playback`,1,!1),r(Object.assign(e,!o&&{signInUrl:u()})))};return document.addEventListener(Oe,e),()=>{const t=document.getElementById("starlight-root");t&&xe.unmountComponentAtNode(t),document.removeEventListener(Oe,e)}}}),[]),t&&e&&e.staticPageContent?s.createElement("div",{dangerouslySetInnerHTML:{__html:e.staticPageContent}}):null},Me=(0,Ae.n)((0,i.$j)((e=>({content:k.bS.exploreTabContent(e),showExploreTab:Re(e),requestContext:(0,O.Iz)(e),titleId:k.bS.pageTitleId(e)})))(s.memo(Be)));var Ue=a("./src/widgets/DVWebNodeDetail/selectors/reviews.ts");const je=({tabId:e,isVisible:t,isLazy:a,children:i})=>{const[n,o]=s.useState(t||!a);return t&&!n&&o(!0),s.createElement("div",{className:r,id:`tab-content-${e}`},n&&i)},Fe="_3TK1dy",He="_3YKDVU",ze="_3bRbIF",$e="_3DRSrq",qe="_3YEO4R",Ge="_3yWe9a",Ze="_3--sMO",Qe="xdM40h",Ye="CDfNOj",Xe="_30c2Sa",Ke="_1-VB9c",Je="yr9cWl",et="_2McGUt",tt="_3A4for",at="_29fLOo",st="Z4NaUV",it="_2vRori",nt="_15La92",rt="_1hkmup",ot="_2ej1r8";var lt=a("./node_modules/@amzn/dvui/dist/Button.js"),ct=a("./src/util/utils/marketplace.ts"),dt=a("./src/shared/utils/analytics/recordReftag.tsx"),ut=a("./src/shared/imageUtils/imageUtils.ts"),mt=a("./node_modules/@amzn/dvui/dist/Link.js");function pt(e,t){return`${e}?ref_=${t}`}function gt({imageUrl:e,titleType:t,bookLink:a,isMobile:i}){if(!t||!a)return null;const n=D("SERIES"===t?ze:qe),r="SERIES"===t?329:236;if(!e||""===e)return s.createElement("div",{className:`${n} ${$e}`},s.createElement("a",{href:a,target:"_blank"},s.createElement(W.Icon,{use:W.IconType.SMILE})));const o={alt:"",src:e,baseType:ut.rB.HEIGHT,baseValue:i?138:r,isLazy:!0};return s.createElement("div",{className:D(n)},s.createElement("a",{href:a,target:"_blank","data-automation-id":"shop-image-link"},s.createElement(K.t,o)))}function _t(e){var t,a,s;if(!e)return null;return{title:e.title,asin:e.asin,titleType:e.titleType,synopsis:e.synopsis,author:null===(t=e.contributors)||void 0===t||null===(a=t.producers)||void 0===a?void 0:a[0].name,imageUrl:null===(s=e.images)||void 0===s?void 0:s.covershot}}const ht=({bookMetadata:e,volumeSize:t,isMobile:a,retailUrlPrefix:i})=>{if(!e)return null;const n=pt(i+e.asin,(0,b.i)("atv_dp_shop_series"));return s.createElement("div",{className:Fe,"data-automation-id":"shop-series-section"},s.createElement("div",{className:Ge},e.title),s.createElement("div",{className:Qe},s.createElement("div",{className:Ke},"(",t," ",s.createElement(E.H1,{stringID:"DV_DP_book_series"}),")"),s.createElement("div",{className:Xe},s.createElement(E.H1,{stringID:"DV_DP_kindle_edition"})),s.createElement("div",{className:Ye},s.createElement(E.H1,{stringID:"DV_DP_by"})," ",e.author)),!a&&s.createElement("div",{className:at},s.createElement(ve.GR,{synopsis:e.synopsis})),!a&&s.createElement("div",{className:st},s.createElement(lt.Button,{onClick:()=>{window.open(n,"_blank")},use:lt.Purchase,"data-automation-id":"main-series-btn"},s.createElement(E.H1,{stringID:"DV_DP_see_full_series"}))),s.createElement(gt,{imageUrl:e.imageUrl,titleType:e.titleType,bookLink:n,isMobile:a}))},bt=({bookMetadata:e,volumeId:t,volumeSize:a,seriesTitle:i,retailUrlPrefix:n,isMobile:r})=>{if(!e||!i)return null;const o=pt(n+e.asin,(0,b.i)("atv_dp_shop_volume_{volumeId}",{volumeId:`${t}`}));return s.createElement("div",{className:He,"data-automation-id":"shop-volume-member"},s.createElement("div",{className:Ze},e.title),s.createElement("div",{className:Je},s.createElement("div",{className:Xe},s.createElement(E.H1,{stringID:"DV_DP_kindle_edition"})),s.createElement("div",null,s.createElement(E.H1,{stringID:"DV_DP_volume_in_series",replace:{volumeId:`${t}`,volumeSize:`${a}`,title:`${i}`}})),s.createElement("div",null,s.createElement(E.H1,{stringID:"DV_DP_by"})," ",e.author),!r&&s.createElement("div",{className:tt},s.createElement("a",{className:et,href:o,target:"_blank","data-automation-id":"shop-view-details-link"},s.createElement(E.H1,{stringID:"DV_DP_view_details"})))),s.createElement(gt,{imageUrl:e.imageUrl,titleType:e.titleType,bookLink:o,isMobile:r}))},vt=(0,i.$j)((e=>({shop:k.mZ.shop(e),isMobile:(0,re.Hu)(e),marketplaceId:(0,O.C2)(e)})))((({shop:e,isMobile:t,marketplaceId:a})=>{const{clickStreamPageType:i,clickStreamSubPageType:n,refTagTitleId:r,isDCSAnalyticsCallEnabled:o}=s.useContext(fe.h),l=null==e?void 0:e.bookSeries[0],c=null==e?void 0:e.bookVolumes,d=c&&c.length||0,u="https://www."+(0,ct.c3)(a)+"/gp/product/",m=null==c?void 0:c.map(((e,a)=>s.createElement(bt,{bookMetadata:_t(e),volumeId:a+1,volumeSize:d,seriesTitle:null==l?void 0:l.title,retailUrlPrefix:u,isMobile:t}))),[p,g]=s.useState(d>20);return s.createElement(v.Container,null,s.createElement("div",{className:we.Z.pageSection},s.createElement(ht,{bookMetadata:_t(l),volumeSize:d,isMobile:t,retailUrlPrefix:u}),s.createElement("div",{className:rt},s.createElement(E.H1,{stringID:"DV_DP_available_on_kindle"})),s.createElement("div",{className:nt,"data-automation-id":"shop-volume-section"},null==m?void 0:m.slice(0,20),!p&&(null==m?void 0:m.slice(20))),p&&s.createElement(mt.Link,{className:ot,onClick:()=>{p&&(0,dt.XQ)((0,b.i)("atv_dp_shop_expander"),i,n,r,void 0,void 0,o),g(!p)},"data-automation-id":"shop-expander"},s.createElement(E.H1,{stringID:"DV_DP_volume_expander",replace:{volumeSize:`${d}`}})),!p&&s.createElement("div",{className:D(st,it)},s.createElement(lt.Button,{onClick:()=>{window.open(pt(u+(null==l?void 0:l.asin),(0,b.i)("atv_dp_shop_series")),"_blank")},use:t?lt.Default:lt.Purchase,"data-automation-id":"series-btn-af-expander"},s.createElement(E.H1,{stringID:"DV_DP_see_full_series"})))))})),Dt=(0,x.P)(k.mZ.shop,(e=>Boolean(e&&e.bookSeries&&e.bookSeries.length>0&&e.bookVolumes&&e.bookVolumes.length>0)));function Et(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ft;!function(e){e.EPISODES_TAB_ID="episodes",e.EXPLORE_TAB_ID="explore",e.RELATED_TAB_ID="related",e.DETAILS_TAB_ID="details",e.EXTRAS_TAB_ID="extras",e.SHOP_TAB_ID="shop"}(ft||(ft={}));const yt=()=>{var e;return null===(e=document)||void 0===e?void 0:e.getElementById(`tab-selector-${ft.DETAILS_TAB_ID}`)},wt=a("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx").GZ,Tt=[ft.EPISODES_TAB_ID,ft.EXPLORE_TAB_ID,ft.EXTRAS_TAB_ID,ft.RELATED_TAB_ID,ft.DETAILS_TAB_ID,ft.SHOP_TAB_ID];class It extends s.Component{constructor(e){var t,a;super(e),Et(this,"navHeight",void 0),Et(this,"navIo",void 0),Et(this,"navRef",void 0),Et(this,"tabEnabledMap",(({showTabCollections:e,showCarousels:t,showOtherFormats:a,showCastAndCrew:s,showProductDetails:i,showExploreTab:n,showReviews:r,showExtras:o,showShop:l})=>({[ft.EPISODES_TAB_ID]:e,[ft.EXPLORE_TAB_ID]:n,[ft.EXTRAS_TAB_ID]:o,[ft.RELATED_TAB_ID]:t||s,[ft.DETAILS_TAB_ID]:i||a||r,[ft.SHOP_TAB_ID]:l}))(this.props)),Et(this,"queryTabId",(e=>{const t=e.tab?e.tab[0]:void 0;return Object.values(ft).includes(t)?t:void 0})(this.props.queryParameters)),Et(this,"defaultTabId",(t=this.tabEnabledMap,(a=this.queryTabId)&&t[a]?a:t[ft.EXPLORE_TAB_ID]?ft.EXPLORE_TAB_ID:Tt.find((e=>t[e]))||"")),Et(this,"defaultTab",`tab-content-${this.defaultTabId}`),this.navRef=s.createRef(),this.state={selectedTab:this.defaultTab,navIsActive:!1,pvNavSticky:!1}}componentDidMount(){if(!this.props.disableStickyBtfTab){var e,t;const a=document.getElementById("pv-nav"),s=this.props.isPhablet?0:60;this.navHeight=a&&a.getBoundingClientRect()&&a.getBoundingClientRect().height||s,this.navIo=new IntersectionObserver((([e])=>{const t=Boolean(a)||!this.props.isPhablet&&(()=>{const e=document.querySelector(".av-retail-m-nav-container");return e&&void 0!==e&&void 0!==e.dataset&&"true"===e.dataset.stickinessready})();this.setState({navIsActive:!e.isIntersecting,pvNavSticky:t})}),{rootMargin:`-${this.navHeight}px`,threshold:1}),null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.observe&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.observe(this.navRef.current)}this.navRef&&this.navRef.current&&this.queryTabId&&this.tabEnabledMap[this.queryTabId]&&this.moveToSelected()}componentWillUnmount(){var e,t;null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.unobserve&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.unobserve(this.navRef.current)}moveToSelected(){const e=this.navRef.current.getBoundingClientRect().top-this.navHeight+5;window.scrollBy({top:Math.ceil(e),behavior:"smooth"})}setSelectedAndScroll(e){const t=`tab-content-${e}`;this.moveToSelected(),this.setState({selectedTab:t})}getTabs(){const e="hor",t=this.tabEnabledMap[ft.EPISODES_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_episodes"}),content:s.createElement(I,null),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_ep",{tabType:e}),automationId:"btf-episodes-tab",tabId:ft.EPISODES_TAB_ID},a=this.tabEnabledMap[ft.EXPLORE_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_explore"}),content:s.createElement(Me,null),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_exp",{tabType:e}),automationId:"btf-explore-tab",tabId:ft.EXPLORE_TAB_ID},i=this.tabEnabledMap[ft.RELATED_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_related"}),content:s.createElement("div",{className:D({[u]:!this.props.isRetail})},s.createElement(C.B,null),s.createElement(S.B,null)),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_rel",{tabType:e}),automationId:"btf-related-tab",tabId:ft.RELATED_TAB_ID},n=this.tabEnabledMap[ft.DETAILS_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_details"}),content:s.createElement(s.Fragment,null,s.createElement(P.W,null),s.createElement(N.D,null),this.props.showReviews&&s.createElement(wt,null),!1),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_det",{tabType:e}),automationId:"btf-details-tab",tabId:ft.DETAILS_TAB_ID};return[t,a,this.tabEnabledMap[ft.EXTRAS_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_extras"}),content:s.createElement(Ie,null),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_ext",{tabType:e}),automationId:"btf-extras-tab",tabId:ft.EXTRAS_TAB_ID},i,n,this.tabEnabledMap[ft.SHOP_TAB_ID]&&{header:s.createElement(E.H1,{stringID:"DV_DP_TAB_shop"}),content:s.createElement(vt,null),refTag:(0,b.i)("atv_dp_btf_tab_{tabType}_shop",{tabType:e}),automationId:"btf-shop-tab",tabId:ft.SHOP_TAB_ID}].filter(Boolean)}render(){const e=this.getTabs(),{selectedTab:t}=this.state;if((0,f.xb)(e))return null;const a=e.map(((e,a)=>{const i=`tab-content-${e.tabId}`===t;return s.createElement(s.Fragment,{key:`btf-content-${a}`},s.createElement("input",{id:`tab-selector-${e.tabId}`,name:"btf-content-selector",className:o,type:"radio",checked:i,onClick:()=>this.setSelectedAndScroll(e.tabId)}),s.createElement(je,{tabId:e.tabId,isVisible:i,isLazy:!1},e.content))})),i=s.createElement("div",{className:D(p,{[h]:this.state.navIsActive&&this.navRef.current.getBoundingClientRect().top-this.navHeight<0,[g]:!this.state.pvNavSticky,[_]:!1})},s.createElement(v.Container,null,s.createElement("div",{className:l},e.map(((e,t)=>s.createElement("h2",{key:`btf-nav-${t}`,className:c},s.createElement(me._,{refTag:e.refTag},s.createElement("label",{className:D(d,{[m]:this.state.selectedTab===`tab-content-${e.tabId}`}),htmlFor:`tab-selector-${e.tabId}`,"data-automation-id":e.automationId},e.header))))))));return s.createElement("div",null,s.createElement("div",{ref:this.navRef}),i,s.createElement("div",{className:n},a))}}const Ct=(0,i.$j)((e=>({showTabCollections:(0,w.gy)(e),showCarousels:(0,Ce.i)(e),showOtherFormats:(0,Ne.$)(e),showCastAndCrew:(0,Se.s)(e),showProductDetails:(0,Pe.W)(e),showExploreTab:Re(e),showReviews:(0,Ue.M)(e),showExtras:V(e),showShop:Dt(e),isPhablet:(0,re.G_)(e),isRetail:(0,O.T_)(e),disableStickyBtfTab:(0,re.Fk)(e),queryParameters:(0,O.$s)(e)})))(It)},"./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx":(e,t,a)=>{"use strict";a.d(t,{vY:()=>R});var s=a("./node_modules/react/index.js"),i=a("./node_modules/classnames/index.js"),n=a("./node_modules/@amzn/dvui/dist/Button.js"),r=a("./node_modules/@amzn/dvui/dist/Text.js"),o=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),l=a("./node_modules/@amzn/dvui/dist/Callout.js"),c=a("./node_modules/@amzn/dvui/dist/Icons/WatchParty.js");const d="_Oe4Xf",u="_1l-91e",m="_10qeoA",p="_2tCfjd",g="_1wlxMN",_="_3i_OT2",h="_2s3m69",b="_2mS7op",v="_3WeIU5",D="_2jGOpa";var E=a("./src/widgets/DVWebNodeDetail/utils/actionForm.tsx"),f=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),y=a("./src/util/wrappers/ArgsContext.tsx"),w=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),T=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),I=a("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),C=a("./src/shared/CS/components/IconButton/IconButton.tsx");function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=({isButton:e,buttonClassName:t})=>{const{getString:a}=s.useContext(w.h);return e?s.createElement(n.Button,{className:h,"aria-label":a("DV_DP_CREATE_WATCH_PARTY"),testID:"watch-party-link",type:"submit"},s.createElement("span",{className:b},s.createElement(c.WatchParty,null))):s.createElement("button",{className:i(d,t),"data-automation-id":"watch-party-link"},s.createElement(f.H1,{stringID:"DV_DP_CREATE_WATCH_PARTY"}))};class P extends s.PureComponent{constructor(...e){super(...e),N(this,"state",{showFTUE:!1}),N(this,"onFTUEDismiss",(()=>{localStorage.setItem(P.WP_FTUE_DISMISSED,P.WP_FTUE_DISMISSED_VALUE)}))}componentDidMount(){const{queryParameters:e}=this.props.context,t=localStorage.getItem(P.WP_FTUE_DISMISSED)===P.WP_FTUE_DISMISSED_VALUE||!1,a=localStorage.getItem(P.WP_FTUE_SHOWN_COUNTER),s=a?parseInt(a):0,i=e.ref_&&e.ref_[0]||"";if(!t&&s<P.WP_FTUE_MAX_TIMES_SHOWN||i.startsWith(P.WP_FTUE_REFTAG_PREFIX)){const e=s+1;localStorage.setItem(P.WP_FTUE_SHOWN_COUNTER,e.toString()),this.setState({showFTUE:!0})}}render(){const{header:e,body:t}=this.props;return this.state.showFTUE?s.createElement("div",{className:`${m} ${T.Z.enablePointerEvents}`},s.createElement(l.Callout,{position:"bottom",size:"m",use:"info",className:i(u,"wp-ftue-tooltip"),content:s.createElement(k,{header:e,body:t}),startOpen:!0,onDismiss:this.onFTUEDismiss})):null}}N(P,"WP_FTUE_SHOWN_COUNTER","dvWebWPFtueShownCounter"),N(P,"WP_FTUE_DISMISSED","dvWebWPFtueDismissed"),N(P,"WP_FTUE_REFTAG_PREFIX","atv_wp_merch_"),N(P,"WP_FTUE_DISMISSED_VALUE","true"),N(P,"WP_FTUE_MAX_TIMES_SHOWN",3);const x=(0,y.s6)(P),k=({header:e,body:t})=>s.createElement(s.Fragment,null,s.createElement(r.Text,{tag:"h3",className:p,string:e}),s.createElement(r.Text,{tag:"p",className:g,string:t})),R=(0,I.eB)((({watchPartyAction:e,withFTUETooltip:t,buttonOrLinkProps:a,containerRef:n,hasDefaultTheme:r})=>{const{getString:l}=s.useContext(w.h);if(!e)return null;const{endpoint:{partialURL:d,query:m}}=e,p=d;return s.createElement(E.y,{action:p,method:"POST",hiddenInputs:m,className:i(T.Z.enablePointerEvents,_,"dv-dp-node-watchparty")},r?s.createElement(s.Fragment,null,s.createElement(o.Tooltip,{position:"top",size:"s",className:i(u,"wp-hover-tooltip",D),content:l("DV_DP_WATCH_PARTY_TOOLTIP"),id:a&&a.isButton?"dv-dp-node-watchparty-button-tooltip":void 0,containerRef:n},s.createElement(S,a)),t&&s.createElement(x,{header:l("DV_DP_WATCH_PARTY_FTUE_HEADER"),body:l("DV_DP_WATCH_PARTY_FTUE_BODY")}),s.createElement("span",{className:v},s.createElement(f.H1,{stringID:"DV_DP_CREATE_WATCH_PARTY"}))):s.createElement(C.h,{icon:s.createElement(c.WatchParty,null),ariaLabel:l("DV_DP_WATCH_PARTY_TOOLTIP"),label:"Watchparty"}))}))},"./src/widgets/DVWebNodeDetail/context/themeContext.tsx":(e,t,a)=>{"use strict";a.d(t,{QI:()=>c,eB:()=>l,kw:()=>o,wS:()=>n});var s=a("./node_modules/react/index.js");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},i.apply(this,arguments)}let n;!function(e){e.Default="Default",e.NextGen="NextGen"}(n||(n={}));const r={detailPageTheme:n.Default},o=s.createContext(r),l=e=>t=>s.createElement(o.Consumer,null,(a=>{const r=!a.detailPageTheme||a.detailPageTheme===n.Default,o=a.detailPageTheme===n.NextGen;return s.createElement(e,i({},t,{detailPageTheme:a.detailPageTheme,hasDefaultTheme:r,hasNextGenTheme:o}))})),c=(e,t)=>a=>s.createElement(o.Consumer,null,(({detailPageTheme:i})=>i===n.Default?s.createElement(e,a):s.createElement(t,a)))},"./src/widgets/DVWebNodeDetail/context/withLogger.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>r});var s=a("./node_modules/react/index.js"),i=a("./src/util/wrappers/LoggersContext.tsx");function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n.apply(this,arguments)}const r=e=>t=>s.createElement(i.jW,null,(({logger:a})=>s.createElement(e,n({},t,{logger:a}))))},"./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts":(e,t,a)=>{"use strict";a.d(t,{F_:()=>l,b6:()=>c,eQ:()=>d,pV:()=>o});var s=a("./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx"),i=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),n=a("./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx"),r=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts");const o=({titleID:e,atfWidgets:t,isElcano:a})=>{const s={titleID:e,sections:["Atf"],isElcano:a};return t&&(s.widgets=(0,i.Dv)({atf:t})),s},l=e=>{const t=u();return d(e,t,n.mO,(e=>{const t=e&&e.episodeListSize&&e.episodeListSize[0];return t?(0,i.e$)(t):void 0})(e.context.queryParameters)||r.Wq)},c=(e,t)=>({...e,...t}),d=(e,t,a,n)=>({...e,sections:["Btf"],widgets:(0,i.Dv)({btf:t}),widgetsConfig:(0,i.Dv)({episodes:{startIndex:a,pageSize:n},bonus:{startIndex:(0,s.Z_)(e.context.queryParameters,"bonus"),pageSize:s.L8}})}),u=()=>["Episodes","Bonus","Schedule","Highlights","Restrictions","ProductDetails","CastAndCrew","Restrictions","OtherFormats","Carousels","Shop"]},"./src/widgets/DVWebNodeDetail/data/normalize.ts":(e,t,a)=>{"use strict";a.d(t,{O7:()=>ue,hV:()=>_e,eq:()=>ve,cg:()=>pe,cT:()=>De,s8:()=>Ee,OS:()=>ge});var s=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),i=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),n=a("./src/util/logger/logger.ts"),r=a("./src/util/types/wps/settings.ts"),o=a("./src/widgets/DVWebNodeDetail/reducers/devices.ts"),l=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts"),c=a("./node_modules/@amzn/av-experiment-token-js-library/index.js"),d=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),u=a("./node_modules/@amzn/dvui/dist/Block.js"),m=a("./node_modules/@amzn/dv-web-node-reftags/index.js");let p;!function(e){e.WP_ERROR="WP_ERROR",e.WP_END="WP_END",e.WP_STREAM_ENDED="WP_STREAM_ENDED",e.WP_CREATE_INELIGIBLE="WP_CREATE_INELIGIBLE",e.WP_JOIN_INELIGIBLE="WP_JOIN_INELIGIBLE",e.WP_GEO_RESTRICTION="WP_GEO_RESTRICTION",e.WP_UNSUPPORTED_BROWSER="WP_UNSUPPORTED_BROWSER",e.WP_UNSUPPORTED_CHAT="WP_UNSUPPORTED_CHAT",e.WP_CREATE_INELIGIBLE_TVOD="WP_CREATE_INELIGIBLE_TVOD",e.WP_JOIN_INELIGIBLE_TVOD="WP_JOIN_INELIGIBLE_TVOD",e.WP_CREATE_INELIGIBLE_SVOD_TVOD="WP_CREATE_INELIGIBLE_SVOD_TVOD",e.WP_JOIN_INELIGIBLE_SVOD_TVOD="WP_JOIN_INELIGIBLE_SVOD_TVOD",e.WP_BANNED_SPECIFIC_CHAT="WP_BANNED_SPECIFIC_CHAT",e.WP_SAFARI_MAC_UNSUPPORTED="WP_SAFARI_MAC_UNSUPPORTED"}(p||(p={}));const g=e=>({learnMore:{href:`/watchpartylearn/ref=${e}`}}),_={learnMore:{href:`/help/watchparty/communityguidelines/ref=${(0,m.i)("atv_dp_wp_guid")}`}},h={[p.WP_ERROR]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_ERROR_HEADING",body:"DV_DP_WP_ERROR",automationId:"wp-error-banner"},[p.WP_END]:{type:u.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_END",automationId:"wp-end-banner"},[p.WP_STREAM_ENDED]:{type:u.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_STREAM_ENDED",automationId:"wp-stream-end-banner"},[p.WP_CREATE_INELIGIBLE]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE",dvStringAttrs:g("atv_dp_wp_cr_in_learn"),automationId:"wp-create-ineligible-banner"},[p.WP_JOIN_INELIGIBLE]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE",dvStringAttrs:g("atv_dp_wp_jn_in_learn"),automationId:"wp-join-ineligible-banner"},[p.WP_GEO_RESTRICTION]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_GEO_RESTRICTION_HEADING",body:"DV_DP_WP_GEO_RESTRICTION",automationId:"wp-geo-restriction-banner"},[p.WP_UNSUPPORTED_BROWSER]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_BROWSER_HEADING",body:"DV_DP_WP_UNSUPPORTED_BROWSER",dvStringAttrs:g("atv_dp_wp_ub_learn"),automationId:"wp-unsupported-browser-banner"},[p.WP_UNSUPPORTED_CHAT]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_CHAT_HEADING",body:"DV_DP_WP_UNSUPPORTED_CHAT",automationId:"wp-unsupported-chat-banner"},[p.WP_CREATE_INELIGIBLE_TVOD]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_TVOD",dvStringAttrs:g("atv_dp_wp_cr_in_learn_t"),automationId:"wp-create-ineligible-banner"},[p.WP_JOIN_INELIGIBLE_TVOD]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_TVOD",dvStringAttrs:g("atv_dp_wp_jn_in_learn_t"),automationId:"wp-join-ineligible-banner"},[p.WP_CREATE_INELIGIBLE_SVOD_TVOD]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD",dvStringAttrs:g("atv_dp_wp_cr_in_learn_st"),automationId:"wp-create-ineligible-banner"},[p.WP_JOIN_INELIGIBLE_SVOD_TVOD]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD",dvStringAttrs:g("atv_dp_wp_jn_in_learn_st"),automationId:"wp-join-ineligible-banner"},[p.WP_BANNED_SPECIFIC_CHAT]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING",body:"DV_DP_WP_BANNED_SPECIFIC_CHAT",dvStringAttrs:_,automationId:"wp-banned-specific-chat"},[p.WP_SAFARI_MAC_UNSUPPORTED]:{type:u.MessageTypes.warning,heading:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING",body:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY",dvStringAttrs:g("atv_dp_wp_ub_learn"),automationId:"wp-mac-safai-unsupported"}};var b=a("./src/shared/DetailPage/queryParameters.ts");let v;!function(e){e[e.ALLOW=0]="ALLOW",e[e.DENY_WITH_UPSELL=1]="DENY_WITH_UPSELL",e[e.DENY=2]="DENY",e[e.NOT_APPLICABLE=3]="NOT_APPLICABLE"}(v||(v={}));v.ALLOW,v.DENY_WITH_UPSELL,v.DENY,v.NOT_APPLICABLE;let D,E,f,y,w,T,I;!function(e){e.PURCHASE="PURCHASE",e.RENTAL="RENTAL",e.SUBSCRIPTION="SUBSCRIPTION"}(D||(D={})),function(e){e.GEO_RESTRICTED="GEO_RESTRICTED",e.WP_ENDED="WP_ENDED",e.CHAT_NOT_SUPPORTED="CHAT_NOT_SUPPORTED",e.BANNED_USER="BANNED_USER"}(E||(E={})),function(e){e.WatchPartyInSession="WatchPartyInSession",e.Idle="Idle",e.Closed="Closed"}(f||(f={})),function(e){e.TransitionTitle="TransitionTitle"}(y||(y={})),function(e){e.INVALID_REQUEST_PARAMETERS="INVALID_REQUEST_PARAMETERS",e.DEPENDENCY_RETRIEVE_FAILURE="DEPENDENCY_RETRIEVE_FAILURE",e.WP_DECORATION_ERROR="WP_DECORATION_ERROR",e.WP_GET_TITLES_ERROR="WP_GET_TITLES_ERROR",e.UNAUTHORIZED_PRIME_PLAYBACK="UNAUTHORIZED_PRIME_PLAYBACK",e.WP_GET_STATE_ERROR="WP_GET_STATE_ERROR",e.WP_DESTROY_ERROR="WP_DESTROY_ERROR",e.WP_CREATE_ERROR="WP_CREATE_ERROR",e.UNAVAILABLE_TERRITORY="UNAVAILABLE_TERRITORY",e.RESOURCE_NOT_FOUND_ERROR="RESOURCE_NOT_FOUND_ERROR"}(w||(w={})),function(e){e.REGISTER="register",e.DEREGISTER="deregister",e.PAUSED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_PAUSED",e.RESUMED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_RESUMED",e.SEEK_FORWARD="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_SEEK_FORWARDS",e.SEEK_BACKWARD="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_SEEK_BACKWARDS",e.FINISHED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_FINISHED",e.HOST="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_HOST",e.HOST_ONLY_CONTROLS="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_HOST_ONLY",e.EVERYONE_CONTROLS="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_EVERYONE",e.RESTRICTED_CONTROLS="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_RESTRICTED_CONTROLS",e.ALLOWED_CONTROLS="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_ALLOWED_CONTROLS"}(T||(T={})),function(e){e.SVOD="s",e.TVOD="t",e.SVOD_TVOD="st"}(I||(I={}));var C=a("./src/widgets/DVWebNodeDetail/reducers/reviews.ts");const N=new n.Oc("DVWebNode:detail"),S=e=>Object.entries(e).reduce(((e,[t,a])=>{const{catalogId:s,contributors:i,genres:n,enhancedSubtitles:r,images:o,isStarlightEnhanced:l,studios:c,...d}=a;return e[t]={...d,images:o&&{packshot:o.packshot,covershot:o.covershot}},e}),{}),P=(e,t)=>({[i.Xt]:S({...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.carousel||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.castAndCrew?t.widgets.castAndCrew.castAndCrews:[]).reduce(((e,t)=>(t.titleCollections.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.seasonSelector||[]).reduce(((e,t)=>(e[t.titleID]=t.detail,e)),{}),...(t.widgets.bundleCarousel&&t.widgets.bundleCarousel.cards||[]).reduce(((e,t)=>(e[t.titleID]=t.detail,e)),{})}),[i.B6]:{...t.widgets.header?{[e]:t.widgets.header.detail}:{}},[i.k5]:{...t.widgets.productDetails?{[e]:t.widgets.productDetails.detail}:{}}}),x=(e,t)=>({...t.widgets.self?{[e]:t.widgets.self}:{},...(t.widgets.seasonSelector||[]).reduce(((e,t)=>(e[t.titleID]=t.self,e)),{}),...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.self)).forEach((t=>{e[t.titleID]=t.self})),e)),{}),...t.widgets.buybox&&t.widgets.buybox.bestTitleID&&t.widgets.buybox.bestSelf?{[t.widgets.buybox.bestTitleID]:t.widgets.buybox.bestSelf}:{}}),k=(e,t)=>({...t.widgets.header?{[e]:t.widgets.header.imdb}:{}}),R=(e,t)=>({...t.widgets.notification?{[e]:t.widgets.notification}:{}}),V=(e,t)=>({...t.widgets.seasonSelector?{[e]:t.widgets.seasonSelector.map((e=>({seasonId:e.titleID,seasonLink:e.seasonLink})))}:{}}),A=(e,t)=>({...t.widgets.buybox?{[e]:t.widgets.buybox.titleID}:{}}),W=(e,t)=>({...t.widgets.creative?{[e]:t.widgets.creative}:{}}),L=e=>e.widgets.pageContext,O=(e,t)=>({...t.widgets.restrictions?{[e]:t.widgets.restrictions}:{}}),B=(e,t)=>({...t.widgets.trailer?{[e]:t.widgets.trailer}:{}}),M=(e,t)=>({...t.widgets.watchlist?{[e]:t.widgets.watchlist}:{}}),U=e=>({...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...(e.widgets.castAndCrew&&e.widgets.castAndCrew.castAndCrews.map((e=>e.titleCollections))||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...e.widgets.bundleCarousel&&e.widgets.bundleCarousel.cards||[].filter((e=>e.watchlist)).reduce(((e,t)=>(e[t.titleID]=t.watchlist,e)),{})}),j=(e,t)=>({[s.L5]:[...t.widgets.titleContent||[],...t.widgets.extras||[]].reduce(((e,t)=>(t.cards.forEach((t=>{t.action&&(e[t.titleID]=t.action)})),e)),{}),[s.t1]:t.widgets.buybox?{[e]:t.widgets.buybox.action}:{}}),F=(e,t)=>({fragments:{...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...(t.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...t.widgets.buybox?{[e]:t.widgets.buybox.refund}:{}},refunding:null}),H=e=>{return{header:e.text,collectionType:(t=e.collectionType,t&&t.toLowerCase()||""),totalCardSize:e.totalCardSize,titleIds:e.cards.map((e=>e.titleID)),impressionData:e.impressionData};var t},z=(e,t)=>{var a,s,i;return null!==(a=t.widgets)&&void 0!==a&&a.titleContent&&(null===(s=t.widgets)||void 0===s||null===(i=s.titleContent)||void 0===i?void 0:i.length)>0?{[e]:t.widgets.titleContent.map((e=>H(e)))}:{}},$=(e,t)=>{var a,s,i;return null!==(a=t.widgets)&&void 0!==a&&a.extras&&(null===(s=t.widgets)||void 0===s||null===(i=s.extras)||void 0===i?void 0:i.length)>0?{[e]:t.widgets.extras.map((e=>H(e)))}:{}},q=(e,t)=>{var a,s,i;return null!==(a=t.widgets)&&void 0!==a&&a.carousel&&(null===(s=t.widgets)||void 0===s||null===(i=s.carousel)||void 0===i?void 0:i.length)>0?{[e]:t.widgets.carousel.map((e=>H(e)))}:{}},G=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.impressionAnalytics&&(e[t.titleID]=t.impressionAnalytics),e)),e),e)),{}),Z=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.entitlementCue&&(e[t.titleID]=t.entitlementCue),e)),e),e)),{}),Q=(e,t)=>t.widgets.bundleCarousel?{[e]:H(t.widgets.bundleCarousel)}:{},Y=(e,t,a)=>{const{widgets:{banner:s,buybox:i}}=t;return{crow:s?{[e]:s}:{},ui:X(a,i&&i.action&&i.action.watchPartyAction&&i.action.watchPartyAction.watchPartyOfferType||I.SVOD)}},X=(e,t)=>{const a=(e.queryParameters[b.pN]||[]).join("").toUpperCase();let s;switch(a){case p.WP_CREATE_INELIGIBLE:s=t===I.TVOD?p.WP_CREATE_INELIGIBLE_TVOD:t===I.SVOD_TVOD?p.WP_CREATE_INELIGIBLE_SVOD_TVOD:p.WP_CREATE_INELIGIBLE;break;case p.WP_JOIN_INELIGIBLE_SVOD_TVOD:s=p.WP_JOIN_INELIGIBLE_SVOD_TVOD;break;case p.WP_JOIN_INELIGIBLE:case p.WP_JOIN_INELIGIBLE_TVOD:default:s=a}const i=h[s];return i?{type:i.type,headingStringId:i.heading,stringId:i.body,dvStringAttrs:i.dvStringAttrs,automationId:i.automationId}:null},K=e=>({...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.castAndCrew&&e.widgets.castAndCrew.castAndCrews.map((e=>e.titleCollections))||[]).reduce(((e,t)=>(t.cards.filter((e=>e.pageLink)).forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{})}),J=(e,t)=>({...t.widgets.castAndCrew?{[e]:{...t.widgets.castAndCrew,castAndCrews:t.widgets.castAndCrew.castAndCrews.map((({titleCollections:e,cast:t})=>({cast:t,titles:e.cards.map((({titleID:e})=>e))})))}}:{}}),ee=(e,t)=>({...t.widgets.shop?{[e]:t.widgets.shop}:{}}),te=(e,t)=>({...t.widgets.otherFormats?{[e]:t.widgets.otherFormats}:{}}),ae=e=>e.widgets.bottomBar,se=(e,t)=>t.widgets.buybox&&t.widgets.buybox.action&&t.widgets.buybox.action.experimentToken?re(t.widgets.buybox.action.experimentToken,e):{},ie=(e,t)=>({...t.widgets.buybox?{[e]:Boolean(t.widgets.buybox.isComingSoon)}:{}}),ne=(e,t)=>t.widgets.productDetails?{[e]:t.widgets.productDetails.metadata,...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.metadata})),e)),{})}:{...t.widgets.metadata?{[e]:t.widgets.metadata}:{}},re=(e,t)=>{const a=new c.ExperimentTokenHelper,s=(()=>{try{return a.decode(e)}catch(e){return void N.count(`${d.EZ}::ExperimentTokenCallFailure`,1,!1)}})();return s?{[t]:{...oe(s.pvCinemaToken),...le(s.cancellationWinbackToken)}}:{}},oe=e=>{const t=e&&e.brandingMessage,a=e&&e.logoUrl;return e?{pvCinemaToken:{message:(0,l.e6)(t),logoUrl:a}}:{}},le=e=>{const t=e&&e.cancellationWinbackStringInfo;return t?{cancellationWinbackToken:{cancellationWinbackStringInfo:{label:t.label,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,playbackLabel:t.playbackLabel,modalMessage:t.modalMessage},enrollmentId:e.enrollmentId,csrfToken:e.csrfToken}}:{}},ce=(e,t)=>({...t.widgets.autoplayHero?{[e]:t.widgets.autoplayHero}:{}}),de=e=>e.widgets.playbackIntegration?e.widgets.playbackIntegration:{},ue=(e,t)=>{const a=me(e);return{pageTitleId:a,detail:P(a,e),action:j(a,e),refund:F(a,e),imdb:k(a,e),bundleCarousel:Q(a,e),buyboxTitleId:A(a,e),creative:W(a,e),banner:Y(a,e,t),notification:R(a,e),seasons:V(a,e),self:x(a,e),trailer:B(a,e),watchlist:M(a,e),hoverWatchlist:U(e),restriction:O(a,e),collections:z(a,e),extras:$(a,e),carousel:q(a,e),pageLink:K(e),castAndCrew:J(a,e),shop:ee(a,e),otherFormats:te(a,e),pageContext:L(e),bottomBar:ae(e),entitlementCue:Z(e),tapsExperimentToken:se(a,e),autoplayHero:ce(a,e),playbackIntegration:de(e),comingSoon:ie(a,e),impressionAnalytics:G(e),metadata:ne(a,e),widgets:{[a]:e.sections}}},me=e=>e&&e.widgets&&e.widgets.pageContext.pageTitleId,pe=e=>Object.keys(e.results).reduce(((t,a)=>{const{action:i,refund:n}=e.results[a];return t.action[s.L5][a]=i,t.refund.fragments[a]=n,t}),{action:{[s.t1]:{},[s.L5]:{}},refund:{fragments:{}}}),ge=(e,t)=>({watchlist:{...t.watchlistAction?{[e]:t.watchlistAction}:{}}}),_e=e=>{let t=o.V;if(e&&e.widgets){const a=e.widgets.find((e=>e.widgetType===r.dV.DevicesWidget&&e.content));a&&(t=a.content.devices)}return{deviceEntries:t}},he=e=>e.reduce(((e,t)=>(e[t.reviewID]=t,e)),{}),be=(e,t)=>{const a=(e||[]).map((e=>e.reviewID));return{[(0,C.fp)(t)]:a}},ve=(e,t,a)=>{var s,i,n;return a?{reviews:{...e&&e.output?{[a]:{reviewsAnalysisModel:e.output.reviewsAnalysisModel,reviewIdToReview:{...he(e.output.reviews),...he(e.output.internationalReviews||[])},reviewsOrdering:be(e.output.reviews,t),internationalReviewsOrdering:null===(s=e.output.internationalReviews)||void 0===s?void 0:s.map((e=>e.reviewID)),createReviewLink:e.output.createReviewLink,allReviewsLink:e.output.allReviewsLink,localeLanguage:e.output.localeLanguage,reviewTitleId:e.output.titleID,verifiedPurchaseLink:e.output.verifiedPurchaseLink}}:{}},reviewSubmission:{...e&&e.output?{[a]:{customerSubmittedReview:(i=e.output.customerSubmittedReview,i?{rating:i.rating,isVerifiedPurchase:i.isVerifiedPurchase,isUnprocessed:i.isUnprocessed,customerSubmittedReviewContent:i.review&&{reviewID:i.review.reviewID,reviewContent:null===(n=i.review.reviewContent)||void 0===n?void 0:n.replace(/<br \/>/g,"\n"),reviewTitle:i.review.reviewTitle,hoverText:i.review.hoverText,helpfulVotes:i.review.helpfulVotes,submissionRecord:i.review.submissionRecord}}:void 0),reviewSubmissionToken:e.output.reviewSubmissionToken,publicNameToken:e.output.publicNameToken,publicNameState:{state:"idle",publicName:e.output.publicName},reviewSubmissionLimits:e.output.reviewSubmissionLimits,reviewSubmissionState:"idle",ratingState:"idle",eligibilityState:"idle"}}:{}}}:{}},De=(e,t)=>({translatedReviews:{...t&&t.translatedReviews?{[e]:t.translatedReviews}:{}}}),Ee=(e,t)=>{const a=e.reviewContent&&{reviewContent:e.reviewContent.bodyText.replace(/<br \/>/g,"\n")},s=e.reviewContent&&{reviewTitle:e.reviewContent.titleText};return null!=t&&t.output?{isVerifiedPurchase:t.output.isVerifiedPurchase,rating:e.ratingValue,reviewID:t.output.reviewId,isSuccessful:t.output.isSuccessful,...a,...s}:void 0}},"./src/widgets/DVWebNodeDetail/reducers/action.ts":(e,t,a)=>{"use strict";a.d(t,{I6:()=>m,L5:()=>l,t1:()=>o});var s=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),i=a("./src/widgets/DVWebNodeDetail/actions/index.ts"),n=a("./node_modules/redux/es/redux.js"),r=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const o="atf",l="btf",c=(0,r.bc)([o,l]),d={},u=e=>(0,s.V)((t=>t.action&&t.action[e]),d,(e=>(t=d,a)=>{switch(a.type){case i.k.RefreshAtfActionBox:case i.k.RefreshBtfActionBoxes:case i.k.RefreshEpisode:return a.output&&a.output.action&&a.output.action[e]&&{...t,...a.output.action[e]}||t;default:return t}})(e)),m=(0,n.UY)(c.reduce(((e,t)=>(e[t]=u(t),e)),{}))},"./src/widgets/DVWebNodeDetail/reducers/collections.ts":(e,t,a)=>{"use strict";a.d(t,{I6:()=>c,Wq:()=>i});var s=a("./src/widgets/DVWebNodeDetail/actions/index.ts");const i=25,n={},r=["episodes","bonus"],o=(e,t)=>{t.reduce(((e,t)=>(t.collectionType&&(e[t.collectionType]?e[t.collectionType]={...e[t.collectionType],titleIds:[...e[t.collectionType].titleIds,...t.titleIds]}:e[t.collectionType]={...t}),e)),e||{})},l=(e,t)=>{const a=Object.keys(e).reduce(((t,a)=>(t[a]=[...e[a]],t)),{});return Object.keys(t).reduce(((e,a)=>{if(e[a]){const s={};o(s,e[a]),o(s,t[a]);const i=new Set(Object.keys(s));e[a]=r.filter((e=>i.has(e))).map((e=>s[e]))}else e[a]=[...t[a]];return e}),a)},c=(e=n,t)=>{switch(t.type){case s.k.STORE_MERGE:return t.payload.collections?l(e,t.payload.collections):e;case s.k.CHANGE_PAGE:return t.payload.collections?l({},t.payload.collections):{};default:return e}}},"./src/widgets/DVWebNodeDetail/reducers/detail.ts":(e,t,a)=>{"use strict";a.d(t,{B6:()=>n,I6:()=>l,Xt:()=>o,k5:()=>r});var s=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),i=a("./node_modules/redux/es/redux.js");const n="headerDetail",r="btfMoreDetails",o="detail",l=(0,i.UY)({[n]:(0,s.V)((e=>e.detail&&e.detail[n]),{}),[r]:(0,s.V)((e=>e.detail&&e.detail[r]),{}),[o]:(0,s.V)((e=>e.detail&&e.detail[o]),{})})},"./src/widgets/DVWebNodeDetail/reducers/devices.ts":(e,t,a)=>{"use strict";a.d(t,{I:()=>r,V:()=>i});var s=a("./src/widgets/DVWebNodeDetail/actions/index.ts");const i=void 0,n={deviceEntries:i},r=(e=n,t)=>t.type===s.k.GetDevices?t.output:e},"./src/widgets/DVWebNodeDetail/reducers/reviews.ts":(e,t,a)=>{"use strict";a.d(t,{I6:()=>d,JJ:()=>o,Kp:()=>r,fp:()=>l,yR:()=>n});var s=a("./src/widgets/DVWebNodeDetail/actions/index.ts"),i=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");const n="byRankDescending",r=0,o=e=>e?"byCQScore1Descending":n,l=e=>(0,i.q1)([e]),c={},d=(e=c,t)=>{switch(t.type){case s.k.STORE_MERGE:return t.payload.reviews?((e,t={})=>Object.keys(t).reduce(((e,a)=>{if(e[a]){const s=e[a],i=t[a],n={...s.reviewIdToReview,...i.reviewIdToReview},r={...s.reviewsOrdering,...i.reviewsOrdering};e[a]={...s,reviewIdToReview:n,reviewsOrdering:r}}else e[a]=t[a];return e}),{...e}))(e,t.payload.reviews):e;case s.k.CHANGE_PAGE:return t.payload.reviews||c;default:return e}}},"./src/widgets/DVWebNodeDetail/reducers/translatedReviews.ts":(e,t,a)=>{"use strict";a.d(t,{I:()=>l,X:()=>n});var s=a("./src/widgets/DVWebNodeDetail/actions/index.ts");const i={};let n;!function(e){e.Origin="Origin",e.Translated="Translated",e.Unsuccessful="Unsuccessful",e.Translating="Translating"}(n||(n={}));const r=e=>Object.keys(e).reduce(((t,a)=>{const s=e[a].translatedReviewItem;var i,r;return t.reviewIdToTranslatedReview[a]={...s,status:(i=e[a].isSuccessful,r=null==s?void 0:s.isTranslationPending,i?r?n.Translating:n.Translated:n.Unsuccessful)},t}),{reviewIdToTranslatedReview:{}}),o=(e,t,a)=>e.reduce(((e,s)=>({...e,[s]:{...a[s],status:t}})),{...a}),l=(e=i,t)=>{switch(t.type){case s.k.GetTranslatedReviews:return t.output.translatedReviews[t.payload.pageTitleId]?((e,t={},a)=>{const s=a?{}:{status:n.Translated};return Object.keys(t).reduce(((e,a)=>{if(e[a]){const i={...e[a],reviewIdToTranslatedReview:{...e[a].reviewIdToTranslatedReview,...r(t[a]).reviewIdToTranslatedReview},...s};e[a]={...i}}else e[a]=r(t[a]);return e}),{...e})})(e,t.output.translatedReviews,t.payload.isSingleReview):e;case s.k.TranslatedReviewsFailed:return t.payload.isSingleReview?((e,t,a)=>({...e,[a]:{...e[a],reviewIdToTranslatedReview:{...o(t,n.Unsuccessful,e[a].reviewIdToTranslatedReview)}}}))(e,t.payload.failedReviewIDs,t.payload.pageTitleId):((e,t)=>{var a;const s=null===(a=e[t])||void 0===a?void 0:a.reviewIdToTranslatedReview;return{...e,[t]:{status:n.Unsuccessful,reviewIdToTranslatedReview:{...o(Object.keys(s),n.Origin,s)}}}})(e,t.payload.pageTitleId);case s.k.UpdatedBatchTranslationStatus:const a=t.payload.pageTitleId;return{...e,[a]:{...e[a],status:t.payload.status}};case s.k.ChangeTranslatedReviewStatus:const{reviewIDs:i,pageTitleId:l,status:c}=t.payload;return((e,t,a,s)=>t.reduce(((e,t)=>{var i;return e[a]?e[a]={...e[a],reviewIdToTranslatedReview:{...e[a].reviewIdToTranslatedReview,[t]:{...null===(i=e[a].reviewIdToTranslatedReview)||void 0===i?void 0:i[t],status:s}}}:e[a]={reviewIdToTranslatedReview:{[t]:{status:s}}},e}),{...e}))(e,i,l,c);default:return e}}},"./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts":(e,t,a)=>{"use strict";a.d(t,{$0:()=>c,$c:()=>o,RE:()=>n,YD:()=>r,c0:()=>l});var s=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),i=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const n=e=>(0,s.s8)(e)&&e.metadata&&e.metadata.messages||[],r=e=>(0,s.s8)(e)&&e.children||[],o=e=>(0,s.Ic)(e)&&e.children||[],l=e=>{const t=(0,s.t5)(e)&&e.children||[];return(0,i.VF)(t.map((e=>(0,s.u3)(e)&&e.children||[])))},c=e=>((0,s.t5)(e)&&e.children||[]).map((e=>(0,s.u3)(e)&&e)).filter(i.yb)},"./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts":(e,t,a)=>{"use strict";a.d(t,{AI:()=>g,As:()=>E,BB:()=>F,Br:()=>A,C9:()=>T,Gg:()=>q,IB:()=>p,J2:()=>x,Li:()=>B,Lu:()=>f,MZ:()=>y,Ot:()=>D,PC:()=>z,SX:()=>_,UT:()=>k,VM:()=>$,ZA:()=>I,ZM:()=>N,a1:()=>j,aQ:()=>L,c9:()=>O,cD:()=>V,eP:()=>w,l7:()=>P,lO:()=>v,rp:()=>M,tW:()=>U,u5:()=>W});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/utils/isType.ts"),n=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=a("./src/shared/utils/utils.ts"),o=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),l=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),c=a("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts"),d=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),m=a("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts");const p=(0,s.P)([o.bS.actionBtf,o.mZ.collections,o.mZ.extras],((e,t=[],a=[])=>Array.from(new Set((0,n.VF)([...t,...a].map((e=>e.titleIds))))).reduce(((t,a)=>{const s=e[a];return s&&(t[a]=s),t}),{}))),g=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.acquisitionActions)),_=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.viewRefMarker)),h=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.playbackActions)),b=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.downloadActions)),v=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.notificationActions)),D=(0,s.P)(v,(e=>(0,m.O)(e))),E=(0,s.P)(v,(e=>(0,m.X)(e))),f=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.disneyAction)),y=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.watchPartyAction)),w=(0,s.P)(o.mZ.actionAtf,(e=>e&&e.membershipAction)),T=(0,s.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,n.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).slice(0,d.Wq).reduce(((t,a)=>{const s=e[a];if(!s||!s.playbackActions)return t;const i=(0,l.MG)(s.playbackActions);return i&&(0,u.Nw)(i.progress)?t+1:t}),0))),I=(0,s.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,n.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).reduce(((t,a)=>{const s=e[a];return t[a]=!(!s||!s.playbackActions)&&void 0!==(0,l.MG)(s.playbackActions),t}),{}))),C=(0,s.P)(g,(e=>{const t=e&&e.svodWinners;return(e=>(0,i.P)(e,"atv.wps#SubscribeActionTreeRight"))(t)?t:void 0})),N=(0,s.P)(C,(e=>e&&e.children)),S=(0,s.P)(N,(e=>e&&(0,n.VF)(e.map((e=>e.problems))))),P=(0,s.P)(S,(e=>e&&e.map((e=>e.message)))),x=(0,s.P)(C,(e=>e&&e.metadata)),k=(0,s.P)(x,(e=>e&&e.behaviour)),R=(0,s.P)(g,(e=>{return e&&(t=e.tvodWinners,(0,i.P)(t,"atv.wps#PurchaseActionTreeRight"))?e.tvodWinners:void 0;var t})),V=(0,s.P)(R,(e=>e&&e.children)),A=(0,s.P)(R,(e=>e&&e.metadata)),W=(0,s.P)(A,(e=>e&&e.messages)),L=(0,s.P)(V,(e=>e&&(0,n.VF)(e.filter((e=>!(0,r.xb)(e.displayMessages))).map((e=>e.displayMessages))))),O=(0,s.P)(g,(e=>e&&e.moreWaysToWatch)),B=(0,s.P)(g,(e=>e&&e.acceptedPreorder)),M=(0,s.P)(h,(e=>e&&e.main&&(0,l.cn)(e.main)&&e.main.metadata||void 0)),U=(0,s.P)(h,(e=>e&&e.main&&(0,l.cn)(e.main)&&e.main.children||void 0)),j=(0,s.P)(U,(e=>e&&e[0]||void 0)),F=(0,s.P)([o.bS.self,j],((e,t)=>({playbackActionData:t,self:t&&e[t.playbackID]}))),H=(0,s.P)(b,(e=>e&&e.main&&(0,c.mH)(e.main)&&e.main.children||void 0)),z=(0,s.P)(H,(e=>e&&e[0])),$=(0,s.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,n.VF)(t.map((e=>"episodes"===e.collectionType?e.titleIds:[]))).filter((t=>{var a,s;return t&&(null===(a=e[t])||void 0===a||null===(s=a.downloadActions)||void 0===s?void 0:s.main)})))),q=(0,s.P)([o.bS.actionBtf,$],((e,t)=>null==t?void 0:t.map((t=>{var a,s;return t&&(null===(a=e[t])||void 0===a||null===(s=a.downloadActions)||void 0===s?void 0:s.main)||void 0})).map((e=>e&&(0,c.mH)(e)&&e.children&&e.children[0]||void 0)).filter((e=>e))))},"./src/widgets/DVWebNodeDetail/selectors/autoplayHero.ts":(e,t,a)=>{"use strict";a.d(t,{v:()=>n});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const n=(0,s.P)(i.mZ.autoplayHero,(e=>{if(!e||0===Object.keys(e.mediaFiles).length)return;const{mediaFiles:t,draperTrackingEvents:a,textMap:s,isTrailerAutoplayEnabled:i}=e,n=void 0===i||i,r=Object.entries(t).map((([e,t])=>({bitrate:parseInt(e,10),file:t}))).filter((({bitrate:e})=>Boolean(e))).sort(((e,t)=>e.bitrate-t.bitrate));let o;if(window.navigator&&window.navigator.connection&&window.navigator.connection.downlink){const e=r.filter((({bitrate:e})=>e<1024*window.navigator.connection.downlink*.5));o=e.length>0?e[e.length-1].file:void 0}else o=r[Math.floor((r.length-1)/2)].file;return void 0===o?void 0:{mediaFile:o,draperTrackingEvents:a,textMap:s,isTrailerAutoplayEnabled:n}}))},"./src/widgets/DVWebNodeDetail/selectors/basicState.ts":(e,t,a)=>{"use strict";a.d(t,{bS:()=>r,mZ:()=>l});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),n=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts");const r={context:e=>e.requestContext,features:e=>e.features,pageTitleId:e=>e.pageTitleId,bundleCarousel:e=>e.bundleCarousel,collections:e=>e.collections,carousel:e=>e.carousel,extras:e=>e.extras,pageLink:e=>e.pageLink,actionAtf:e=>e.action[i.t1],actionBtf:e=>e.action[i.L5],seasons:e=>e.seasons,buyboxTitleId:e=>e.buyboxTitleId,crowBanner:e=>e.banner.crow,creative:e=>e.creative,headerDetail:e=>e.detail[n.B6],moreDetails:e=>e.detail[n.k5],detail:e=>e.detail[n.Xt],self:e=>e.self,imdb:e=>e.imdb,notification:e=>e.notification,refund:e=>e.refund.fragments,refunding:e=>e.refund.refunding,restriction:e=>e.restriction,trailer:e=>e.trailer,watchlist:e=>e.watchlist,hoverWatchlist:e=>e.hoverWatchlist,purchase:e=>e.purchase,pageContext:e=>e.pageContext,bottomBar:e=>e.bottomBar,exploreTabContent:e=>e.exploreTabContent,devices:e=>e.devices,otherFormats:e=>e.otherFormats,castAndCrew:e=>e.castAndCrew,player:e=>e.player,atfTapsExperimentToken:e=>e.tapsExperimentToken[e.pageTitleId],autoplayHero:e=>e.autoplayHero,reviews:e=>e.reviews,translatedReviews:e=>e.translatedReviews,comingSoon:e=>e.comingSoon,metadata:e=>e.metadata,reviewSubmission:e=>e.reviewSubmission,widgets:e=>e.widgets,impressionAnalytics:e=>e.impressionAnalytics,shop:e=>e.shop},o=e=>(0,s.P)([r.pageTitleId,e],((e,t)=>t[e])),l={actionAtf:o(r.actionAtf),collections:o(r.collections),extras:o(r.extras),seasons:o(r.seasons),bundleCarousel:o(r.bundleCarousel),buyboxTitleId:o(r.buyboxTitleId),creative:o(r.creative),headerDetail:o(r.headerDetail),moreDetails:o(r.moreDetails),self:o(r.self),imdb:o(r.imdb),notification:o(r.notification),refund:o(r.refund),restriction:o(r.restriction),trailer:o(r.trailer),watchlist:o(r.watchlist),crowBanner:o(r.crowBanner),otherFormats:o(r.otherFormats),castAndCrew:o(r.castAndCrew),autoplayHero:o(r.autoplayHero),comingSoon:o(r.comingSoon),reviews:o(r.reviews),translatedReviews:o(r.translatedReviews),metadata:o(r.metadata),reviewSubmission:o(r.reviewSubmission),widgets:o(r.widgets),shop:o(r.shop)}},"./src/widgets/DVWebNodeDetail/selectors/carousel.ts":(e,t,a)=>{"use strict";a.d(t,{b:()=>r,i:()=>o});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/collections.ts");const r=(0,s.P)(i.bS.pageTitleId,i.bS.carousel,((e,t)=>(0,n.KN)(t[e]))),o=(0,s.P)(r,(e=>Boolean(null==e?void 0:e.length)))},"./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts":(e,t,a)=>{"use strict";a.d(t,{s:()=>n});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const n=(0,s.P)(i.mZ.castAndCrew,(e=>Boolean(e&&e.castAndCrews.length>0)))},"./src/widgets/DVWebNodeDetail/selectors/collections.ts":(e,t,a)=>{"use strict";a.d(t,{KN:()=>o,gy:()=>c,ic:()=>r,s6:()=>l});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx"),n=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const r=(0,s.P)(n.bS.pageTitleId,n.bS.collections,((e,t)=>o(t[e]))),o=e=>e?e.map((({collectionType:e,titleIds:t,header:a,totalCardSize:s,impressionData:n},r)=>{const o=(e||"").toLowerCase();return(0,i.gK)(o)&&0!==(t||[]).length?{header:a,collectionType:o,totalEpisodeSize:s||0,cardTitleIds:t,index:r,impressionData:n}:null})).filter(Boolean):[],l=(0,s.P)(r,(e=>e&&e.map((e=>e&&e.collectionType&&(0,i.or)(e.collectionType)?e:null)).filter(Boolean))),c=(0,s.P)(l,(e=>Boolean(e&&e.length>0)))},"./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts":(e,t,a)=>{"use strict";a.d(t,{bn:()=>k,bS:()=>N,Q$:()=>L,DG:()=>S,Uc:()=>V,K:()=>E,J3:()=>C,A$:()=>x,KL:()=>A,V0:()=>W,QH:()=>P});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const n=(0,s.P)(i.mZ.notification,(e=>e&&e.warnings)),r=(0,s.P)(i.mZ.notification,(e=>e&&e.alerts));var o=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),l=a("./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts"),c=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),d=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts"),m=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts"),p=a("./src/widgets/DVWebNodeDetail/selectors/player.ts"),g=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),_=a("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts");const h=(0,s.P)([o.l7,o.aQ,o.u5,o.Li],((e,t,a,s)=>({subProblemMessages:e,offerMessages:t,topLevelTvodMessages:a,acceptedPreorder:s}))),b=(0,s.P)(o.ZM,(e=>e&&e.map((e=>e.message&&{text:(0,m.bJ)(e.message),logo:e.image,channelLogoURL:e.channelLink})).filter(Boolean)||[])),v=(0,s.P)(o.J2,(e=>e&&e.label&&{text:(0,m.bJ)(e.label),logo:e.imageLink}||void 0)),D=(0,s.P)(o.lO,(e=>e&&e.map((e=>({text:(0,m.bJ)(e.header),logo:e.logo}))).filter(Boolean)||[])),E=(0,s.P)(o.lO,(e=>({messages:(e||[]).reduce(((e,t)=>{const a=(0,m.bJ)(t.message);return t.severity&&!["CRITICAL","ERROR"].includes(t.severity)||!a.string||e.some((e=>e.string===a.string))||e.push(a),e}),[])}))),f=(0,s.P)([o.tW,o.rp],((e,t)=>{const a=t&&t.imageLink,s=t&&t.messages&&t.messages[0]&&t.messages[0].string,i=e&&e.filter((e=>"FREE"===e.entitlementType))||[];return s&&0===i.length&&a&&{text:(0,m.bJ)(s),logo:a}||void 0})),y=(0,s.P)(o.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&e.heading&&e.logo&&{text:(0,m.bJ)(e.heading),logo:e.logo,channelLogoURL:e.channelLink})).filter(Boolean)||void 0)),w=(0,s.P)([b,D,y,f,v,o.UT],((e,t,a,s,i,n)=>[...a||[],s,...t,...n&&"Collapsed"===n?[]:[i,...e]].filter((e=>Boolean(e&&e.text.string))))),T=(0,s.P)([o.tW,o.rp],((e,t)=>{const a=t&&t.imageLink,s=t&&t.messages;return 0===(e&&e.filter((e=>"FREE"===e.entitlementType))||[]).length&&!a&&s||void 0})),I=(0,s.P)(o.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&!e.logo&&e.heading&&(0,m.e6)(e.heading))).filter(Boolean)||void 0)),C=(0,s.P)([h,o.Ot,o.As,n,w,i.mZ.restriction,T,I,r,i.mZ.headerDetail],((e,t,a,s,i,n,r,o,l,c)=>{const d=l&&l.filter((e=>"Default"===e.notificationType)).map((e=>(0,m.e6)(e.message))),u=c&&!(0,g.Z4)(c.entityType)&&l&&l.filter((e=>"ComingSoon"===e.notificationType)).map((e=>(0,m.e6)(e.message)))||[],p=a.length>0?a:u,_=[...e.offerMessages||[],...r||[],...o||[],...d||[]].filter(Boolean);return{notificationWarnings:[...(s||[]).map((e=>(0,m.e6)(e.message))),...t],subProblemMessages:e.subProblemMessages,messagesWithLogo:i,infoAlertMessages:_,topLevelTvodMessages:e.topLevelTvodMessages,comingLeavingSoonMessages:p,acceptedPreorder:e.acceptedPreorder,maturityLockText:n&&n.maturityLockText}})),N=((0,s.P)([d.c9,i.bS.pageTitleId,p.UH,o.a1,d.fE],((e,t,a,s,i)=>s&&{playbackData:s,sessionId:e,pageTitleId:t,playerConfigData:a,isRetail:i&&(0,u.o)(i)}||void 0)),(0,s.P)([o.PC,i.bS.self,o.VM,o.Gg,l.CK],((e,t,a,s,i)=>{const n=t&&e&&t[e.titleID],r=(0,_.Tg)(e,s);return e&&{episodeIds:a,seasonNumber:i,label:e.label,downloadURL:e.downloadURL,fallbackURL:e.fallbackURL,titleID:e.titleID,episodeNumber:n&&"episode"===n.titleType.toLocaleLowerCase()?n.sequenceNumber:void 0,refMarker:e.refMarker,titlesRentalMetadata:r}}))),S=(0,s.P)([d.c9,i.bS.pageTitleId,c.Rp,p.UH,c.gK,i.bS.self,o.tW,d.fE],((e,t,a,s,i,n,r,o)=>r&&r.length>0&&{playbackDataList:r.map((e=>({playbackActionData:e,self:e&&n[e.playbackID]}))),sessionId:e,pageTitleId:t,isRetail:o&&(0,u.o)(o),playerConfigData:s,isOfferClarityEnabled:a,isMShop:i}||void 0)),P=(0,s.P)([d.c9,i.bS.pageTitleId,p.UH,i.mZ.trailer],((e,t,a,s)=>s&&{playbackData:s,playerConfigData:a,sessionId:e,pageTitleId:t}||void 0)),x=(0,s.P)([o.AI,i.mZ.buyboxTitleId],((e,t)=>e&&{acquisitionActions:e,titleId:t,forceDoubleHeight:!0})),k=(0,s.P)(o.Lu,(e=>e&&{message:e.message,returnLink:e.returnLink})),R=(0,s.P)(o.c9,(e=>!!e&&Boolean((e.children||[]).length>0))),V=(0,s.P)([R,o.c9,i.mZ.buyboxTitleId],((e,t,a)=>({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:a}))),A=(0,s.P)([c.Tr,d.Iz,i.bS.pageTitleId,o.c9,o.cD],((e,t,a,s,i)=>({isRedeemAndPromoRestricted:e,requestContext:t,titleID:a,moreWaysToWatch:s,hasTvodWinnerOffer:Boolean(i&&i.length>0)}))),W=(0,s.P)([o.J2,o.Br],((e,t)=>({messages:[...e&&e.secondaryMessages||[],...t&&t.secondaryMessages||[]]}))),L=(0,s.P)(i.mZ.headerDetail,(e=>e&&e.duration||void 0))},"./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts":(e,t,a)=>{"use strict";a.d(t,{A2:()=>r,CK:()=>d,NE:()=>l,S6:()=>c,X0:()=>o});var s=a("./src/util/utils/titleType.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const r=(0,i.P)(n.mZ.headerDetail,(e=>e&&e.images)),o=(0,i.P)(n.mZ.headerDetail,(e=>e&&e.liveState)),l=(0,i.P)(n.mZ.headerDetail,(e=>(0,s.ee)(e&&e.titleType))),c=(0,i.P)(l,(e=>e?"Movie":"TVSeason")),d=(0,i.P)(n.mZ.headerDetail,(e=>e&&e.seasonNumber))},"./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts":(e,t,a)=>{"use strict";a.d(t,{BK:()=>o,_6:()=>r,yl:()=>n});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const n=(0,s.P)(i.mZ.metadata,(e=>null==e?void 0:e.chartPosition)),r=(0,s.P)(i.mZ.metadata,(e=>null==e?void 0:e.contentDescriptors)),o=(0,s.P)(i.mZ.metadata,(e=>null==e?void 0:e.maturityRating))},"./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts":(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const n=(0,s.P)(i.mZ.otherFormats,(e=>Boolean(e&&e.actions&&e.actions.length)))},"./src/widgets/DVWebNodeDetail/selectors/pageContext.ts":(e,t,a)=>{"use strict";a.d(t,{Fk:()=>w,G_:()=>c,HV:()=>y,Hu:()=>l,Io:()=>r,Kv:()=>v,Rp:()=>b,Tr:()=>o,VL:()=>E,_n:()=>u,gK:()=>d,h8:()=>T,hu:()=>g,iP:()=>h,lK:()=>p,nV:()=>f,op:()=>m,xu:()=>D});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),n=a("./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts");const r=(0,s.P)([i.bS.pageContext],(e=>e.isCerberusChild)),o=(0,s.P)(i.bS.pageContext,(e=>{const t=e.purchaseRestricted;return"boolean"==typeof t?t:Boolean("MShop"===e.app&&("IOS"===e.os||"MacOS"===e.os||"Android"===e.os))})),l=(0,s.P)(i.bS.pageContext,(e=>(0,n.t)(e))),c=(0,s.P)(i.bS.pageContext,(e=>(0,n.$)(e))),d=(0,s.P)(i.bS.pageContext,(e=>"MShop"===e.app)),u=((0,s.P)(i.bS.pageContext,(e=>"InternetExplorer"===e.app)),(0,s.P)(i.bS.pageContext,(e=>"Safari"===e.app))),m=((0,s.P)(i.bS.pageContext,(e=>e.subPageType)),(0,s.P)(i.bS.pageContext,(e=>e.features))),p=(0,s.P)(i.bS.pageContext,(e=>"Event"===e.subPageType)),g=(0,s.P)(i.bS.pageContext,(e=>"Event"!==e.subPageType)),_=(e,t="true")=>(0,s.P)(i.bS.pageContext,(a=>h(a.features,e,t))),h=(e,t,a="true")=>Boolean(e)&&e[t]===a,b=_("offerClarityEnabled"),v=_("isReviewsTranslationEnabled"),D=_("isFirestormReviewsEnabled"),E=_("activateAutoPlayingInHovers"),f=_("isReviewsSubmissionEnabled"),y=_("isDownloadUpsellEnabled"),w=_("disableStickyBtfTab"),T=(_("isDCSAnalyticsCallEnabled"),_("isDCSAnalyticsCallEnabled"))},"./src/widgets/DVWebNodeDetail/selectors/player.ts":(e,t,a)=>{"use strict";a.d(t,{E5:()=>h,IR:()=>v,KO:()=>u,KQ:()=>b,UH:()=>p});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),n=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),r=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),o=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=a("./src/widgets/DVWebNodeDetail/selectors/shared.ts"),c=a("./src/util/utils/titleType.ts"),d=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts");const u="atv_dp_watch_trailer";let m;!function(e){e.feature="Feature",e.trailer="Trailer"}(m||(m={}));const p=(0,s.P)([i.bS.context,i.bS.pageContext,l.Ng],(({sessionID:e,marketplaceID:t,customerID:a,locale:s,deviceID:i,isInternal:n},r,o)=>{let l;return l=o?"Live":"Android"===r.os?"MShop"===r.app?"DetailAndroidMShop":"DetailAndroid":"Detail",{sessionId:e,marketplaceId:t,customerId:a,locale:s,playerBeta:!1,useDefaultView:!0,pageType:l,deviceId:i,isInternal:n}})),g=(0,s.P)([i.bS.self,r.a1],((e,t)=>{var a,s,i;return t?{playbackUrl:t.playbackURL,signInUrl:t.signInURL,contentConfig:{asin:t.playbackID,trailer:!1,position:t.resumeTime||0,ref:t.playerRefMarker,videoType:t.videoMaterialType,playbackEnvelope:(0,d.D)(t)},sequenceNumber:null===(a=e[t.playbackID])||void 0===a?void 0:a.sequenceNumber,isBonus:(0,c.Hv)(null===(s=e[t.playbackID])||void 0===s?void 0:s.titleType,null===(i=e[t.playbackID])||void 0===i?void 0:i.sequenceNumber)}:void 0})),_=(0,s.P)([i.mZ.trailer],(e=>e?{playbackUrl:e.playbackURL,signInUrl:e.signInURL,contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:u,videoType:e.videoMaterialType}}:void 0)),h=(0,s.P)([o.$s,g,_,i.mZ.restriction],((e,t,a,s)=>{if(s&&s.blockedPageModel)return;const i=e.autoplay&&e.autoplay[0],n="trailer"===i?a:"1"===i?t:void 0;return n&&e.t&&(n.contentConfig.position=parseInt(e.t[0],10)||0),n})),b=(0,s.P)([i.bS.pageContext,g,_],((e,t,a)=>{const s="EMBEDDED"===e.playbackLaunchType&&t||"EMBEDDED"===e.playbackTrailerLaunchType&&a;return s&&!s.signInUrl?s.contentConfig:void 0})),v=(0,s.P)([i.bS.pageTitleId,i.mZ.actionAtf,r.IB],((e,t,a)=>{const s={};return Object.entries({[e]:t,...a}).filter((([,e])=>Boolean(e))).forEach((([e,t])=>{const{playbackActions:a}=t,i=(0,n.fi)(a);i&&i.forEach((t=>{s[t]=e}))})),s}))},"./src/widgets/DVWebNodeDetail/selectors/productDetails.ts":(e,t,a)=>{"use strict";a.d(t,{W:()=>o,_:()=>l});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),r=a("./src/util/utils/marketplace.ts");const o=(0,s.P)([n.T_,i.mZ.moreDetails],((e,t)=>Boolean(e&&t)||Boolean(t&&t.ratingBadge))),l=(0,s.P)([i.bS.context],(e=>e.marketplaceID===r.HZ.UK))},"./src/widgets/DVWebNodeDetail/selectors/purchase.ts":(e,t,a)=>{"use strict";a.d(t,{G:()=>u,n:()=>d});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),o=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts");const l=e=>(0,n.c0)(e&&e.moreWaysToWatch).filter(r.E2),c=e=>(0,n.YD)(e&&e.tvodWinners).filter(r.E2),d=(0,s.P)([i.bS.pageTitleId,i.mZ.actionAtf,i.bS.self,o.IB],((e,t,a,s)=>{const i={},n=e=>{Object.entries(e).forEach((([e,t])=>{if(!t)return;const s=a[e],n=s?s.gti:void 0,{acquisitionActions:r}=t;[...c(r),...l(r)].forEach((t=>{i[t.offerToken]={canonicalId:e,offer:t,gti:n}}))}))};return n({[e]:t}),n(s),i})),u=(0,s.P)([d,i.bS.purchase],((e,t)=>t&&{...t,details:e[t.offerToken]}))},"./src/widgets/DVWebNodeDetail/selectors/requestContext.ts":(e,t,a)=>{"use strict";a.d(t,{$s:()=>h,C2:()=>v,Iz:()=>f,T_:()=>D,c9:()=>c,fE:()=>l,vD:()=>E});var s=a("./src/util/api/util.ts"),i=a("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),o=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const l=(0,n.P)(o.bS.context,(e=>e.domain||"Fogg")),c=(0,n.P)(o.bS.context,(e=>e.sessionID)),d=(0,n.P)(o.bS.context,(e=>e.requestID)),u=(0,n.P)(o.bS.context,(e=>e.customerID)),m=(0,n.P)(o.bS.context,(e=>e.appName)),p=(0,n.P)(o.bS.context,(e=>e.locale||"en_US")),g=(0,n.P)(p,(e=>e.replace("_","-"))),_=(0,n.P)(o.bS.context,(e=>(0,s.aP)(e.isInternal||"0"))),h=(0,n.P)(o.bS.context,(e=>"object"==typeof e?e.queryParameters:{})),b=(0,n.P)(o.bS.context,(e=>e.originalURI||"")),v=(0,n.P)(o.bS.context,(e=>e.marketplaceID)),D=(0,n.P)(l,(e=>(0,i.o)(e))),E=(0,n.P)([D,b,h],((e,t,a)=>(s,i)=>(0,r.bf)(s,{urlData:{isRetail:e,originalURI:t,parameters:a},...i}))),f=(0,n.P)([o.bS.context,D,b,h,_,c,d,g,E,u,m],((e,t,a,s,i,n,r,o,l,c,d)=>({rawContext:e,isRetail:t,originalURI:a,queryParameters:s,isInternal:i,makeUrl:l,sessionID:n,isRecognizedCustomer:Boolean(c),requestID:r,locale:o,appName:d})))},"./src/widgets/DVWebNodeDetail/selectors/reviews.ts":(e,t,a)=>{"use strict";a.d(t,{G:()=>l,M:()=>o});var s=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const o=(0,s.P)([r.xu,i.T_,r.Io,r.lK,n.mZ.comingSoon],((e,t,a,s,i)=>(t||e)&&!Boolean(i)&&!a&&!s)),l=(0,s.P)([r.hu,n.mZ.reviewSubmission],((e,t)=>e&&void 0!==(null==t?void 0:t.isEligible)&&!t.isEligible))},"./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts":(e,t,a)=>{"use strict";a.d(t,{P:()=>s});const s=a("./node_modules/reselect/es/index.js").P1},"./src/widgets/DVWebNodeDetail/selectors/shared.ts":(e,t,a)=>{"use strict";a.d(t,{Ng:()=>l,V$:()=>c,be:()=>o,k7:()=>d});var s=a("./src/util/utils/titleType.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts");const o=(0,i.P)(n.mZ.headerDetail,r.xw),l=(0,i.P)(n.mZ.self,(e=>Boolean(e&&(0,s.g2)(e.titleType)))),c=(0,i.P)(n.mZ.moreDetails,(e=>(0,r.Z4)(e&&e.entityType))),d=(0,i.P)([n.mZ.moreDetails,n.mZ.headerDetail],((e,t)=>Boolean(e&&Boolean(e.explorePanelURL)||t&&Boolean(t.explorePanelURL))))},"./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx":(e,t,a)=>{"use strict";a.d(t,{_:()=>n});var s=a("./node_modules/react/index.js");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class n extends s.Component{constructor(...e){super(...e),i(this,"elRef",s.createRef()),i(this,"timer",void 0)}getSnapshotBeforeUpdate(){const e=this.elRef.current;if(!e)return null;return{currentHeight:e.clientHeight}}componentDidUpdate(e,t,a){const s=a&&a.currentHeight,i=this.elRef.current;if(!i)return;i.removeAttribute("style");const n=i.clientHeight;if(n===s)return;const r=150+1.5*Math.abs(n-s);((e,t)=>{const a=Object.keys(t).reduce(((e,a)=>`${e} ${a}: ${t[a]};`),"");e.setAttribute("style",a)})(i,{height:`${s}px`,overflow:"hidden",transition:`height ${r}ms ease-out`}),setTimeout((()=>{i.style.height=`${n}px`}),1),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{i.removeAttribute("style")}),r)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){return s.createElement("div",{className:this.props.className,ref:this.elRef},this.props.children)}}},"./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx":(e,t,a)=>{"use strict";a.d(t,{_:()=>l});var s=a("./node_modules/react/index.js"),i=a("./src/shared/utils/analytics/recordReftag.tsx"),n=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),r=a("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},o.apply(this,arguments)}const l=e=>{const{clickStreamPageType:t,clickStreamSubPageType:a,refTagTitleId:l,features:c}=s.useContext(n.h),d=(0,r.iP)(c,"isDCSAnalyticsCallEnabled");return s.createElement(i.Jd,o({},e,{pageType:t,subPageType:a,titleId:l,isDCSAnalyticsCallEnabled:d}))}},"./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts":(e,t,a)=>{"use strict";a.d(t,{O:()=>i,X:()=>n});var s=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");const i=e=>(e||[]).filter((({severity:e,messageSource:t})=>"RELEVANT"===e&&"ACCESS_CHANGE"!==t&&"LEAVING_SOON"!==t)).map((e=>(0,s.bJ)(e.message))),n=e=>(e||[]).filter((({severity:e,messageSource:t})=>"RELEVANT"===e&&("ACCESS_CHANGE"===t||"LEAVING_SOON"===t))).map((e=>(0,s.bJ)(e.message)))},"./src/widgets/DVWebNodeDetail/utils/actionForm.tsx":(e,t,a)=>{"use strict";a.d(t,{y:()=>n});var s=a("./node_modules/react/index.js");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},i.apply(this,arguments)}const n=({hiddenInputs:e={},method:t="POST",children:a,...n})=>s.createElement("form",i({},n,{method:t}),a,Object.keys(e).map((t=>s.createElement("input",{key:t,type:"hidden",name:t,value:e[t]}))))},"./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx":(e,t,a)=>{"use strict";a.d(t,{x:()=>n});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/DropList.js");const n=e=>{const t=e.links&&e.links.map((t=>({...t,onClick:a=>{const s=document.getElementById(`av-droplist-${e.customDropListID}`);s&&s.checked&&(s.checked=!1),t.onClick(a)}}))),a={...e,links:t};return s.createElement(i.DropList,a)}},"./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx":(e,t,a)=>{"use strict";a.d(t,{j:()=>o,y:()=>l});var s=a("./node_modules/react/index.js"),i=a("./node_modules/@amzn/dvui/dist/Text.js"),n=a("./src/shared/utils/utils.ts"),r=a("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const o=({Tag:e,className:t,message:a})=>a?s.createElement(e,{className:t},s.createElement(i.Text,{className:r.Z.enablePointerEvents,string:a})):null,l=({Tag:e,messages:t,className:a})=>(0,n.xb)(t)?null:s.createElement(s.Fragment,null,t.map(((t,i)=>s.createElement(o,{Tag:e,message:t,className:a,key:`conditional-text-${i}`}))))},"./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts":(e,t,a)=>{"use strict";a.d(t,{$:()=>i,t:()=>s});const s=e=>Boolean("Phone"===(null==e?void 0:e.formFactor)),i=e=>Boolean("Desktop"!==(null==e?void 0:e.formFactor))},"./src/widgets/DVWebNodeDetail/utils/domainUtils.ts":(e,t,a)=>{"use strict";a.d(t,{V:()=>i,o:()=>s});const s=e=>"Retail"===e,i=e=>s(e)?"retail-web-episode-list":"global-web-episode-list"},"./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts":(e,t,a)=>{"use strict";a.d(t,{Lu:()=>n,Tg:()=>r,mH:()=>i});var s=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const i=e=>(0,s.P)(e,"atv.wps#DownloadActionTreeRight"),n=e=>{const t=(e=>e&&e.main&&i(e.main)&&e.main)(e);return t&&t.children&&t.children[0]||void 0},r=(e,t)=>{const a={};return e&&(a[e.titleID]={entitlementType:e.entitlementType,isRentalClockStarted:e.isRentalClockStarted,rentalTermHoursToStart:e.rentalTermHoursToStart,rentalTermHoursToPlaybackDuration:e.rentalTermHoursToPlaybackDuration}),null==t||t.forEach((e=>{a[e.titleID]={entitlementType:e.entitlementType,isRentalClockStarted:e.isRentalClockStarted,rentalTermHoursToStart:e.rentalTermHoursToStart,rentalTermHoursToPlaybackDuration:e.rentalTermHoursToPlaybackDuration}})),a}},"./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts":(e,t,a)=>{"use strict";a.d(t,{N:()=>i,h:()=>s});const s=a("./node_modules/react/index.js").createContext({}),i=(e,t)=>{var a;return null!=t&&t.asins&&(null==t||null===(a=t.asins)||void 0===a?void 0:a.length)>0?t.asins[0]:e}},"./src/widgets/DVWebNodeDetail/utils/entityTypes.ts":(e,t,a)=>{"use strict";a.d(t,{Z4:()=>l,xw:()=>c});const s="Live Event Default UX",i="Live Sporting Event UX 1",n="Live Sporting Event UX 2",r="Live Sporting Event UX 3",o="EVENT",l=e=>!!e&&[s,i,n,r,o].includes(e),c=e=>Boolean(e&&"TV Show"==e.entityType)},"./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts":(e,t,a)=>{"use strict";a.d(t,{E2:()=>c,Ic:()=>n,bd:()=>l,ok:()=>d,s8:()=>i,t5:()=>r,u3:()=>o});var s=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const i=e=>(0,s.P)(e,"atv.wps#PurchaseActionTreeRight"),n=e=>(0,s.P)(e,"atv.wps#SubscribeActionTreeRight"),r=e=>(0,s.P)(e,"atv.wps#AcquisitionActionTreeLeft"),o=e=>(0,s.P)(e,"atv.wps#AcquisitionActionTreeRight"),l=e=>(0,s.P)(e,"atv.wps#TvodAction"),c=e=>l(e)||(e=>(0,s.P)(e,"atv.wps#PreorderAction"))(e),d=e=>(0,s.P)(e,"atv.wps#SubscribeAction")||Boolean(e&&"SUBSCRIPTION"===e.sType)},"./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts":(e,t,a)=>{"use strict";a.d(t,{Nw:()=>n,_y:()=>s,fZ:()=>i});const s=e=>e?Math.round(100*e):0,i=(e,t,a)=>{const s=e&&e[t];if(!s)return 0;const i=s.ResumeTime;return(0===i?100:a&&i>0?100*i/(1e3*a):0)||0},n=e=>1===e},"./src/widgets/DVWebNodeDetail/utils/isType.ts":(e,t,a)=>{"use strict";function s(e,t){return Boolean(e&&e.__type===t)}a.d(t,{P:()=>s})},"./src/widgets/DVWebNodeDetail/utils/liveState.ts":(e,t,a)=>{"use strict";a.d(t,{Zz:()=>l,dn:()=>o});const s="cancelled",i="delayed",n="suspended",r="postponed",o=e=>!!e&&[s,i,n,r].includes(e.toLowerCase()),l=e=>e&&Boolean("upcoming"===e.toLowerCase())},"./src/widgets/DVWebNodeDetail/utils/numberUtils.ts":(e,t,a)=>{"use strict";a.d(t,{d:()=>s});const s=(e,t)=>Math.round(e*t)/t},"./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts":(e,t,a)=>{"use strict";a.d(t,{D8:()=>l,MG:()=>r,cn:()=>i,fi:()=>o});var s=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const i=e=>(0,s.P)(e,"atv.wps#PlaybackActionTreeRight"),n=e=>null!=e&&e.main&&i(e.main)?e.main:void 0,r=e=>{const t=n(e);return(null==t?void 0:t.children)&&t.children[0]||void 0},o=e=>{const t=n(e);return(null==t?void 0:t.children)&&t.children.map((e=>e.playbackID))||void 0},l=e=>{const t=n(e);return(null==t?void 0:t.metadata)&&t.metadata.secondaryMessages||void 0}},"./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>s});const s=e=>null!=e&&e.playbackEnvelope?{envelope:e.playbackEnvelope,correlationId:e.correlationId,expiration:e.expiryTime}:void 0},"./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts":(e,t,a)=>{"use strict";a.d(t,{j9:()=>i,jF:()=>o,nn:()=>n,ws:()=>r});var s=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const i=e=>(0,s.P)(e,"atv.wps#AmazonMaturityRatingBadge"),n=e=>(0,s.P)(e,"atv.wps#RegulatoryRatingBadge"),r=e=>(0,s.P)(e,"atv.wps#LocalRatingBadge"),o=e=>"all"!==e.id},"./src/widgets/DVWebNodeDetail/utils/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var s=a("./src/widgets/DVWebNodeDetail/actions/constants.ts");const i=(e,t,a,i=((e,t)=>({...t,...e})))=>(n=t,r)=>{switch(r.type){case s.k.STORE_MERGE:return e(r.payload)?i(e(r.payload),n):n;case s.k.CHANGE_PAGE:return e(r.payload)||t;default:return a?a(n,r):n}}},"./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>r});var s=a("./src/util/api/WPSClient.ts"),i=a("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),n=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const r=async({context:e,api:t,operation:a,stringBundle:r,logger:o,shouldFetchStarlightContent:l=!1,degradationsReporter:c})=>{const d=new s.e(t);let u;if(void 0!==r){(0,i.xU)(e,r);u=()=>d.GetStrings((0,i.xU)(e,r)).then((e=>e.results))}else u=()=>Promise.resolve(void 0);const[m,p]=await Promise.all([u(),a(d)]);let g;if(l){var _,h;const e=p,t=null==e?void 0:e.widgets,a=null==t||null===(_=t.productDetails)||void 0===_?void 0:_.detail,s="true"===(null==t||null===(h=t.pageContext)||void 0===h?void 0:h.features.disableExploreTab),i=null==a?void 0:a.explorePanelURL;g=Boolean(i&&!s)?await(async e=>{const t=(new Date).getTime(),a=await fetch(e,{method:"GET"}).then((async e=>({staticPageContent:await e.text()}))).catch((e=>{const t=`${n.EZ}::Starlight::Fetch::Failed`;null==o||o.error(e).count(t,1,!1),null==c||c.reportDegradation({level:"Degraded",scope:"StarlightExplore"})})),s=(new Date).getTime()-t,i=`Starlight Fetch took ${s} MS`,r=`${n.EZ}::Starlight::Fetch::Latency`;return null==o||o.info(i).count(r,s,!1),a})(i):void 0}return{operationResponse:p,stringMap:m,stringBundle:r,starlightResponse:g}}},"./src/widgets/DVWebNodeDetail/utils/stringUtils.ts":(e,t,a)=>{"use strict";a.d(t,{bJ:()=>r,e6:()=>n,q1:()=>o,qY:()=>i});var s=a("./src/util/utils/strings.ts");const i=(e,t,a)=>{let i=0;return(n,r)=>{const o=e[n];return o?(0,s.VJ)(o,r,t):(0===i&&t.error(`Missing string ${n}`),i+=1,a.isInternal?`MISSING STRING ${n}`:"")}},n=(e,t={})=>({string:e,attrs:t}),r=e=>"string"==typeof e?n(e.trim()):e,o=(e,t="_")=>e.map((e=>void 0===e?t:e)).join("|")},"./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx":(e,t,a)=>{"use strict";a.d(t,{Y:()=>l});var s=a("./node_modules/react/index.js"),i=a("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),n=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),r=a("./node_modules/react-redux/es/index.js");const o=(0,n.n)((0,r.$j)((e=>({requestContext:(0,i.Iz)(e)})))((({requestContext:{isInternal:e},logger:t,error:a,children:i})=>(t.error(a),e?s.createElement("p",null,a.stack):s.createElement(s.Fragment,null,i))))),l=(e,t)=>function(a){try{return e(a)}catch(e){return s.createElement(o,{error:e},t)}}},"./src/widgets/DVWebNodeDetail/utils/url/index.ts":(e,t,a)=>{"use strict";a.d(t,{P_:()=>u,Md:()=>c,Z$:()=>m,K1:()=>d,bf:()=>o});const s=new Set(["aivDebug","appDebug","auiDebug","avClientAddress","avCurrentTerritory","avMarketplace","avRecordTerritory","avRegion","avGeoToken","csTools","debug","experiment","forceAV","isDebug","language","pfDisableCache","pfShowFeatures","serviceDebug","inspector","stringDebug","keepSubscription","tab"]),i=new RegExp("/region/(na|eu|fe|local)"),n=(e,t)=>e.isRetail?(e=>e?"":"/gp/video")(t):(({originalURI:e})=>{const t=e&&e.match(i);return t&&t[0]||""})(e),r=(e,t)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`,o=(e,{urlData:t,get:a,refTag:i,isShortUrl:o=!1})=>{if(!t)return"";const l=n(t,o),c=((e,t={})=>{return{...(a=e,Object.keys(a).reduce(((e,t)=>s.has(t)?{...e,[t]:a[t]}:e),{})),...t};var a})(t.parameters||{},a),d=Object.keys(c).reduce(((e,t)=>{const a=c[t];if(Array.isArray(a)){const s=a.map((e=>r(t,e)));e.push(...s)}else e.push(r(t,a));return e}),[]).join("&"),u=d?`?${d}`:"",m=i?`/ref=${i}`:"";return`${l}/${(e=>e.replace(/^\//,""))(e)}${m}${u}`};var l=a("./node_modules/@amzn/dv-web-node-reftags/index.js");function c(e,t,a){return o("/auth-redirect",{urlData:e,refTag:t,get:{returnUrl:a,signin:"1"}})}const d=e=>`/detail/${e}`;function u(e,t,a){return o(d(t),{urlData:e,refTag:a})}const m=(e,t,a,s)=>{const{queryParameters:i,originalURI:n}=e,r={parameters:{...i,tab:["details"]},originalURI:n,isRetail:"Retail"===e.domain},o=u(r,t,(0,l.i)(s));return c(r,(0,l.i)(a),o)}},"./src/widgets/DVWebNodeDetail/utils/utils.ts":(e,t,a)=>{"use strict";a.d(t,{Db:()=>i,Dv:()=>u,EZ:()=>m,JQ:()=>d,VF:()=>c,bc:()=>l,e$:()=>r,w6:()=>n,yb:()=>o});var s=a("./src/shared/utils/utils.ts");const i=e=>!(0,s.xb)(e),n=(e,t)=>Array.from({length:t-e+1},((t,a)=>a+e)),r=e=>parseInt(e,10)||0,o=e=>Boolean(e),l=e=>e,c=e=>e.reduce(((e,t)=>e.concat(t)),[]),d=e=>1==e,u=e=>e&&JSON.stringify(e),m="DVWebNodeDetail"},"./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>s});var s={playback:"js-episode-playback",offers:"js-episode-offers"}},"./src/widgets/DVWebNodeDetail/utils/wps.ts":(e,t,a)=>{"use strict";a.d(t,{Bt:()=>I,Cd:()=>N,Gw:()=>R,Gy:()=>D,Hh:()=>f,P_:()=>T,Qk:()=>b,_E:()=>w,kZ:()=>P,mx:()=>A,py:()=>_,rL:()=>k,yf:()=>V});var s=a("./src/util/logger/logger.ts"),i=a("./src/util/api/WPSClient.ts"),n=a("./src/util/api/APIClient.ts"),r=a("./src/util/csm/csm.tsx"),o=a("./src/util/api/util.ts"),l=a("./src/widgets/DVWebNodeDetail/data/normalize.ts"),c=a("./src/widgets/DVWebNodeDetail/actions/index.ts"),d=a("./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts"),m=a("./src/widgets/DVWebNodeDetail/reducers/reviews.ts");let p;!function(e){e.GetDetailPage="GetDetailPage",e.GetTitles="GetTitles",e.WatchlistToggle="WatchlistToggle",e.GetYourDevicesSettingsPage="GetYourDevicesSettingsPage",e.GetTranslatedReviews="GetTranslatedReviews",e.SubmitCustomerReview="SubmitCustomerReview",e.SetPublicNameInput="SetPublicNameInput",e.DeleteCustomerReview="DeleteCustomerReview",e.FetchReviewEligibility="FetchReviewEligibility"}(p||(p={}));const g=new s.Oc("DVWebNode_detail"),_=new i.e(new n.l(g)),h=async({operation:e,input:t})=>{const a=await _.GetDetailPage(t);return(0,r.v5)(e,!0),(0,l.O7)(a,t.context)},b=(e,t)=>W({input:e,operation:p.GetDetailPage},h,t),v=async({operation:e,input:t})=>{const a=await _.GetTitles(t);return(0,r.v5)(e,!0),(0,l.cg)(a)},D=(e,t)=>W({input:e,operation:p.GetTitles},v,t),E=async({operation:e,input:t})=>{const a=await _.WatchlistToggle(t);return(0,r.v5)(e,!0),a},f=(e,t)=>W({input:e,operation:p.WatchlistToggle},E,t),y=async({operation:e,input:t},a)=>{const s=await _.GetYourDevicesSettingsPage(t,a);return(0,r.v5)(e,!0),s},w=(e,t,a,s)=>W({input:e,operation:p.GetYourDevicesSettingsPage},y,t,a,s),T=(e,t,a,s,i)=>async n=>{const r=await(0,u.D)({context:e,api:_.api,operation:n=>n.GetDetailPage((0,d.eQ)({context:e,titleID:t,isElcano:a},["Episodes","Bonus"],s,i))});n({type:c.k.STORE_MERGE,payload:{...(0,l.O7)(r.operationResponse,e)}})},I=(e,t,a,s=m.Kp)=>async i=>{const n=await _.GetReviews((0,d.b6)({context:e,titleID:t},{pageNumber:s,sortBy:a,includeReviewsSummary:!1}));i({type:c.k.STORE_MERGE,payload:{...(0,l.eq)(n,a,t)}})},C=async({operation:e,input:t})=>{const a=await _.GetTranslatedReviews((e=>({context:e.context,token:e.token,reviewsToTranslate:JSON.stringify(e.reviewsToTranslate)}))(t));return(0,r.v5)(e,!0),a},N=(e,t)=>W({input:e,operation:p.GetTranslatedReviews},C,t),S=async({operation:e,input:t})=>{const a=await _.SetPublicName(t);return(0,r.v5)(e,!0),a},P=(e,t)=>W({input:e,operation:p.SetPublicNameInput},S,t),x=async({operation:e,input:t})=>{const a=await _.SubmitCustomerReview((e=>({context:e.context,titleID:e.titleID,reviewID:e.reviewID,ratingValue:e.ratingValue,token:e.token,reviewContent:JSON.stringify(e.reviewContent)}))(t));return(0,r.v5)(e,!0),a},k=(e,t)=>W({input:e,operation:p.SubmitCustomerReview},x,t);async function R(e,t,a,s){const i={context:e,titleID:t,reviewID:a,token:s};return await _.DeleteCustomerReview(i)}async function V(e,t,a,s,i,n){const r={context:e,titleID:t,reviewID:a,interactionType:s,value:i,token:n};return await _.PostReviewInteraction(r)}const A=async(e,t,a)=>{const s={context:e,titleID:t,token:a};return await _.FetchReviewEligibility(s)},W=({input:e,operation:t},a,s,i,n)=>async(l,c)=>{const d=e=>{const t=s(e);l(t)};try{(0,r._D)(t),(0,r.NZ)(t);const s={...e,context:c().requestContext},n=await a({input:s,operation:t},i);(0,r.rm)(t,!0),(0,r.QS)(t,!0),d(n)}catch(e){e instanceof o.yM?g.info(e):g.fatal(e),d(null),"function"==typeof n&&n(e)}}},"./src/widgets/Explore/ClientImpressions/ImpressionTracker.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>d,F:()=>c});var s,i=a("./src/shared/deviceProxy/ClientsideImpressionClient.ts"),n=a("./src/util/logger/logger.ts"),r=a("./node_modules/uuid/dist/esm-browser/v4.js"),o=a("./src/util/csm/csm.tsx");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e[e.HandleIOEntries=0]="HandleIOEntries",e[e.GroupIndividualImpressions=1]="GroupIndividualImpressions",e[e.SendRequestsFromQueue=2]="SendRequestsFromQueue",e[e.__LENGTH=3]="__LENGTH"}(s||(s={}));class c{static init(e){if(c.io||(c.io=new IntersectionObserver(c.onNewIoEntries,{threshold:[.5,.6,.7,.8,.9,1]})),c.logger||(c.logger=new n.Oc("DVWebNode_ImpressionTracker")),c.timeOrigin=Date.now()-performance.now(),c.elementToElementData||(c.elementToElementData=new Map),c.currentlyInViewItems||(c.currentlyInViewItems=new Map),c.intersectionObserverEntryQueue||(c.intersectionObserverEntryQueue=[]),c.pendingIndividualImpressionRecords||(c.pendingIndividualImpressionRecords=new Map),c.groupedImpressionsQueue||(c.groupedImpressionsQueue=[]),c.unobservedElements=0,c.minCarousel=0,c.maxCarousel=0,c.attachOnIdleCallback(),c.client=new i.g(e),!c.pageLoaded){c.pageLoaded=!1;const e=()=>{c.pageLoaded=!0,window.removeEventListener("load",e)};window.addEventListener("load",e)}document.addEventListener("visibilitychange",this.onVisibilityChange),document.addEventListener("pagehide",c.onPageHide)}static observe(e,t,a){try{var s,i;if(c.io||c.init(a),null==t||!t.collectionImpressionData)return;if(!e)return void(0,o.cL)("DVWebNode::ImpressionTracker::ObserveNoElement",1,!1);null===(s=c.io)||void 0===s||s.observe(e),null===(i=c.elementToElementData)||void 0===i||i.set(e,t)}catch(e){c.logger.error(e)}}static unobserve(e){var t;e?(null===(t=c.io)||void 0===t||t.unobserve(e),c.unobservedElements++,c.elementToElementData&&c.unobservedElements!==c.elementToElementData.size||c.disconnectAll()):(0,o.cL)("DVWebNode::ImpressionTracker::UnobserveNoElement",1,!1)}static disconnectAll(){var e;null===(e=c.io)||void 0===e||e.disconnect(),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}),c.io=void 0,c.elementToElementData=void 0,c.currentlyInViewItems=void 0,c.intersectionObserverEntryQueue=void 0,c.pendingIndividualImpressionRecords=void 0,c.unobservedElements=0,document.removeEventListener("visibilitychange",this.onVisibilityChange)}static addImpressionRecord(e,t){var a,s,i;((0,o.cL)(`DVWebNode::ImpressionTracker::${e.eventType}ImpressionRecorded`,1,!1),null!==(a=c.pendingIndividualImpressionRecords)&&void 0!==a&&a.has(t))?null===(s=c.pendingIndividualImpressionRecords.get(t))||void 0===s||s.push(e):null===(i=c.pendingIndividualImpressionRecords)||void 0===i||i.set(t,[e])}static logManualImpression(e,t){var a,s;const i=null===(a=c.elementToElementData)||void 0===a?void 0:a.get(e),n=null===(s=c.currentlyInViewItems)||void 0===s?void 0:s.get(e),r=performance.now();if(!i||!i.collectionImpressionData||!n)return void(0,o.cL)("DVWebNode::ImpressionTracker::ManualImpressionsNoElement",1,!1);const l={...i,...n,eventType:t,timeToView:n.impressionStartTime,inViewTime:r-n.impressionStartTime,eventTime:c.timeOrigin+r,elementSize:`${e.scrollWidth},${e.scrollHeight}`};c.addImpressionRecord(l,i.collectionImpressionData),"Select"===t?c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}):c.attachOnIdleCallback()}}l(c,"io",void 0),l(c,"timeOrigin",void 0),l(c,"elementToElementData",void 0),l(c,"intersectionObserverEntryQueue",void 0),l(c,"pendingIndividualImpressionRecords",void 0),l(c,"groupedImpressionsQueue",void 0),l(c,"currentlyInViewItems",void 0),l(c,"idleCallbackHandle",void 0),l(c,"timeoutID",void 0),l(c,"client",void 0),l(c,"unobservedElements",void 0),l(c,"pageLoaded",void 0),l(c,"minCarousel",void 0),l(c,"maxCarousel",void 0),l(c,"logger",void 0),l(c,"onVisibilityChange",(()=>{"hidden"==document.visibilityState&&c.onPageHide()})),l(c,"onNewIoEntries",(e=>{var t;null===(t=c.intersectionObserverEntryQueue)||void 0===t||t.push(...e),c.attachOnIdleCallback()})),l(c,"idleCallbackNextStep",0),l(c,"callbackBuffer",10),l(c,"minimumImpressions",3),l(c,"onIdleCallback",((e,t=!1)=>{var a,i,n;c.clearSavedCallback();const r=()=>e.didTimeout||e.timeRemaining()>c.callbackBuffer;for(;r()&&c.idleCallbackNextStep<3;)switch(c.idleCallbackNextStep){case s.HandleIOEntries:if(c.intersectionObserverEntryQueue){for(;c.intersectionObserverEntryQueue.length>0;)c.handleIoEntryQueue();c.recalculateMinAndMax()}c.idleCallbackNextStep++;break;case s.GroupIndividualImpressions:c.groupIndividualImpressionRecords(),c.idleCallbackNextStep++;break;case s.SendRequestsFromQueue:for(;c.groupedImpressionsQueue&&c.groupedImpressionsQueue.length>0&&(c.groupedImpressionsQueue.length>=c.minimumImpressions||t)&&r();)c.sendRequestFromQueue();c.idleCallbackNextStep++}c.idleCallbackNextStep>=s.__LENGTH&&(c.idleCallbackNextStep=0),(null!==(a=c.intersectionObserverEntryQueue)&&void 0!==a&&a.length||null!==(i=c.pendingIndividualImpressionRecords)&&void 0!==i&&i.size||null!==(n=c.groupedImpressionsQueue)&&void 0!==n&&n.length)&&c.attachOnIdleCallback()})),l(c,"recalculateMinAndMax",(()=>{let e=9999,t=0;c.currentlyInViewItems&&(c.currentlyInViewItems.forEach((a=>{e=Math.min(e,a.carouselPosition),t=Math.max(t,a.carouselPosition)})),c.minCarousel=e,c.maxCarousel=t)})),l(c,"inferEventTrigger",(e=>{if(!e)return"Pageload";const t=e.carouselPosition||0;return c.pageLoaded?c.maxCarousel>=t&&t>=c.minCarousel?"Hscroll":"Vscroll":"Pageload"})),l(c,"handleIoEntryQueue",(()=>{var e,t;if(!c.currentlyInViewItems||0==(null===(e=c.intersectionObserverEntryQueue)||void 0===e?void 0:e.length))return;const a=null===(t=c.intersectionObserverEntryQueue)||void 0===t?void 0:t.shift();if(a)if(a.isIntersecting){const e=c.currentlyInViewItems.get(a.target);if(e)c.currentlyInViewItems.set(a.target,{...e,maxFractionInView:Math.max(a.intersectionRatio,e.maxFractionInView)});else{var s;const e=null===(s=c.elementToElementData)||void 0===s?void 0:s.get(a.target),t=c.inferEventTrigger(e),i=null==e?void 0:e.carouselPosition;void 0!==i?c.currentlyInViewItems.set(a.target,{impressionStartTime:a.time,maxFractionInView:a.intersectionRatio,eventTrigger:t,carouselPosition:i}):(0,o.cL)("DVWebNode::ImpressionTracker::NoCarouselPosition",1,!1)}}else{var i;const e=c.currentlyInViewItems.get(a.target),t=null===(i=c.elementToElementData)||void 0===i?void 0:i.get(a.target);if(e&&t){const s=e.impressionStartTime,i=a.time,n={...t,...e,inViewTime:i-s,timeToView:s,eventTime:c.timeOrigin+s,elementSize:`${a.target.scrollWidth},${a.target.scrollHeight}`,eventType:"View"};c.pageLoaded&&c.addImpressionRecord(n,null==t?void 0:t.collectionImpressionData),c.currentlyInViewItems.delete(a.target)}}})),l(c,"groupIndividualImpressionRecords",(()=>{var e,t;0!=(null===(e=c.pendingIndividualImpressionRecords)||void 0===e?void 0:e.size)&&(null===(t=c.pendingIndividualImpressionRecords)||void 0===t||t.forEach(((e,t,a)=>{var s;const i=[];let n=0;null==e||e.forEach(((e,t)=>{(0==t||Math.abs(e.eventTime-n/t)<2e3)&&(n+=e.eventTime,i.push(e))})),i.length==(null==e?void 0:e.length)?a.delete(t):a.set(t,e.filter((e=>!i.includes(e)))),null===(s=c.groupedImpressionsQueue)||void 0===s||s.push(i)})))})),l(c,"sendRequestFromQueue",(()=>{var e,t;let a=[];const s=null===(e=c.groupedImpressionsQueue)||void 0===e?void 0:e.length;var i;s&&s>20?(a=null===(i=c.groupedImpressionsQueue)||void 0===i?void 0:i.splice(0,20),(0,o.cL)("DVWebNode::ImpressionTracker::BatchSizeMaxed",1,!1)):(a=c.groupedImpressionsQueue,c.groupedImpressionsQueue=[]);if(a=null===(t=a)||void 0===t?void 0:t.filter((e=>e.length>0)),!a||!a[0])return void(0,o.cL)("DVWebNode::ImpressionTracker::NoGroupedImpressions",1,!1);const n={eventBatchTimestamp:Date.now(),ImpressionEntryList:a.map((e=>({items:e.map((e=>({ImpressionEntryEvent:{eventId:(0,r.Z)(),eventType:e.eventType,eventTrigger:e.eventTrigger,eventTimestamp:e.eventTime},ImpressionEntryView:{inViewTime:e.inViewTime,inViewStripe:Math.min(100*e.maxFractionInView,100),timeToView:e.timeToView},ImpressionEntryItem:{itemName:e.widgetType,itemContentId:e.titleID,itemCreativeId:c.extractCreativeIdFromImageUrl(e.imageURL),itemContentSize:e.elementSize,itemReftag:e.refMarker,itemSlotId:`${e.itemPosition+1},${e.carouselPosition+1}`},ImpressionEntryItemAnalytics:e.itemAnalytics}))),carouselAnalytics:e[0].collectionImpressionData,clientVariant:"PVWebsite"})))};c.client.logImpression(n)})),l(c,"extractCreativeIdFromImageUrl",(e=>{const t=null==e?void 0:e.match("/([a-zA-Z0-9_-]+\\.[a-zA-Z0-9,_.]*(jpe?g|png))");return t&&t.length>1?t[1]:e})),l(c,"attachOnIdleCallback",(()=>{c.idleCallbackHandle||c.timeoutID||(window.requestIdleCallback?c.idleCallbackHandle=window.requestIdleCallback(c.onIdleCallback):c.timeoutID=window.setTimeout((()=>{const e=Date.now();c.onIdleCallback({didTimeout:!1,timeRemaining:()=>e+50-Date.now()})}),2e3))})),l(c,"detatchOnIdleCallback",(()=>{window.cancelIdleCallback&&c.idleCallbackHandle?window.cancelIdleCallback(c.idleCallbackHandle):c.timeoutID&&window.clearTimeout(c.timeoutID),c.clearSavedCallback()})),l(c,"clearSavedCallback",(()=>{c.idleCallbackHandle=void 0,c.timeoutID=void 0})),l(c,"onPageHide",(()=>{var e;(0,o.cL)("DVWebNode::ImpressionTracker::OnPageHide",1,!1);const t=performance.now();if(!c.currentlyInViewItems)return;const a=Array.from(c.currentlyInViewItems.keys()).map((e=>({isIntersecting:!1,target:e,time:t,intersectionRatio:0,rootBounds:null,intersectionRect:e.getBoundingClientRect(),boundingClientRect:e.getBoundingClientRect()})));null===(e=c.intersectionObserverEntryQueue)||void 0===e||e.push(...a),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>100},!0)}));const d=e=>{const t=null==e?void 0:e.match("[/?&]_?ref=([a-zA-Z0-9-_]+)");return t&&t.length>1?t[1]:((0,o.cL)("DVWebNode::ImpressionTracker::UnknownRef",1,!1),"atv_impression_unknown")}},"./src/widgets/Explore/DraperPlayer/videoContext.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>i,l:()=>n});var s=a("./node_modules/react/index.js");const i={muted:!0,activeActivePlayer:null,activePassivePlayer:null,fullScreen:!1,updateContext:null},n=s.createContext(i);n.displayName="VideoContext"},"./src/widgets/Explore/Hover/utils.ts":(e,t,a)=>{"use strict";a.d(t,{AK:()=>r,Dy:()=>i,Sy:()=>l,Wx:()=>o,Xe:()=>n,j8:()=>d,o6:()=>s});const s=e=>{var t;const a=null!=e&&e.playbackAction?null==e?void 0:e.playbackAction:null==e?void 0:e.playbackActions[0];if(!a)return;const s=null==e||null===(t=e.progress)||void 0===t?void 0:t.percentage;return{...a,progress:s}},i=e=>{var t;return null==e||null===(t=e.playbackActions)||void 0===t?void 0:t.slice(1)},n=e=>{const t=e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleType;if(t){const e=t.toLowerCase();if("season"==e)return"SEASON";if("event"==e)return"LIVEEVENT"}return"UNKNOWN"},r=e=>e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleID,o=e=>({onMouseOver:()=>e(!0),onMouseLeave:()=>e(!1),onFocus:()=>e(!0),onBlur:()=>e(!1)}),l=(e,t=0)=>{if(!e)return;const a=(new Date).getTime(),s=e&&e.schedule.sort(((e,t)=>e.start-t.start))||[],i=s.findIndex((e=>e.start<a&&e.end>a));return i>-1?s[i+t]:void 0},c="DVWeb::Hover2019::",d={enrichAttempt:c+"Enrich::Attempt",enrichAttemptInitial:c+"Enrich::Attempt::Initial",enrichComplete:c+"Enrich::Complete",enrichCompleteInitial:c+"Enrich::Complete::Initial",hoverNoEnrich:c+"Hover::NoEnrich",hover:c+"Hover",playerOpened:c+"Playback",mountToFirstEnrich:c+"ToFirstEnrich",fatal:c+"JSFATAL"}},"./src/shared/utils/modalTrigger/ModalTrigger.module.scss":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={modalFooter:"_6-gGES"}},"./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={actionBox:"_1D5Acx",acquisition:"_8hKdEv",buttonContainer:"_1q35z5",disableOverlay:"_3GDQxn",spinnerWrapper:"_358cKJ",smallSpinnerWrapper:"_1UR0bR",messageWrapper:"zDu3N-",wrapper:"_28Bfau",linkWrapper:"_25QY39",linkWrapperTarget:"_10rk8T",isProcessingTransaction:"_3Nb3Qa",watchParty:"ziAmgX",purchaseFailedModal:"_2C8JD9",primaryActions:"_2aLrtz",secondaryActions:"_296Xcm",simplifiedBuyBoxDownload:"_1VtRUv",buttonLabel:"_1DN7sB",spinnerNextGen:"_3YYGRK",messageWrapperNextGen:"_1EL5ZF"}},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.module.scss":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={info:"_266mZB",atfInfo:"_3u-3mI",breakWords:"_2y5Q0c",modalWrapper:"_3XUVYC",productMetaInfo:"_30UT8H"}},"./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={fullWidth:"_2IIDsE",alwaysInline:"_1z4REl",fullWidthPhablet:"_1ITy4O",stretchHeight:"n4qlso",pageSection:"_1yP1uA",disablePointerEvents:"_2GUwRS",enablePointerEvents:"HaWow5"}},"./node_modules/@amzn/dvui/dist/Icons/Edit.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Help.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Lightbulb.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Share.css":(e,t,a)=>{"use strict";a.r(t)}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e].call(a.exports,a,a.exports,o),a.exports}o.m=n,e=[],o.O=(t,a,s,i)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,s,i]=e[d],r=!0,l=0;l<a.length;l++)(!1&i||n>=i)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(r=!1,i<n&&(n=i));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,s,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>(({6608:"detail-hero-video",8355:"detail-purchase",8584:"detail-hover",8918:"detail-entitlement"}[e]||e)+"."+{2539:"96d258e348d7dc08e52d",6608:"b3d7c824567a2e15fde6",8355:"5bed4d70a44294ee1c75",8584:"66abd165a79683cbb7aa",8918:"bf63b2640af17abed6ae"}[e]+".js"),o.miniCssF=e=>({4033:"detail-default",6608:"detail-hero-video",8584:"detail-hover",8918:"detail-entitlement",9351:"commons"}[e]+"."+{4033:"cde0c336f1a6fd59b3d6",6608:"51e738bb5ee1828ba9d4",8584:"4b1d73f44db88bc5770e",8918:"6a552e1569e6825d4d6c",9351:"f72ec560ab57a55a4560"}[e]+".css"),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="@amzn/dvwebnode:",o.l=(e,s,i,n)=>{if(t[e])t[e].push(s);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+i){r=u;break}}if(!r){l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",a+i),r.src=e;var m=r.src.split("/"),p=m[m.length-1].split("."),g=window.DVWEBNODE_MANIFESTS[p[0]+".js"],_=g||window.DVWEBNODE_MANIFESTS[m[m.length-1]],h=o.p+_+(g?"?DVWebNode_"+p[0]:"");r.src=h,r.crossOrigin="anonymous"}t[e]=[s];var b=(a,s)=>{r.onerror=r.onload=null,clearTimeout(v);var i=t[e];if(delete t[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(s))),a)return a(s)},v=setTimeout(b.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=b.bind(null,r.onerror),r.onload=b.bind(null,r.onload),l&&document.head.appendChild(r)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=4033,o.p="https://m.media-amazon.com/images/I/",s=e=>new Promise(((t,a)=>{var s=o.miniCssF(e),i=o.p+s;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=(r=a[s]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){var r;if((i=(r=n[s]).getAttribute("data-href"))===e||i===t)return r}})(s,i))return t();((e,t,a,s)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,i.parentNode.removeChild(i),s(l)}},i.href=t,function(e){if(e.href){var t=e.href.match(/I\/(.*?)\./)[1]+".css",a=e.href.match(/I\/(.*)\./)[1]+".css";return(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[a])&&(e.href=o.p+(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[a])),document.head.appendChild(e)}document.head.appendChild(e)}(i)})(e,i,t,a)})),i={4033:0},o.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{6608:1,8584:1,8918:1}[e]&&t.push(i[e]=s(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={4033:0};o.f.j=(t,a)=>{var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var i=new Promise(((a,i)=>s=e[t]=[a,i]));a.push(s[2]=i);var n=o.p+o.u(t),r=new Error;o.l(n,(a=>{if(o.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",r.name="ChunkLoadError",r.type=i,r.request=n,s[1](r)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,a)=>{var s,i,[n,r,l]=a,c=0;if(n.some((t=>0!==e[t]))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(l)var d=l(o)}for(t&&t(a);c<n.length;c++)i=n[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},a=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=o.O(void 0,[1216,9351],(()=>o("./src/entrypoints/hydration/detail-default.tsx")));l=o.O(l)})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/9def5f26d25d5b020659ef87c48d82e886468dd1db0e42c7960295a5f3d4a1d7345ab555e262523b37bf6a92627c2aaff369138588c4fdb92089d495b4b1d4d0d289b20bcce7da5dc817d51f9d2af6cf294588302adc9cbe5c4512baf70ed7101849d59f610010720c6fe7e0299c59457034fc0a237ed736f4e1020da13e03d47d7830d0dffaf4248234fb9308ef7e0c460e370a6291d11548d43c9c3ff244b36aba9279988bf2efe70d26b0e519108b85988d3ca91240a43af6dab8a4dc8aaef3688f1fa6ce0f0b4495746b739887f45463094a9c3b31e30ee9ea1d7561386d8813e4f571f65fab74ea2ce4363d2a95fa1daf198208d84c486a5c01c11a7375?np=1